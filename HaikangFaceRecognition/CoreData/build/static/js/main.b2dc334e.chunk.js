(this["webpackJsonpnew-list-map"]=this["webpackJsonpnew-list-map"]||[]).push([[0],{120:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(12),s=a(0),c=a.n(s),u=a(5),d=a(276),m=a(4),f=a.n(m),g=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).receiveMessage=function(e){void 0!==e&&e.data&&e.data.name},t.handleClick=function(){document.getElementById("core_content").contentWindow.postMessage(1233,"*")},t.state={modelId:""},t}return Object(r.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.Build()}},{key:"Build",value:function(){var t=[];f.a.get(e.Url+"map/build/list",{}).then((function(a){var n=a.data.data;if(n&&"success"===a.data.msg)for(var l=function(a){f.a.post(e.Url+"map/floor/list",{build_id:n[a].id}).then((function(e){var l=e.data.data;if(l&&"success"===e.data.msg){t.push({FloorItems:n[a],Floorlists:l});var i=JSON.stringify(t);sessionStorage.setItem("Floor",i)}else alert(e.msg)}))},i=0;i<n.length;i++)l(i);else alert(a.msg)}))}},{key:"render",value:function(){return c.a.createElement(s.Fragment,null,c.a.createElement("iframe",{id:"core_content",name:"iframeName",ref:"core_content",title:"core_content",src:e.IframeUrl,style:{width:"100%",height:"100%"},sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",scrolling:"auto",onLoad:u.a.List}),c.a.createElement(d.a,null))}},{key:"componentWillUnmount",value:function(){}}]),a}(s.Component);t.a=g}).call(this,a(22))},122:function(e,t,a){"use strict";var n=a(8),l=a(9),i=a(11),o=a(10),r=a(12),s=a(0),c=a.n(s),u=(a(36),a(3)),d=a(15),m=a(31),f=a(5),g=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(i.a)(this,Object(o.a)(t).call(this))).state={activeBtn:!1},e.changeStatus=e.changeStatus.bind(Object(u.a)(e)),e}return Object(r.a)(t,e),Object(l.a)(t,[{key:"changeStatus",value:function(){this.setState({activeBtn:!this.state.activeBtn})}},{key:"render",value:function(){var e=this,t=this.props,a=t.clickIcon,n=t.index,l=this.state.activeBtn;return c.a.createElement("li",{type:"button",onClick:function(){a(1),e.changeStatus()},className:l&&1===n?"active":""},c.a.createElement("i",{className:"icon1"}),"\u590d\u4f4d")}}]),t}(s.PureComponent),h=Object(d.b)((function(e){return{index:e.footer.get("index")}}),(function(e){return{clickIcon:function(t){e(m.a.click_Icon(t)),f.a.onResetCoordinates()}}}))(g),p=a(277),v={RainwaterSystem:!0,snowSystem:!0,Fogging:!0,enableLighting:!0,MeasurementHeight:!0,measureLineSpace:!0,measureAreaSpace:!0,onSurveillance:!0},y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={activeBtn:!1},t.this=Object(u.a)(a),a.changeStatus=a.changeStatus.bind(Object(u.a)(a)),a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"changeStatus",value:function(){this.setState({activeBtn:!this.state.activeBtn})}},{key:"MeasurementHeight",value:function(){v.MeasurementHeight?(v.MeasurementHeight=!1,f.a.MeasurementHeight()):(v.MeasurementHeight=!0,f.a.RemoveHeight())}},{key:"measureLineSpace",value:function(){v.measureLineSpace?(v.measureLineSpace=!1,f.a.measureLineSpace()):(v.measureLineSpace=!0,f.a.RemoveLine())}},{key:"measureAreaSpace",value:function(){v.measureAreaSpace?(v.measureAreaSpace=!1,f.a.measureAreaSpace()):(v.measureAreaSpace=!0,f.a.RemoveArea())}},{key:"snowSystem",value:function(){v.snowSystem?(v.snowSystem=!1,f.a.snowSystemV2()):(v.snowSystem=!0,f.a.snowDelete())}},{key:"RainwaterSystem",value:function(){v.RainwaterSystem?(v.RainwaterSystem=!1,f.a.RainwaterSystemV2()):(v.RainwaterSystem=!0,f.a.RainDelete())}},{key:"Fogging",value:function(){v.Fogging?(v.Fogging=!1,f.a.Fogging()):(v.Fogging=!0,f.a.fogDelete())}},{key:"enableLighting",value:function(){v.enableLighting?(v.enableLighting=!1,f.a.enableLightingV2()):(v.enableLighting=!0,f.a.lightDelete())}},{key:"Surveillance",value:function(){v.onSurveillance?(v.onSurveillance=!1,f.a.onSurveillance()):(v.onSurveillance=!0,f.a.onMap())}},{key:"render",value:function(){var e=this,t=this.props,a=t.index,n=t.clickIcon,l=t.moreIndex,i=t.clickIconItem,o=t.clickIconItemNav,r=this.state.activeBtn;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{onClick:function(){n(3),e.changeStatus()},className:r&&3===a?"active":""},c.a.createElement("i",{className:"icon3"}),"\u66f4\u591a"),3===a&&r?c.a.createElement("div",{className:"MoreShow"},c.a.createElement("div",{className:"MoreItem",onClick:function(e){return i(e,1)}},c.a.createElement("i",{className:"more1"}),"\u56fe\u5c42"),c.a.createElement("div",{className:"MoreItem",onClick:function(e){return i(e,2)}},c.a.createElement("i",{className:"more2"}),"\u6f2b\u6e38"),c.a.createElement("div",{className:"MoreItem",onClick:function(e){return i(e,3)}},c.a.createElement("i",{className:"more3"}),"\u91cf\u6d4b",3===l?c.a.createElement("div",{className:"LcShow"},c.a.createElement("div",{className:"LcItem",onClick:function(e){return o(e,1)}},"\u6d4b\u9ad8"),c.a.createElement("div",{className:"LcItem",onClick:function(e){return o(e,2)}},"\u6d4b\u8ddd"),c.a.createElement("div",{className:"LcItem",onClick:function(e){return o(e,3)}},"\u6d4b\u9762\u79ef")):" "),c.a.createElement("div",{className:"MoreItem",onClick:function(e){return i(e,4)}},c.a.createElement("i",{className:"more4"}),"\u7279\u6548",4===l?c.a.createElement("div",{className:"LcShow"},c.a.createElement("div",{className:"LcItem",onClick:function(e){return o(e,4)}},c.a.createElement("span",null,"\u96e8")," ",c.a.createElement("i",{className:"LcIcon1"})),c.a.createElement("div",{className:"LcItem",onClick:function(e){return o(e,5)}},c.a.createElement("span",null,"\u96ea")," ",c.a.createElement("i",{className:"LcIcon2"})),c.a.createElement("div",{className:"LcItem",onClick:function(e){return o(e,6)}},c.a.createElement("span",null,"\u96fe")," ",c.a.createElement("i",{className:"LcIcon3"})),c.a.createElement("div",{className:"LcItem",onClick:function(e){return o(e,7)}},c.a.createElement("span",null,"\u5149\u7167")," ",c.a.createElement("i",{className:"LcIcon4"}))):" "),c.a.createElement("div",{className:"MoreItem",onClick:function(e){return i(e,5)}},c.a.createElement("i",{className:"more5"}),"\u98de\u884c"),c.a.createElement("div",{className:"MoreItem",onClick:function(e){return i(e,6)}},c.a.createElement("i",{className:"more6"}),"\u865a\u62df\u5316"),c.a.createElement("div",{className:"MoreItem",onClick:function(e){return i(e,7)}},c.a.createElement("i",{className:"more7"}),"\u5730\u56fe\u4fe1\u606f")):"")}}]),t}(s.PureComponent),b=Object(d.b)((function(e){return{index:e.footer.get("index"),moreIndex:e.footer.get("moreIndex"),moreIndexItem:e.footer.get("moreIndexItem")}}),(function(e){return{clickIcon:function(t){e(m.a.click_Icon(t))},clickIconItem:function(t,a){switch(t.stopPropagation(),e(m.a.click_Icon_Item(a)),a){case 1:alert("\u56fe\u5c42\u4e8b\u4ef6");break;case 2:case 5:f.a.FlightRoaming();break;case 6:y.this.Surveillance();break;case 7:alert("\u5730\u56fe\u4fe1\u606f\u4e8b\u4ef6");break;default:return null}},clickIconItemNav:function(t,a){switch(t.stopPropagation(),e(m.a.click_Icon_Item_Nav(a)),a){case 1:y.this.MeasurementHeight();break;case 2:y.this.measureLineSpace();break;case 3:y.this.measureAreaSpace();break;case 4:y.this.RainwaterSystem();break;case 5:y.this.snowSystem();break;case 6:y.this.Fogging();break;case 7:y.this.enableLighting();break;default:return null}}}}))(y),E=a(279),C=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(i.a)(this,Object(o.a)(t).call(this))).state={activeBtn:!1},e.changeStatus=e.changeStatus.bind(Object(u.a)(e)),e}return Object(r.a)(t,e),Object(l.a)(t,[{key:"changeStatus",value:function(){this.setState({activeBtn:!this.state.activeBtn})}},{key:"render",value:function(){var e=this,t=this.props,a=t.clickIcon,n=t.index,l=this.state.activeBtn;return c.a.createElement("li",{onClick:function(){a(5),e.changeStatus()},className:l&&5===n?"active":""},c.a.createElement("i",{className:"icon5"}),"\u6307\u5317")}}]),t}(s.PureComponent),N=Object(d.b)((function(e){return{index:e.footer.get("index")}}),(function(e){return{clickIcon:function(t){e(m.a.click_Icon(t)),f.a.onNorth()}}}))(C),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={item:0},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"footer"},c.a.createElement("div",{className:"footerContent"},c.a.createElement(h,null),c.a.createElement(p.a,null),c.a.createElement(b,null),c.a.createElement(E.a,null),c.a.createElement(N,null)))}}]),t}(s.Component);t.a=k},172:function(e,t,a){},18:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"nav_click",(function(){return r}));var l=a(118),i=Object(l.a)({adminItem:0,adminIndex:0,adminIndexItem:0}),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"admin/CLICK_NAV":return e.merge({adminItem:t.id,adminIndex:t.item,adminIndexItem:0});default:return e}},r=function(e,t){return{type:"admin/CLICK_NAV",id:e,item:t}};a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return n}))},20:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAKvWlDQ1BEaXNwbGF5AABIiZWWd1RTeRbH73svnYSWgHRCDUWQXqWEHoogHUQlJAECIcQQULErgyM4FkREQB3RUQEFKyBjxYKFQcBeJ8igoI6DjthQs3+whJndPbtn7znvvM/5vvv73nt/5/1xAagfuRKJCFUHyBPLpLGhAczklFQm8TdAAAEyEMCWyyuQsGNiIgEAJt9/j/d3AAEAuGnHlUhE//79v4YGX1DAA0BiACCDX8DLA0COAyBynkQqA8AqAcBsoUwiA8DaAYAhTU5JBcC6AYCRNcFyAGBkTPA7AGBI42MDAXAkABKVy5VmAVAZAMAs4mXJAKguAOAg5gvFAFQ+APjysrl8AOpeAJiel5fPB6D2AoBVxl98sv7mmaH05HKzlDwxCwAAkIKEBRIRd/H/eR3/O/JEhZM1LAGAmi0NiwUAEgByLzc/QsnijFnRkyzkT/QEgNzLLgxLmGReQWDqJPO5QRHKs6JZkZOcKQzhKH1knPhJFhQEx02yND9WWStTGsieZK50qm5hboJSzxZwlP7F2fFJk1wkTJw1yQW5cRFTOYFKXVoYq+xfIA4NmKobopw9r+Av8wo5yrOy7Pgw5ezcqf4FYvaUZ0Gysje+ICh4KidBmS+RBShrSUQxynyBKFSpFxTFKc/KpPFT+bIY5R3mcMNjJhmEEAVc4MkEi2QAAIH5ksVSYVa2jMmWSEQCJkfMs5/OdHJwcgBITkllTvwCozcAAQBEV2NKK00D8H2pUChap7SwGwBHXgNQPk9prEYANRbAlWW8QmnRhIYDAMADBdSAAbpgBGZgBXbgBG7gDf4QDOEQDfGQAvOAB9mQB1JYCEthFZRCOWyCrVADu2APHIBDcBTa4BSch8twHXrhNjwEOQzBSxiF9zCOIAgRoSF0RBcxRiwQW8QJ8UB8kWAkEolFUpB0JAsRI4XIUmQNUo5UIDXIbqQBOYKcRM4jV5E+5D4ygIwgb5HPKIZSUQZqiFqiM1APlI1GoPHoXDQLXYAWoyXoBrQarUcPoq3oefQ6ehuVoy/RMQwwFUwbM8HsMA8sEIvGUrFMTIotx8qwKqwea8Y6sC7sJibHXmGfcAQcHcfE2eG8cWG4BBwPtwC3HLceV4M7gGvFXcTdxA3gRnHf8DS8Ad4W74Xn4JPxWfiF+FJ8FX4f/gT+Ev42fgj/nkAgaBNYBHdCGCGFkENYQlhP2EFoIZwj9BEGCWNEIlGXaEv0IUYTuUQZsZS4nXiQeJbYTxwifiSpkIxJTqQQUipJTFpNqiI1ks6Q+knPSeNkdbIF2YscTeaTF5M3kveSO8g3yEPkcYoGhUXxocRTciirKNWUZsolyiPKnyoqKqYqniqzVYQqK1WqVQ6rXFEZUPlE1aTaUAOpadRC6gbqfuo56n3qnzQazZLmT0ulyWgbaA20C7QntI+qdFV7VY4qX3WFaq1qq2q/6ms1spqFGlttnlqxWpXaMbUbaq/UyeqW6oHqXPXl6rXqJ9Xvqo9p0DUcNaI18jTWazRqXNUY1iRqWmoGa/I1SzT3aF7QHKRjdDN6IJ1HX0PfS79EH2IQGCwGh5HDKGccYvQwRrU0tVy0ErUWadVqndaSa2PaltocbZH2Ru2j2ne0P08znMaeJpi2blrztP5pH3T0dfx1BDplOi06t3U+6zJ1g3VzdTfrtuk+1sPp2ejN1luot1Pvkt4rfYa+tz5Pv0z/qP4DA9TAxiDWYInBHoNugzFDI8NQQ4nhdsMLhq+MtI38jXKMKo3OGI0Y0419jYXGlcZnjV8wtZhspohZzbzIHDUxMAkzKTTZbdJjMm7KMk0wXW3aYvrYjGLmYZZpVmnWaTZqbmweZb7UvMn8gQXZwsMi22KbRZfFB0uWZZLlWss2y2GWDovDKmY1sR5Z0az8rBZY1VvdsiZYe1jnWu+w7rVBbVxtsm1qbW7YorZutkLbHbZ90/HTPaeLp9dPv2tHtWPbFdk12Q3Ya9tH2q+2b7N/PcN8RuqMzTO6ZnxzcHUQOex1eOio6RjuuNqxw/Gtk40Tz6nW6ZYzzTnEeYVzu/MbF1sXgctOl3uudNco17Wuna5f3dzdpG7NbiPu5u7p7nXudz0YHjEe6z2ueOI9AzxXeJ7y/OTl5iXzOur1h7edd653o/fwTNZMwcy9Mwd9TH24Prt95L5M33TfH33lfiZ+XL96v6f+Zv58/33+z9nW7Bz2QfbrAIcAacCJgA+BXoHLAs8FYUGhQWVBPcGawQnBNcFPQkxDskKaQkZDXUOXhJ4Lw4dFhG0Ou8sx5PA4DZzRcPfwZeEXI6gRcRE1EU8jbSKlkR1RaFR41JaoR7MsZolntUVDNCd6S/TjGFbMgpifZxNmx8yunf0s1jF2aWxXHD1uflxj3Pv4gPiN8Q8TrBIKEzoT1RLTEhsSPyQFJVUkyZNnJC9Lvp6ilyJMaU8lpiam7ksdmxM8Z+ucoTTXtNK0O3NZcxfNvTpPb55o3un5avO584+l49OT0hvTv3CjufXcsQxORl3GKC+Qt433ku/Pr+SPCHwEFYLnmT6ZFZnDWT5ZW7JGsv2yq7JfCQOFNcI3OWE5u3I+5Ebn7s9ViJJELXmkvPS8k2JNca74Yr5R/qL8PomtpFQiX+C1YOuCUWmEdF8BUjC3oF3GkElk3YVWhd8VDhT5FtUWfVyYuPDYIo1F4kXdi20Wr1v8vDik+KcluCW8JZ1LTZauWjqwjL1s93JkecbyzhVmK0pWDK0MXXlgFWVV7qpfVjusrlj9bk3Smo4Sw5KVJYPfhX7XVKpaKi29u9Z77a7vcd8Lv+9Z57xu+7pvZfyya+UO5VXlX9bz1l/7wfGH6h8UGzI39Gx027hzE2GTeNOdzX6bD1RoVBRXDG6J2tJayawsq3y3df7Wq1UuVbu2UbYVbpNXR1a3bzffvmn7l5rsmtu1AbUtdQZ16+o+7ODv6N/pv7N5l+Gu8l2ffxT+eG936O7Wesv6qj2EPUV7nu1N3Nv1k8dPDfv09pXv+7pfvF9+IPbAxQb3hoZGg8aNTWhTYdPIwbSDvYeCDrU32zXvbtFuKT8MhwsPvziSfuTO0Yijncc8jjUftzhed4J+oqwVaV3cOtqW3SZvT2nvOxl+srPDu+PEz/Y/7z9lcqr2tNbpjWcoZ0rOKM4Wnx07Jzn36nzW+cHO+Z0PLyRfuHVx9sWeSxGXrlwOuXyhi9119orPlVNXva6evOZxre262/XWbtfuE7+4/nKix62n9Yb7jfZez96Ovpl9Z/r9+s/fDLp5+Rbn1vXbs2733Um4c+9u2l35Pf694fui+28eFD0Yf7jyEf5R2WP1x1VPDJ7U/2r9a4vcTX56IGig+2nc04eDvMGXvxX89mWo5BntWdVz4+cNw07Dp0ZCRnpfzHkx9FLycvxV6e8av9e9tnp9/A//P7pHk0eH3kjfKN6u/1P3z/3vXN51jsWMPXmf9378Q9lH3Y8HPnl86vqc9Pn5+MIvxC/VX62/dnyL+PZIkadQSLhSLgAAYACAZmYCvN0PQEsBoPcCUOZM7NAAAIBM7P0AEzvIf+aJPRsAANwAmgEgFgDYAHAMACz9AVQBINofIN4fUGdn5fPPKMh0dprwUm0CIJooFG/zAcj5AF9CFYrxGIXiax0AdgvgzPDE7g4AQFAHaNaf++6g4c3+TvjX+AdiWhDBvzAA6wAAAAlwSFlzAAALEwAACxMBAJqcGAAACaVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDEtMTVUMTc6MzA6NTIrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDItMjJUMTU6NTQ6MjIrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTAyLTIyVDE1OjU0OjIyKzA4OjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIzMTQ0NzcyLTNlY2MtZGE0OS04ZDE4LWZhOTEwOWExOTFhYiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjFlZTBlYmZlLTc4MDgtMTE3ZC1iYzVjLWQzMTgyMGMyY2VmZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg0ZjZjZDFjLWJiOTgtNGZjMi1hMDM1LWI5NmM5YWNhM2UxYSIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkRpc3BsYXkiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlhSZXNvbHV0aW9uPSI3MjAwMDAvMTAwMDAiIHRpZmY6WVJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSI2NTUzNSIgZXhpZjpQaXhlbFhEaW1lbnNpb249IjQ4IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iNDgiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjg0ZjZjZDFjLWJiOTgtNGZjMi1hMDM1LWI5NmM5YWNhM2UxYSIgc3RFdnQ6d2hlbj0iMjAyMC0wMS0xNVQxNzozMDo1MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjk5MDM1ZjA4LWJmOGItNGE4MS1hMDQxLTFmMDkyYjhlZDIwZSIgc3RFdnQ6d2hlbj0iMjAyMC0wMS0xNVQxNzozMDo1MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIzMTQ0NzcyLTNlY2MtZGE0OS04ZDE4LWZhOTEwOWExOTFhYiIgc3RFdnQ6d2hlbj0iMjAyMC0wMi0yMlQxNTo1NDoyMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6NTNkNWFlY2EtNzczZS0xMTdkLTliZGYtY2E1ODBiOWExMGI1PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo2ZGVhOGU5YS1jOTIxLTQwZjktYTAwMC0wY2M4NDgxZTJmMDg8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkU0NTJDRUIyOTcyMjExRTk4Njk4RDJGRDlCOUVFQzFEPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpjM2VkYzcxYS0xNzA3LTQwYjYtODI5Yi1iNmYxZjU2YjkyYmQ8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOmM3MGIxNWY5LTk0ZTgtNGZlOS1hMzljLTc5N2I4N2Q0NjcyYjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6ZjJmZjU0ODAtNjJlZS00ZTVjLWEzNmUtYTlhMDdjODY4ODhhPC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7yqu9wAAAuJJREFUaIHtmU1PE0EYx//P7Dt9AdpCRIK4CQfhgNEQ0UDiQT2BBy7Gkx+BmwmfQr+DiYk3b1w4aGIk4oVEExqjDSaKlJQWKC1t92XGQyGRUhIdu25q9pfsYdPsM88v02d2nh0izVwSbt1Dl0GaqVqjU5cJwGMAStgJSeCDSGHozuQBQIEQHgs7i79FDSiuAOAC8NGcYQ0ABTFQEAKCGQlFH7AvKLFUwq+WDp3CZoE3Dn0EIKEAmO1wTDd+9b499ODpQmZu6XaPfWvE3d/KO9vZAjpfbzyIGmgkJudm9MGxYbf0A/rg2HBicm4GQCOAsRCEgCCm6CAGCAEQAzFFR7MuOk7Xr0KRQNhEAmETCYRNJBA2XS9w3m5UAOCSMX0IcXrb0Lz3jy8ZGM7ZyRKApV/uuRJL6b03H433Tj+8R0w1JAbjSk9/nDRLheAAMQi35vlHexVIzLjgXuNg7cXKwbtnWb9aclpieK0z4OgZeyR9d3Ge6fGk7O5d+B4g+EkGIM1StVSiTy4YkL6zOF/78qZUq5ZyAMxff24V4MyIWXrGTrp725D/F7UmwSE8R/JhBn3QTjIjbrVLqFVA9co7peqn11lrbHacSG4K/OoehFtDc0vNQZoFJdYvFUtwH9Xsqw2vnC+1yfdMDQjSTGZdup4x7RsTREyTGLORvLYwbQxNpLlbA9MsNLY3iuX1l2sA/rimBPfd+ub7jdq39V3h1jlOF/OZGiDh1vlRbnXrKLeak0geAPaNoSuj5uhUGm4NpPegkc/miytPngPok4xp4pwPA+2WUQKgH19SkGqop4pYNVQ0k0/KxjyPrn+RRQJhEwmETSQQNpFA2EQCYRMJhE0k0AYS3HeaDT0BEBDCdxDQIV8QAkbl4/Jbp5Db0lIX4ex8/l75sLwKiW7sd2htKTuBYGZC0TP2AIulErxSLDvFr7u8HsgppReEAPDvzonP9MSd4qQtDZz/YhWS/V4ZNj6I1J+wxPjvqQd3fQAAAABJRU5ErkJggg=="},263:function(e,t,a){},264:function(e,t,a){},267:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=(a(36),a(268)),m=a.n(d),f=a(47),g=a(81),h=a.n(g),p=a(269),v=a.n(p),y=a(4),b=a.n(y),E=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).userChange=function(e){t.setState({user:e.target.value})},t.passwordChange=function(e){t.setState({password:e.target.value})},t.state={typeID:0,loginState:!1,user:"",password:"",Show:!1},t.UserClick=t.UserClick.bind(Object(r.a)(t)),t.userChange=t.userChange.bind(Object(r.a)(t)),t.passwordChange=t.passwordChange.bind(Object(r.a)(t)),t.login=t.login.bind(Object(r.a)(t)),t}return Object(s.a)(a,t),Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.loginState,n=t.typeID,l=t.user,i=t.password,o=t.Show;return a?1===n?u.a.createElement(f.a,{to:"/admin"}):u.a.createElement(f.a,{to:"/"}):u.a.createElement(h.a,{title:"\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0"},u.a.createElement("div",{id:"loginBJ",className:"loginContainer"},u.a.createElement("video",{muted:"muted",autoPlay:"autoplay",loop:"loop",className:"video"},u.a.createElement("source",{type:"video/mp4",src:m.a})),u.a.createElement("div",{className:"loginLogo"},u.a.createElement("img",{src:v.a,alt:""}),u.a.createElement("br",null),"\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0"),u.a.createElement("div",{className:"login"},u.a.createElement("div",{className:"loginWrapper"},o?u.a.createElement("h1",null,u.a.createElement("span",{className:"cur1",onClick:function(){return e.UserClick(1)}},"\u540e\u53f0\u7ba1\u7406")):u.a.createElement("h1",null,u.a.createElement("span",{className:0===n?"cur":" ",onClick:function(){return e.UserClick(0)}},"\u7528\u6237\u767b\u5f55"),u.a.createElement("span",{className:1===n?"cur":" ",onClick:function(){return e.UserClick(1)}},"\u540e\u53f0\u7ba1\u7406")),u.a.createElement("input",{type:"text",value:l,onChange:function(t){return e.userChange(t)},placeholder:"\u7528\u6237\u540d"}),u.a.createElement("input",{type:"password",value:i,onChange:function(t){return e.passwordChange(t)},placeholder:"\u5bc6\u7801"}),u.a.createElement("button",{onClick:function(){return e.login(l,i,n)}},"\u767b\u5f55",u.a.createElement("i",null))))))}},{key:"UserClick",value:function(e){this.setState({typeID:e})}},{key:"login",value:function(t,a,n){var l=this;this.state.Show&&(n=1),t?a?b.a.post(e.Url+"sys/user/login",{user_name:t,user_pwd:a,database:e.Database}).then((function(e){var t=e.data.data;t?(sessionStorage.setItem("role",t.role_id),sessionStorage.setItem("userName",t.full_name),sessionStorage.setItem("user",t.user_name),sessionStorage.setItem("typeId",n),1===n?l.props.history.push("/admin"):0===n&&l.props.history.push("/")):alert("\u767b\u5f55\u5931\u8d25")})):alert("\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"):alert("\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01")}},{key:"componentDidMount",value:function(){var e=this;document.body.addEventListener("keyup",(function(t){window.event&&(t=window.event),13===(t.charCode||t.keyCode)&&e.login(e.state.user,e.state.password,e.state.typeID)}))}},{key:"componentWillMount",value:function(){var t=this;document.body.removeEventListener("keyup",(function(){})),b.a.get(e.Url+"sys/config/isLogin").then((function(e){var a=e.data.data;a?t.setState({Show:a.is_login}):alert(e.msg)}))}}]),a}(c.PureComponent);t.a=E}).call(this,a(22))},268:function(e,t,a){e.exports=a.p+"static/media/video-diqiu.6c2b416b.mp4"},269:function(e,t,a){e.exports=a.p+"static/media/loginLogo.64f42920.png"},271:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(12),s=a(0),c=a.n(s),u=(a(36),a(272)),d=a(120),m=a(81),f=a.n(m),g=a(4),h=a.n(g),p=a(122),v=a(280),y=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).state={isLogin:""},t}return Object(r.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onLoad(),-1===navigator.userAgent.toLowerCase().indexOf("chrome")&&(alert("\u8bf7\u4f7f\u7528\u8c37\u6b4c\u6d4f\u89c8\u5668\uff01"),window.open("http://rj.baidu.com/soft/detail/14744.html?ald","_blank"))}},{key:"onLoad",value:function(){var t=this;h.a.get(e.Url+"sys/config/isLogin").then((function(e){var a=e.data.data;if(a){sessionStorage.setItem("isLogin",a.is_login);var n=sessionStorage.getItem("user");!1===a.is_login&&"admin"!==n&&t.props.history.push("/login")}else alert(e.msg)}))}},{key:"render",value:function(){return c.a.createElement(f.a,{title:"\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0"},c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"header"},c.a.createElement(u.a,null)),c.a.createElement("div",{className:"IndexHome"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"}),c.a.createElement("div",{className:"conent"},c.a.createElement(d.a,null))),c.a.createElement(p.a,null),c.a.createElement(v.a,null)))}}]),a}(s.Component);t.a=y}).call(this,a(22))},272:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=(a(36),a(119)),m=a.n(d),f=a(4),g=a.n(f),h=a(5),p=a(59),v=a(273),y=a(274),b=function(t){function a(e){var t;Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).state={success:!1,homeTitle:"",homeUser:"",NavShow:!0,NavNumber:0};var l=Object(r.a)(t);return setInterval((function(){l.fn()}),1e3),t}return Object(s.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fn(),this.HQuser(),this.HQstate(),this.HQConfig(),this.onLoadStand(),this.RemoveBombox()}},{key:"RemoveBombox",value:function(){for(var t=e.WebList,a=0;a<t.length;a++)h.a.removeBubbleBombox(t[a].event_info.id)}},{key:"NavChange",value:function(t){switch(this.setState({NavNumber:t}),e.AlarmShow=!1,t){case 0:this.RemoveBombox(),h.a.onMap();break;case 1:this.RemoveBombox(),h.a.onResource();break;case 2:this.RemoveBombox();for(var a=e.WebList,n=0;n<a.length;n++){console.log(a);for(var l=n+1;l<a.length;)a[n].event_info.id===a[l].event_info.id?a.splice(l,1):l++}if(e.AlarmShow=!0,e.AlarmShow)for(var i=0;i<a.length;i++)h.a.AlarmBox(a[i]);h.a.onSurveillance();break;case 3:case 4:case 5:h.a.onMap(),this.RemoveBombox();break;default:return null}}},{key:"fn",value:function(){var e=m()().format("YYYY.MM.DD HH:mm:ss");this.setState({Time:e})}},{key:"HQuser",value:function(){var t=this;g.a.get(e.Url+"sys/user/defaultUser").then((function(e){var a=e.data.data;a?(sessionStorage.setItem("userName",a.full_name),sessionStorage.setItem("role",a.role_id),t.setState({homeUser:a.full_name,success:!0})):alert(e.msg)}))}},{key:"HQstate",value:function(){g.a.get(e.Url+"sys/config/isConfig").then((function(e){e.data.data||alert(e.msg)}))}},{key:"HQConfig",value:function(){var t=this;g.a.get(e.Url+"sys/config").then((function(e){var a=e.data.data;a?(sessionStorage.setItem("userTitle",a.sys_name),t.setState({homeTitle:a.sys_name,success:!0}),sessionStorage.setItem("Serverurl",a.data_server_uri),sessionStorage.setItem("data_type",a.data_type)):alert(e.msg)}))}},{key:"onLoadStand",value:function(){var t=this;g.a.get(e.Url+"sys/config/isStand").then((function(e){var a=e.data.data;a?t.setState({NavShow:a.is_stand}):alert(e.msg)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.homeTitle,n=t.homeUser,l=t.Time,i=t.success,o=t.NavShow,r=t.NavNumber;return u.a.createElement(c.Fragment,null,o?u.a.createElement("div",{className:"HeaderLeft"},i?a:"",u.a.createElement("i",null)):"",o?u.a.createElement("div",{className:"HeaderContentHome"},u.a.createElement("li",{className:0===r?"cur":"",onClick:function(){return e.NavChange(0)}},"\u4e09\u7ef4\u5730\u56fe"),u.a.createElement("li",{className:1===r?"cur":"",onClick:function(){return e.NavChange(1)}},"\u8d44\u6e90\u56fe\u8c31"),u.a.createElement("li",{className:2===r?"cur":"",onClick:function(){return e.NavChange(2)}},"\u5e03\u63a7\u8b66\u6212"),u.a.createElement("li",{className:3===r?"cur":"",onClick:function(){return e.NavChange(3)}},"\u5e38\u6001\u5de5\u4f5c"),u.a.createElement("li",{className:4===r?"cur":"",onClick:function(){return e.NavChange(4)}},"\u5927\u6570\u636e"),u.a.createElement("li",{className:5===r?"cur":"",onClick:function(){return e.NavChange(5)}},"\u6307\u6325\u9884\u6848")):u.a.createElement("div",{className:"HeaderContentHomeNav"},u.a.createElement("li",{className:0===r?"cur":"",onClick:function(){return e.NavChange(0)}},"\u4e09\u7ef4\u5730\u56fe"),u.a.createElement("li",{className:1===r?"cur":"",onClick:function(){return e.NavChange(1)}},"\u8d44\u6e90\u56fe\u8c31"),u.a.createElement("li",{className:2===r?"cur":"",onClick:function(){return e.NavChange(2)}},"\u5e03\u63a7\u8b66\u6212"),u.a.createElement("li",{className:3===r?"cur":"",onClick:function(){return e.NavChange(3)}},"\u5e38\u6001\u5de5\u4f5c"),u.a.createElement("li",{className:4===r?"cur":"",onClick:function(){return e.NavChange(4)}},"\u5927\u6570\u636e"),u.a.createElement("li",{className:5===r?"cur":"",onClick:function(){return e.NavChange(5)}},"\u6307\u6325\u9884\u6848")),o?u.a.createElement("div",{className:"HeaderRightHome"},u.a.createElement("em",null),u.a.createElement("span",{className:"HeaderTime"},l),u.a.createElement(p.b,{to:"/admin"},u.a.createElement("span",{className:"HeaderBank",title:"\u540e\u53f0\u7ba1\u7406"})),u.a.createElement("span",{className:"HeaderUser"},"\u5f53\u524d\u7528\u6237",u.a.createElement("i",null,i?n:""))):"",function(){switch(r){case 1:return u.a.createElement(v.a,null);case 2:return u.a.createElement(y.a,null);default:return null}}())}}]),a}(c.Component);t.a=b}).call(this,a(22))},273:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=a(4),m=a.n(d),f=a(2),g=a.n(f),h=a(5),p=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).state={treeList:{},TopList:{},titlename:"",deleteId:""},a.this=Object(r.a)(t),t}return Object(s.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onTopList()}},{key:"onLoad",value:function(){var t=this,a=[];m.a.get(e.Url+"grid/region/list").then((function(n){var l=n.data.data;l?(a=l,m.a.post(e.Url+"grid/info/list").then((function(n){var l=n.data.data;l?(l.forEach((function(e){var t={id:e.id,pid:e.region_id,region_name:e.grid_name,node_type:"details",position:e.position,indoor:e.indoor,build_id:e.build_id,floor_id:e.floor_id,children:[],grid_style:e.grid_style,geom:e.geom};a.push(t)})),m.a.post(e.Url+"device/info/deviceByGrid",{category_id:e.titid}).then((function(e){var n=e.data.data;n?(n.forEach((function(e){var t={id:e.device_code,pid:e.grid_id,region_name:e.device_name,node_type:"last",position:null,indoor:e.indoor,build_id:e.build_id,floor_id:e.floor_id,children:[],grid_style:null,geom:e.geom,lastData:{element:e}};a.push(t)})),t.setState({treeList:a})):alert(e.data.msg)}))):alert(n.data.msg)}))):alert(n.data.msg)}))}},{key:"onTopList",value:function(){var t=this;m.a.get(e.Url+"device/info/countForCategory").then((function(e){var a=e.data.data;a&&"success"===e.data.msg?t.setState({TopList:a}):alert(e.msg)}))}},{key:"AnalyticFormat",value:function(e){return function e(t,a){for(var n,l=[],i=0;i<t.length;i++)t[i].pid===a&&(n=e(t,t[i].id),t[i].children=n,l.push(t[i]));return l}(e,"0")}},{key:"generateMenu",value:function(e){var t=this,a=[],n=0;if(e instanceof Array){var l=[],i=!0,o=!1,r=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var d=s.value;l.push(this.generateMenu(d))}}catch(f){o=!0,r=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw r}}a.push(u.a.createElement("ul",{key:"single"},l))}else{if(null==e)return;if(console.log(e),e.children.length>0)for(var m=0;m<e.children.length;m++)n+=e.children[m].children.length;a.push(u.a.createElement("li",{key:e.id,className:"newMap",id:"newMap"+e.id},u.a.createElement("span",{onClick:function(a){return t.onMenuClicked(a,e)}},"last"===e.node_type?"":u.a.createElement("i",null),e.region_name,"last"===e.node_type?"":u.a.createElement("em",null,"0"===e.pid?n:e.children.length)),this.generateMenu(e.children)))}return a}},{key:"onMenuClicked",value:function(e,t){e.stopPropagation();var a=g()(e.target).siblings("ul");if(a.css("display","none"===a.css("display")?"block":"none"),g()("#newMap"+t.id).parents().find("li").find("span").css({color:"#fff",fontWeight:"100"}),g()("#newMap"+t.id).parents().find("span").find("i").removeClass("only"),g()("#newMap"+t.id).find("span").css({color:"#54b2df",fontWeight:"bold"}),g()("#newMap"+t.id).find("span").find("i").addClass("only"),g()("#newMap"+t.id).siblings().find("span").css({color:"#fff",fontWeight:"100"}),g()("#newMap"+t.id).siblings().find("span").find("i").removeClass("only"),g()("#newMap"+t.id).children().find("span").css({color:"#fff",fontWeight:"100"}),g()("#newMap"+t.id).children().find("span").find("i").removeClass("only"),"last"===t.node_type){var n={id:t.id};h.a.CoordinateModelID(n)}}},{key:"AssignedLabelID",value:function(t){e.titid=t.id;var n={id:a.this.state.deleteId};h.a.removeBubbleLabel(n),this.onLoad(),this.setState({titlename:t.category_name+"\u5217\u8868",deleteId:t.id}),g()(".onlyNav"+t.id).parents().css({color:"#fff"}),g()(".onlyNav"+t.id).css({color:"#01F8FF"}),g()(".onlyNav"+t.id).siblings().css({color:"#fff"}),g()(".onlyNav"+t.id).children().css({color:"#fff"});var l={id:t.id,image:t.category_icon};h.a.AddBubbleLabel(l)}},{key:"render",value:function(){var e=this,t=this.state,a=t.TopList,n=t.treeList,l=t.titlename;return u.a.createElement(c.Fragment,null,u.a.createElement("div",{className:"AlarmShow resourceMap",style:{height:"calc(100vh - 125px)"}},u.a.createElement("h1",null,u.a.createElement("span",null,"\u8d44\u6e90\u56fe\u8c31")),u.a.createElement("div",{className:"ResourceMapList"},u.a.createElement("button",null,u.a.createElement("i",null),u.a.createElement("span",null,"\u8d44\u6e90\u56fe\u8c31")),u.a.createElement("ul",null,a.length>0&&a.map((function(t,a){return u.a.createElement("li",{key:a,className:"onlyNav"+t.id,onClick:function(){return e.AssignedLabelID(t)}},t.category_name,"(",t.count,")")})))),u.a.createElement("div",{className:"ResourceMapTree"},u.a.createElement("h2",null,u.a.createElement("span",null,l)),u.a.createElement("div",{className:"ResourceMapTreeUl"},this.generateMenu(this.AnalyticFormat(n))))))}}]),a}(c.Component);t.a=p}).call(this,a(22))},274:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=(a(172),a(2)),m=a.n(d),f=(a(173),a(215),a(219),a(138),a(223),a(275)),g=a.n(f),h=a(4),p=a.n(h),v=a(5),y=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).getOption=function(){var e=t.state;return{tooltip:{trigger:"axis"},xAxis:{data:e.Date,axisLine:{lineStyle:{color:"#fff"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#fff"}}},series:[{name:"\u544a\u8b66\u6570\u91cf",type:"line",data:e.Number,areaStyle:{normal:{color:"#8cd5c2"}}}]}},t.state={Date:[],Number:[]},t.onAlarm=t.onAlarm.bind(Object(r.a)(t)),t}return Object(s.a)(a,t),Object(l.a)(a,[{key:"onAlarm",value:function(){var t=this;m()(".Two").toggle(),m()(".TwoAlarm").toggle(),m()(".Two").is(":visible")&&p.a.post(e.Url+"event/info/statisticsForDay",{day:30}).then((function(e){var a=e.data.data;if(a){console.log(a);for(var n=[],l=[],i=0;i<a.length;i++)n.push(a[i].date),l.push(a[i].count);t.setState({Date:n,Number:l})}else alert(e.msg)}))}},{key:"componentDidMount",value:function(){var t=e.WebSocketUrl,a=new WebSocket(t);a.onopen=function(e){a.send("subscribe")},a.onmessage=function(t){if("subscribe success"!==t.data){e.WebList.push(JSON.parse(t.data)),console.log(e.WebList);for(var a=e.WebList,n=0;n<a.length;n++)for(var l=n+1;l<a.length;)a[n].event_info.id===a[l].event_info.id?a.splice(l,1):l++;if(e.AlarmShow)for(var i=0;i<a.length;i++)v.a.AlarmBox(a[i])}}}},{key:"render",value:function(){var e=this;return u.a.createElement(c.Fragment,null,u.a.createElement("div",{className:"AlarmButton TwoAlarm",onClick:function(){return e.onAlarm()}},"\u62a5\u8b66\u8d8b\u52bf"),u.a.createElement("div",{className:"AlarmShow Two",style:{display:"none"}},u.a.createElement("h1",null,u.a.createElement("span",null,"\u62a5\u8b66\u8d8b\u52bf(7\u5929)")),u.a.createElement("div",{className:"AlarmContent"},u.a.createElement(g.a,{option:this.getOption(),style:{height:"300px",marginTop:"-20px"},className:"react_for_echarts"})),u.a.createElement("div",{className:"But",onClick:function(){return e.onAlarm()}})))}}]),a}(c.Component);t.a=y}).call(this,a(22))},276:function(e,t,a){"use strict";var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=(a(263),a(2)),m=a.n(d),f=a(5),g=function(e){function t(e){var a;return Object(n.a)(this,t),a=Object(i.a)(this,Object(o.a)(t).call(this,e)),t.this=Object(r.a)(a),a.state={name:"",FloorList:{},center_position:{}},a.Close=a.Close.bind(Object(r.a)(a)),a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"AssignedModelID",value:function(e,t){var a,n=new RegExp("/","g"),l=[];t.forEach((function(e){null!=e.model_url&&l.push({modelId:e.model_url.replace(n,"_"),order_num:e.order_num,more:e})}));for(var i=0;i<t.length;i++)if(t[i].id===e){if(a=t[i].model_url.replace(n,"_"),null==t[i].model_url)return;if(f.a.CoordinateModel(a),null==t[i].center_position)null!=a&&f.a.onMenuClickedV2(a,l);else{var o=t[i].center_position,r={y:o.y,x:o.x,z:o.z,h:o.heading,p:o.pitch,r:o.roll};f.a.CoordinateLocation(r),console.log("Floors",t[i].center_position)}break}}},{key:"Close",value:function(e){m()("#liu").css({display:"none"});var t=new RegExp("/","g");console.log(e);for(var a=[],n=0;n<e.length;n++)null!=e[n].model_url&&a.push({modelId:e[n].model_url.replace(t,"_"),order_num:e[n].order_num});f.a.ShowSpecifiedModel(a)}},{key:"componentDidMount",value:function(){window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"TabClick":console.log(e.data.tabid);var a=JSON.parse(sessionStorage.getItem("Floor"));m()("#liu").css({display:"block"});for(var n=0;n<a.length;n++)if(a[n].FloorItems.id===e.data.tabid){t.this.setState({name:a[n].FloorItems.build_name,FloorList:a[n].Floorlists,center_position:a[n].FloorItems.center_position});break}break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.FloorList;return u.a.createElement(c.Fragment,null,u.a.createElement("div",{className:"configShow",id:"liu",style:{position:"fixed",width:"250px",marginLeft:"-320px",zIndex:"5",left:"100%",display:"none"}},u.a.createElement("div",{className:"configShowNav"},a,u.a.createElement("i",{onClick:function(){return e.Close(n)}})),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("div",{className:"configShowConent_cont AlarmCont"},u.a.createElement("ul",null,n.length>0&&n.map((function(t,a){return console.log(t),u.a.createElement("li",{onClick:function(){return e.AssignedModelID(t.id,n)},key:a,id:t.id},t.floor_name)})))))))}}]),t}(c.Component);t.a=g},277:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=a(15),m=a(4),f=a.n(m),g=a(2),h=a.n(g),p=a(31),v=(a(36),a(263),a(278)),y=a(5),b=function(t){function a(){var e;return Object(n.a)(this,a),(e=Object(i.a)(this,Object(o.a)(a).call(this))).state={showAddPosition:!1,locationList:[],Bscroll:"",activeBtn:!1},e.handleClick=e.handleClick.bind(Object(r.a)(e)),e.closeBtn=e.closeBtn.bind(Object(r.a)(e)),e.getLocationList=e.getLocationList.bind(Object(r.a)(e)),e.addOver=e.addOver.bind(Object(r.a)(e)),e.deleteItem=e.deleteItem.bind(Object(r.a)(e)),e.centerAim=e.centerAim.bind(Object(r.a)(e)),e}return Object(s.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"getCameraView":sessionStorage.setItem("updatePosition",this.JSON.stringify(e.data.cv,null,4));break;case"InterceptImg":sessionStorage.setItem("upadteImg",JSON.stringify(e.data));break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"componentDidUpdate",value:function(){h()("#PositionList").children().length>=5?(h()("#PositionList").addClass("PositionList"),h()(".PositionLeft").addClass("PositionLeftChange")):(h()("#PositionList").removeClass("PositionList"),h()(".PositionLeft").removeClass("PositionLeftChange")),0===h()("#PositionList").children().length?h()(".PositionLeft").css("display","none"):h()(".PositionLeft").css("display","block")}},{key:"getLocationList",value:function(){var t=this;this.setState({activeBtn:!this.state.activeBtn});var a=new FormData;a.append("user_id",sessionStorage.getItem("role")),f.a.post(e.Url+"map/location/list",a).then((function(e){var a=e.data.data;a?(console.log(a),t.setState({locationList:a})):alert(e.data.msg)}))}},{key:"handleClick",value:function(){this.setState({showAddPosition:!this.state.showAddPosition})}},{key:"closeBtn",value:function(){this.setState({showAddPosition:!1})}},{key:"addOver",value:function(e){this.state.locationList.push(e);var t=this.state.locationList;this.setState({locationList:t}),this.forceUpdate()}},{key:"deleteItem",value:function(t,a){var n=this;if(window.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417?")){var l={id:a};f.a.post(e.Url+"map/location/delete",l).then((function(e){"success"===e.data.msg?(n.state.locationList.splice(t,1),n.setState({locationList:n.state.locationList}),n.forceUpdate(),alert("\u5220\u9664\u6210\u529f")):alert(e.data.msg)}))}}},{key:"changeItem",value:function(e,t){y.a.onCoordinate(),y.a.InterceptImg();var a=this;setTimeout((function(){a.saveChange(e,t)}),0)}},{key:"saveChange",value:function(t,a){var n=this,l={};l.location_name=a.location_name,l.id=a.id,l.position=JSON.parse(sessionStorage.getItem("updatePosition")),l.pic=JSON.parse(sessionStorage.getItem("upadteImg")).base64Img,f.a.post(e.Url+"map/location/update",l).then((function(e){var a=e.data.data;console.log(a),a?(n.state.locationList.splice(t,1,l),n.setState({locationList:n.state.locationList}),n.forceUpdate()):alert(e.data.msg)}))}},{key:"centerAim",value:function(e){y.a.CoordinateLocation(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.index,n=t.clickIcon,l=this.state,i=l.locationList,o=l.showAddPosition,r=l.activeBtn;return u.a.createElement(c.Fragment,null,u.a.createElement("li",{onClick:function(){n(2),e.getLocationList()},className:r&&2===a?"active":""},u.a.createElement("i",{className:"icon2"}),"\u5e38\u7528\u4f4d\u7f6e"),2===a&&r?u.a.createElement("div",{className:"PositionWrapper"},u.a.createElement("div",{className:"PositionLeft"},u.a.createElement("div",{className:"PositionList",id:"PositionList"},i.length>0?i.map((function(t,a){return u.a.createElement("div",{className:"PositionListItem",key:a,index:a,id:t.id},u.a.createElement("span",null,u.a.createElement("em",null,t.location_name),u.a.createElement("i",{className:"item1",style:{cursor:"pointer"},onClick:function(){return e.deleteItem(a,t.id)}}),u.a.createElement("i",{className:"item2",style:{cursor:"pointer"},onClick:function(){return e.changeItem(a,t)}})),u.a.createElement("img",{src:t.pic,style:{cursor:"pointer"},onClick:function(){e.centerAim(t.position)},alt:""}))})):"")),u.a.createElement("div",{className:"PositionRight",onClick:function(){return e.handleClick()}},u.a.createElement("i",null),"\u6dfb\u52a0\u4f4d\u7f6e"),o?u.a.createElement(v.a,{changeData:this.closeBtn,addData:this.addOver}):""):"")}}]),a}(c.PureComponent);t.a=Object(d.b)((function(e){return{index:e.footer.get("index")}}),(function(e){return{clickIcon:function(t){e(p.a.click_Icon(t))}}}))(b)}).call(this,a(22))},278:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=(a(36),a(4)),m=a.n(d),f=a(2),g=a.n(f),h=a(5),p=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).state={currentPosition:{}},t.back=t.back.bind(Object(r.a)(t)),t.addLocation=t.addLocation.bind(Object(r.a)(t)),t}return Object(s.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){g()("#locationName").focus(),window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"getCameraView":sessionStorage.setItem("currentPosition",this.JSON.stringify(e.data.cv,null,4));break;case"InterceptImg":sessionStorage.setItem("Img",JSON.stringify(e.data));break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"back",value:function(e){e.stopPropagation(),this.props.changeData()}},{key:"addLocation",value:function(){if(""!==g()("#locationName").val()){h.a.onCoordinate(),h.a.InterceptImg();var e=this;setTimeout((function(){e.saveLocation()}),800)}else alert("\u8bf7\u9009\u62e9\u4f4d\u7f6e")}},{key:"saveLocation",value:function(){var t=this,a={};a.location_name=g()("#locationName").val(),a.position=JSON.parse(sessionStorage.getItem("currentPosition")),a.pic=JSON.parse(sessionStorage.getItem("Img")).base64Img,a.user_id=sessionStorage.getItem("role"),m.a.post(e.Url+"map/location/add",a).then((function(e){var a=e.data.data;a?(t.props.addData(a),t.props.changeData()):alert(e.data.msg)}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"addPositionBox",style:{color:"#fff"}},u.a.createElement("div",{style:{marginTop:"34px"}},u.a.createElement("span",{style:{marginLeft:"22px",fontSize:"15px"}},"\u4f4d\u7f6e\u540d\u79f0"),u.a.createElement("input",{type:"text",id:"locationName"})),u.a.createElement("div",{className:"addPositionButtonArea"},u.a.createElement("div",{className:"addPosBtn",onClick:function(){e.addLocation()},style:{marginLeft:"100px",cursor:"pointer"}},"\u4fdd\u5b58"),u.a.createElement("div",{className:"addPosBtn",onClick:function(t){return e.back(t)},style:{marginLeft:"21px",cursor:"pointer"}},"\u53d6\u6d88")))}}]),a}(c.PureComponent);t.a=p}).call(this,a(22))},279:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=(a(36),a(31)),m=a(15),f=a(4),g=a.n(f),h=a(5),p=a(2),v=a.n(p),y=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).OnClickDisplay=function(e,a){v()("#more"+a).find("span").toggleClass("active"),v()("#more"+a).find("img").toggleClass("active");for(var n=t.state.dataList,l=0;l<n.length;l++)n[l].item.id===a&&(n[l].item.state?(console.log("0"),h.a.ClearCustomView(a),n[l].item.state=!1):(n[l].item.state=!0,console.log("1"),h.a.CustomView(a)))},t.state={activeBtn:!1,dataList:null,imgclick:null},t.changeStatus=t.changeStatus.bind(Object(r.a)(t)),t.OnClickDisplay=t.OnClickDisplay.bind(Object(r.a)(t)),t}return Object(s.a)(a,t),Object(l.a)(a,[{key:"changeStatus",value:function(){this.setState({activeBtn:!this.state.activeBtn})}},{key:"componentWillMount",value:function(){var t=this;g.a.get(e.Url+"map/group/list").then((function(e){var a=e.data.data;if(a){var n=[];a.forEach((function(e){var t={item:e,state:!0};n.push(t)})),t.setState({dataList:n})}else alert(e.data.msg)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.index,n=t.clickIcon,l=this.state,i=l.activeBtn,o=l.dataList;return u.a.createElement(c.Fragment,null,u.a.createElement("li",{onClick:function(){n(4),e.changeStatus()},className:i&&4===a?"active":""},u.a.createElement("i",{className:"icon4"}),"\u81ea\u5b9a\u4e49"),4===a&&i?u.a.createElement("div",{className:"addMore"},u.a.createElement("div",{className:"MoreShow MoreCur"},o.length>0&&o.map((function(t,a){return u.a.createElement("div",{key:a,onClick:function(n){return e.OnClickDisplay(n,t.item.id,a)},className:"MoreItem",id:"more"+t.item.id},u.a.createElement("img",{alt:"",src:t.item.group_icon}),u.a.createElement("span",null,t.item.group_name))})))):" ")}}]),a}(c.PureComponent);t.a=Object(m.b)((function(e){return{index:e.footer.get("index"),moreIndex:e.footer.get("moreIndex")}}),(function(e){return{clickIcon:function(t){e(d.a.click_Icon(t))},clickIconItem:function(t,a){t.stopPropagation(),e(d.a.click_Icon_Item(a))}}}))(y)}).call(this,a(22))},280:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=(a(172),a(281)),m=a.n(d),f=a(2),g=a.n(f),h=a(4),p=a.n(h),v=a(119),y=a.n(v),b=function(t){function a(t){var l;return Object(n.a)(this,a),(l=Object(i.a)(this,Object(o.a)(a).call(this,t))).state={info:e.AlarmNumber,device:{},detailsList:{},TatolNum:0,listData:{}},a.this=Object(r.a)(l),l.onAlarm=l.onAlarm.bind(Object(r.a)(l)),l.Total=l.Total.bind(Object(r.a)(l)),l.onReturn=l.onReturn.bind(Object(r.a)(l)),l.onTable=l.onTable.bind(Object(r.a)(l)),l}return Object(s.a)(a,t),Object(l.a)(a,[{key:"onDevice",value:function(){this.onObject(),setTimeout((function(){}),1e3)}},{key:"onObject",value:function(){var t=this,a=[],n=[];p.a.post(e.Url+"device/category/list",{enable:!0}).then((function(l){var i=l.data.data;i&&"success"===l.data.msg?(a=i,p.a.get(e.Url+"event/info/countTodayForCategory").then((function(e){var l=e.data.data;if(l&&"success"===e.data.msg){n=l,g.a.extend(!0,a,n),t.setState({device:a});for(var i=0,o=0;o<l.length;o++)i+=parseInt(l[o].count);t.setState({TatolNum:i})}else alert(e.msg)}))):alert(l.data.msg)}))}},{key:"componentDidMount",value:function(){var t=e.WebSocketUrl,n=new WebSocket(t);n.onopen=function(e){n.send("subscribe")},n.onmessage=function(t){"subscribe success"!==t.data&&(e.AlarmNumber=e.AlarmNumber+1,g()("#Num"+JSON.parse(t.data).event_info.device_category).html(parseInt(g()("#Num"+JSON.parse(t.data).event_info.device_category).html())+1),g()("#NumList"+JSON.parse(t.data).event_info.device_category).html(parseInt(g()("#NumList"+JSON.parse(t.data).event_info.device_category).html())+1).show(),g()("#NumOne"+JSON.parse(t.data).event_info.device_category).html(parseInt(g()("#NumOne"+JSON.parse(t.data).event_info.device_category).html())+1),g()("#NumOneList"+JSON.parse(t.data).event_info.device_category).html(parseInt(g()("#NumOneList"+JSON.parse(t.data).event_info.device_category).html())+1).show(),a.this.setState({info:e.AlarmNumber,listData:t.data,TatolNum:a.this.state.TatolNum+1}),e.WebList.push(JSON.parse(t.data)))},window.receiveMessageFromIndex=function(t){if(void 0!==t)switch(t.data.switchName){case"removeBubbleBombbox":e.AlarmNumber=e.AlarmNumber-1,g()("#NumList"+t.data.category_id).html(parseInt(g()("#NumList"+t.data.category_id).html())-1),g()("#NumOneList"+t.data.category_id).html(parseInt(g()("#NumOneList"+t.data.category_id).html())-1),0===parseInt(g()("#NumList"+t.data.category_id).html())&&(g()("#NumList"+t.data.category_id).css({display:"none"}),g()("#NumOneList"+t.data.category_id).css({display:"none"}));for(var n=0;n<e.WebList.length;n++)t.data.id===e.WebList[n].event_info.id&&e.WebList.splice(n,1);a.this.setState({info:e.AlarmNumber});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1),this.onDevice()}},{key:"onAlarm",value:function(){g()(".One").toggle(),g()(".OneAlarm").toggle()}},{key:"Total",value:function(){g()(".One .AlarmContent").hide(),g()(".One .AlarmTotal").show()}},{key:"onReturn",value:function(e){1===e?(g()(".AlarmContent").show(),g()(".AlarmTotal").hide()):2===e&&(g()(".AlarmContent,.AlarmTotal").show(),g()(".AlarmList").hide(),g()(".One h1 span").html("\u4eca\u65e5\u62a5\u8b66\u7edf\u8ba1"))}},{key:"onTable",value:function(t){var a=this;g()(".One .AlarmContent,.One .AlarmTotal").hide(),g()(".One .AlarmList").show(),g()(".One h1 span").html("\u89c6\u9891\u62a5\u8b66");var n=y()().format("YYYY-MM-DD");n+=" 00:00:00",p.a.post(e.Url+"event/info/list",{device_category:t,start_time:n}).then((function(e){var t=e.data.data;t&&"success"===e.data.msg?a.setState({detailsList:t}):alert(e.data.msg)})).catch((function(){}))}},{key:"GMTToStr",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"\xa0"+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{key:"render",value:function(){var e=this,t=this.state,a=t.device,n=t.detailsList,l=t.TatolNum;return u.a.createElement(c.Fragment,null,u.a.createElement("div",{className:"AlarmButton OneAlarm",onClick:function(){return e.onAlarm()}},"\u4eca\u65e5\u62a5\u8b66 ",u.a.createElement("span",null,this.state.info)),u.a.createElement("div",{className:"AlarmShow One",style:{display:"none"}},u.a.createElement("h1",null,u.a.createElement("span",null,"\u4eca\u65e5\u62a5\u8b66\u7edf\u8ba1")),u.a.createElement("div",{className:"AlarmContent"},u.a.createElement("div",{className:"Total"},u.a.createElement("h2",null,"\u603b\u62a5\u8b66"),u.a.createElement("span",null,l,u.a.createElement("em",null,"\u6b21"))),u.a.createElement("ul",null,a.length>0&&a.map((function(t,a){return a>2?null:u.a.createElement("li",{key:a,onClick:function(){return e.onTable(t.id)}},u.a.createElement("img",{src:t.category_icon,alt:""}),u.a.createElement("span",null,t.category_name,u.a.createElement("br",null),u.a.createElement("h3",{id:"Num"+t.category_id},t.count),u.a.createElement("em",{style:{display:"none"},id:"NumList"+t.category_id},0)))})),u.a.createElement("li",{onClick:function(){return e.Total()}},u.a.createElement("img",{src:m.a,alt:""}),u.a.createElement("span",null,"\u5176\u4ed6\u62a5\u8b66")))),u.a.createElement("div",{className:"AlarmTotal"},u.a.createElement("ul",null,a.length>0&&a.map((function(t,a){return u.a.createElement("li",{id:t.id,key:a,onClick:function(){return e.onTable(t.id)}},u.a.createElement("img",{src:t.category_icon,alt:""}),u.a.createElement("span",null,t.category_name,u.a.createElement("br",null),u.a.createElement("h3",{id:"NumOne"+t.category_id},t.count),u.a.createElement("em",{style:{display:"none"},id:"NumOneList"+t.category_id},0)))}))),u.a.createElement("i",{onClick:function(){return e.onReturn(1)}})),u.a.createElement("div",{className:"AlarmList"},u.a.createElement("div",{className:"AlarmListTable"},u.a.createElement("table",null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"\u7c7b\u578b"),u.a.createElement("th",null,"\u540d\u79f0"),u.a.createElement("th",null,"\u65f6\u95f4"),u.a.createElement("th",null,"\u5904\u7406"))),u.a.createElement("tbody",null,n.length>0&&n.map((function(e,t){return u.a.createElement("tr",{key:t},u.a.createElement("td",null,e.event_type_name),u.a.createElement("td",null,e.device_name),u.a.createElement("td",null,e.start_time),u.a.createElement("td",null,e.handle?u.a.createElement("span",{className:"green"},"\u5df2\u5904\u7406"):u.a.createElement("span",{className:"red"},"\u5f85\u5904\u7406")))}))))),u.a.createElement("i",{onClick:function(){return e.onReturn(2)}})),u.a.createElement("div",{className:"But",onClick:function(){return e.onAlarm()}})),u.a.createElement("div",{className:"Search"},u.a.createElement("button",null,u.a.createElement("i",null)),u.a.createElement("input",{type:"text",defaultValue:"",placeholder:"\u8bf7\u8f93\u5165\u60a8\u8981\u641c\u7d22\u7684\u5173\u952e\u8bcd"})))}}]),a}(c.Component);t.a=b}).call(this,a(22))},281:function(e,t,a){e.exports=a.p+"static/media/moreIcon.a391e678.png"},282:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(12),s=a(0),c=a.n(s),u=(a(36),a(283)),d=a(284),m=a(295),f=a(4),g=a.n(f),h=a(289),p=a(292),v=a(293),y=a(294),b=a(59),E=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).state={success:!1,adminTitle:"",adminUser:sessionStorage.getItem("userName")},t}return Object(r.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.HQstate(),this.HQConfig()}},{key:"HQstate",value:function(){g.a.get(e.Url+"sys/config/isConfig").then((function(e){var t=e.data.data;t?console.log(t):alert(e.data.msg)}))}},{key:"HQConfig",value:function(){var t=this;g.a.get(e.Url+"sys/config").then((function(e){var a=e.data.data;a?(console.log(a),sessionStorage.setItem("adminTitle",a.sys_name),t.setState({adminTitle:a.sys_name,success:!0}),sessionStorage.setItem("Serverurl",a.data_server_uri),sessionStorage.setItem("data_type",a.data_type)):alert(e.data.msg)}))}},{key:"render",value:function(){var e=this.state,t=e.adminUser,a=e.adminTitle,n=e.success;return c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"HeaderLeft"},n?a:"",c.a.createElement("i",null)),c.a.createElement("div",{className:"HeaderContent"},c.a.createElement(u.a,null),c.a.createElement(d.a,null),c.a.createElement(m.a,null),c.a.createElement(h.a,null),c.a.createElement(p.a,null),c.a.createElement(v.a,null),c.a.createElement(y.a,null)),c.a.createElement("div",{className:"HeaderRight"},c.a.createElement("em",null),c.a.createElement("span",{className:"HeaderTime"}),c.a.createElement(b.b,{to:"/"},c.a.createElement("span",{className:"HeaderBank",title:"\u524d\u53f0\u7ba1\u7406"})),c.a.createElement("span",{className:"HeaderUser"},"\u5f53\u524d\u7528\u6237",c.a.createElement("i",null,t))))}}]),a}(s.Component);t.a=E}).call(this,a(22))},283:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=(a(264),a(4)),m=a.n(d),f=a(15),g=a(18),h=a(2),p=a.n(h),v=function(t){function a(t){var l;return Object(n.a)(this,a),(l=Object(i.a)(this,Object(o.a)(a).call(this,t))).addressChange=function(e){l.setState({mapAddress:e.target.value})},l.handleChange=function(e){l.setState({mapName:e.target.value})},l.handleIsStand=function(e){l.setState((function(e){return{isStand:!e.isStand}}))},l.handleIsLogin=function(e){l.setState((function(e){return{isLogin:!e.isLogin}}))},l.configSave=function(t,a,n,i){console.log(t,a,n,i,e.Database),m.a.post(e.Url+"sys/config/updatePro",{data_server_uri:t,data_type:a,is_stand:n,is_login:i}).then((function(e){var t=e.data.data;if(console.log(t),t){sessionStorage.setItem("Serverurl",t.data_server_uri),sessionStorage.setItem("data_type",t.data_type);document.getElementById("core_content").contentWindow.postMessage({Event:"RefreshPage()",ModName:"",parameter:{}},"*")}else alert(e.data.msg)})).catch((function(e){console.log(e)})),l.props.navClick(100)},l.state={isToggleOn:!1,mapAddress:"",mapName:"normal",isStand:!1,isLogin:!1,alarmTest:!1,device:{},deviceId:""},a.this=Object(r.a)(l),l.onConfig=l.onConfig.bind(Object(r.a)(l)),l.addressChange=l.addressChange.bind(Object(r.a)(l)),l.handleChange=l.handleChange.bind(Object(r.a)(l)),l.handleIsStand=l.handleIsStand.bind(Object(r.a)(l)),l.handleIsLogin=l.handleIsLogin.bind(Object(r.a)(l)),l.configSave=l.configSave.bind(Object(r.a)(l)),l.AlarmTest=l.AlarmTest.bind(Object(r.a)(l)),l}return Object(s.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onConfig()}},{key:"onConfig",value:function(){var t=this,a=this;m.a.get(e.Url+"sys/config").then((function(e){var n=e.data.data;n?(console.log(n),sessionStorage.setItem("adminTitle",n.sys_name),a.state={homeTitle:n.sys_name},sessionStorage.setItem("Serverurl",n.data_server_uri),sessionStorage.setItem("data_type",n.data_type),t.setState({mapAddress:n.data_server_uri,mapName:n.data_type,isStand:n.is_stand,isLogin:n.is_login})):alert(e.data.msg)})),this.setState((function(e){return{isToggleOn:!e.isToggleOn,Display:e.isToggleOn?"none":"block"}}))}},{key:"AlarmTest",value:function(){var t=this;p()(".Basic").css({display:"block"}),this.setState({alarmTest:!0}),m.a.post(e.Url+"device/category/list",{enable:!0}).then((function(e){var a=e.data.data;a?(console.log(a),t.setState({device:a,deviceId:a[0].category_name})):alert(e.data.msg)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.mapAddress,n=t.mapName,l=t.isStand,i=t.isLogin,o=t.alarmTest,r=t.device,s=t.deviceId,d=this.props,m=d.adminItem,f=d.navClick;return u.a.createElement(c.Fragment,null,u.a.createElement("li",{className:1===m?"cur":"",onClick:function(){return f(1)}},"\u4e13\u4e1a\u914d\u7f6e"),1===m?u.a.createElement("div",null,u.a.createElement("div",{className:"configShow"},u.a.createElement("div",{className:"configShowNav"},"\u4e13\u4e1a\u914d\u7f6e ",u.a.createElement("i",{onClick:function(){return f(100)}})),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("div",{className:"configShowConent_cont"},u.a.createElement("li",null,u.a.createElement("span",null,"\u5730\u56fe\u6570\u636e\u5730\u5740\uff1a"),u.a.createElement("input",{type:"text",value:a,onChange:function(t){return e.addressChange(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u9ed8\u8ba4\u5730\u56fe\uff1a"),u.a.createElement("input",{type:"radio",name:"",value:"normal",checked:"normal"===n,onChange:function(t){return e.handleChange(t)}}),u.a.createElement("label",null,"\u4e09\u7ef4\u6a21\u578b"),u.a.createElement("input",{type:"radio",name:"",value:"virtual",checked:"virtual"===n,onChange:function(t){return e.handleChange(t)}}),u.a.createElement("label",null,"\u865a\u62df\u5316"),u.a.createElement("div",{className:"dot"},"gender: ")),u.a.createElement("li",null,u.a.createElement("span",null,"\u72ec\u7acb\u8fd0\u884c\uff1a"),u.a.createElement("input",{type:"checkbox",checked:l,onChange:function(t){return e.handleIsStand(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u514d\u5bc6\u767b\u5f55\uff1a"),u.a.createElement("input",{type:"checkbox",checked:i,onChange:function(t){return e.handleIsLogin(t)}}))),u.a.createElement("div",{className:"configBut"},u.a.createElement("button",{onClick:function(){return e.configSave(a,n,l,i)}},"\u4fdd\u5b58"),u.a.createElement("button",null,"\u6a21\u578b\u68c0\u67e5"),u.a.createElement("button",{onClick:function(){return e.AlarmTest()}},"\u62a5\u8b66\u68c0\u6d4b")))),o?u.a.createElement("div",{className:"configShow Basic",style:{marginLeft:"520px"}},u.a.createElement("div",{className:"configShowNav"},"\u62a5\u8b66\u6d4b\u8bd5 ",u.a.createElement("i",{onClick:function(){return f(101)}})),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("div",{className:"configShowConent_cont DevicePic"},u.a.createElement("li",null,u.a.createElement("span",null,"\u8bbe\u5907\u7c7b\u522b\uff1a"),u.a.createElement("select",{onChange:this.selectChange,className:"AddSelect",value:s},r.map((function(e,t){return u.a.createElement("option",{key:"op"+t,index:t,value:e.category_name},e.category_name)}))))))):""):"")}}]),a}(c.PureComponent);t.a=Object(f.b)((function(e){return{adminItem:e.admin.get("adminItem")}}),(function(t){return{navClick:function(a){100===a?t(g.a.nav_click(a)):(t(g.a.nav_click(a)),m.a.get(e.Url+"sys/config").then((function(e){var t=e.data.data;t?(console.log(t),sessionStorage.setItem("adminTitle",t.sys_name),sessionStorage.setItem("Serverurl",t.data_server_uri),sessionStorage.setItem("data_type",t.data_type),v.this.setState({mapAddress:t.data_server_uri,mapName:t.data_type,isStand:t.is_stand,isLogin:t.is_login})):alert(e.data.msg)})))}}}))(v)}).call(this,a(22))},284:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=(a(264),a(4)),m=a.n(d),f=a(5),g=a(15),h=a(18),p=function(t){function a(t){var l;return Object(n.a)(this,a),(l=Object(i.a)(this,Object(o.a)(a).call(this,t))).syaName=function(e){l.setState({mapSysName:e.target.value})},l.configSave=function(t,a){m.a.post(e.Url+"sys/config/updateBase",{sys_name:t,center_location:JSON.parse(a)}).then((function(e){var t=e.data.data;t?(console.log(t),this.setState({mapSysName:t.sys_name,coordinate:t.center_location})):alert(e.data.msg)})).catch((function(e){console.log(e)})),l.props.navClick(100)},l.state={isToggleOn:!1,mapSysName:"",modelId:"",tabNav:0,coordinate:[]},a.this=Object(r.a)(l),l.syaName=l.syaName.bind(Object(r.a)(l)),l.Tab=l.Tab.bind(Object(r.a)(l)),l.configSave=l.configSave.bind(Object(r.a)(l)),l}return Object(s.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.receiveMessageFromIndex=function(t){if(void 0!==t)switch(t.data.switchName){case"getCameraView":sessionStorage.setItem("dataZB",this.JSON.stringify(t.data.cv,null,4)),sessionStorage.setItem("dataZB1",t.data.cv),console.log(sessionStorage.getItem("dataZB")),e.setState({coordinate:sessionStorage.getItem("dataZB")});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"Tab",value:function(e){switch(this.setState({tabNav:e}),e){case 0:f.a.onRetrospectiveCameraView(),this.setState({coordinate:sessionStorage.getItem("dataZB")});break;case 1:f.a.onCoordinate(),this.setState({coordinate:sessionStorage.getItem("dataZB")});break;default:return null}}},{key:"render",value:function(){var e=this,t=this.state,a=t.mapSysName,n=t.tabNav,l=t.coordinate,i=this.props,o=i.adminItem,r=i.navClick;return u.a.createElement(c.Fragment,null,u.a.createElement("li",{className:2===o?"cur":"",onClick:function(){return r(2)}},"\u57fa\u7840\u914d\u7f6e"),2===o?u.a.createElement("div",{className:"configShow Basic"},u.a.createElement("div",{className:"configShowNav"},"\u57fa\u7840\u914d\u7f6e ",u.a.createElement("i",{onClick:function(){return r(100)}})),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("div",{className:"configShowConent_cont"},u.a.createElement("li",null,u.a.createElement("span",null,"\u7cfb\u7edf\u540d\u79f0\uff1a"),u.a.createElement("input",{type:"text",value:a,onChange:function(t){return e.syaName(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u521d\u59cb\u4f4d\u7f6e\uff1a"),u.a.createElement("span",{className:"newNav"},u.a.createElement("li",{className:0===n?"cur":"",onClick:function(){return e.Tab(0)}},"\u5750\u6807\u5b9a\u4f4d"),u.a.createElement("li",{className:1===n?"cur":"",onClick:function(){return e.Tab(1)}},"\u5f53\u524d\u4f4d\u7f6e"),u.a.createElement("div",{className:"liCont"},l)))),u.a.createElement("div",{className:"configBut"},u.a.createElement("button",{onClick:function(){return e.configSave(a,l)}},"\u4fdd\u5b58")))):"")}}]),a}(c.PureComponent);t.a=Object(g.b)((function(e){return{adminItem:e.admin.get("adminItem")}}),(function(t){return{navClick:function(a){t(h.a.nav_click(a)),m.a.get(e.Url+"sys/config").then((function(e){var t=e.data.data;t?(console.log(t),sessionStorage.setItem("mapSysName",t.sys_name),sessionStorage.setItem("dataZB",JSON.stringify(t.center_location)),p.this.setState({mapSysName:sessionStorage.getItem("mapSysName"),coordinate:JSON.stringify(t.center_location)})):alert(e.data.msg)}))}}}))(p)}).call(this,a(22))},285:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=a(15),m=a(18),f=a(5),g=a(4),h=a.n(g),p=a(2),v=a.n(p),y=function(t){function a(e){var t;return Object(n.a)(this,a),t=Object(i.a)(this,Object(o.a)(a).call(this,e)),a.this=Object(r.a)(t),t.state={navItemShow:!1,Nav:!0,navItem:0,X:"",Y:"",Z:"",labelname:"",labelid:"",Floor:JSON.parse(sessionStorage.getItem("Floor")),CameraView:"",CameraViewState:!1,ShowPublic:!1,OneHtml:!0,TwoHtml:!1},t.CameraView=t.CameraView.bind(Object(r.a)(t)),t.AssignedLabelID=t.AssignedLabelID.bind(Object(r.a)(t)),t.NavClick=t.NavClick.bind(Object(r.a)(t)),t.SaveNav=t.SaveNav.bind(Object(r.a)(t)),t}return Object(s.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log(a.this.Floor),window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(console.log("\u6211\u662freact,\u6211\u63a5\u53d7\u5230\u4e86\u6765\u81eaiframe\u7684\u6a21\u578bID\uff1a",e.data),e.data.switchName){case"GeoaddlabelV2":sessionStorage.setItem("labelData",this.JSON.stringify(e.data));var t=JSON.parse(sessionStorage.getItem("labelData")).style.position;a.this.setState({X:t.x,Y:t.y,Z:t.z});break;case"getCameraView":a.this.setState({CameraView:this.JSON.stringify(e.data.cv)}),console.log("\u6570\u636e\u5df2\u5237\u65b0",a.this.state.CameraView);break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1),this.initData()}},{key:"initData",value:function(){var e=a.this.state.Floor;if(null==e[0].FloorItems.center_position)this.setState({labelname:e[0].FloorItems.build_name,labelid:e[0].FloorItems.id});else{var t=JSON.stringify({x:e[0].FloorItems.center_position.x,y:e[0].FloorItems.center_position.y,z:e[0].FloorItems.center_position.z,h:e[0].FloorItems.center_position.heading,p:e[0].FloorItems.center_position.pitch,r:e[0].FloorItems.center_position.roll});console.log(t),this.setState({X:e[0].FloorItems.label_position.x,Y:e[0].FloorItems.label_position.y,Z:e[0].FloorItems.label_position.z,labelname:e[0].FloorItems.build_name,labelid:e[0].FloorItems.id,CameraView:JSON.stringify({x:e[0].FloorItems.center_position.x,y:e[0].FloorItems.center_position.y,z:e[0].FloorItems.center_position.z,h:e[0].FloorItems.center_position.heading,p:e[0].FloorItems.center_position.pitch,r:e[0].FloorItems.center_position.roll})})}}},{key:"GeoaddlabelV2",value:function(){console.log(this.state.labelid),f.a.GeoaddlabelV2(this.state.labelname,this.state.labelid)}},{key:"AssignedLabelID",value:function(e,t){console.log(t);var a=t.FloorItems.center_position;null===a?(console.log(t.FloorItems.id),this.setState({labelid:t.FloorItems.id,labelname:t.FloorItems.build_name,X:"",Y:"",Z:"",CameraView:"",OneHtml:!0,TwoHtml:!1})):this.setState({labelid:t.FloorItems.id,labelname:t.FloorItems.build_name,X:t.FloorItems.label_position.x,Y:t.FloorItems.label_position.y,Z:t.FloorItems.label_position.z,CameraView:JSON.stringify({x:a.x,y:a.y,z:a.z,h:a.heading,p:a.pitch,r:a.roll}),OneHtml:!0,TwoHtml:!1}),e.stopPropagation();var n=v()(e.target).children();n.css("display","none"===n.css("display")?"block":"none")}},{key:"RefreshLabel",value:function(){var e=this;setTimeout((function(){f.a.ModifyLabel({id:e.state.labelid,labeltxt:e.state.labelname,x:Number(e.state.X),y:Number(e.state.Y),z:Number(e.state.Z)})}),0)}},{key:"Push",value:function(){var t=[];h.a.get(e.Url+"map/build/list",{}).then((function(n){var l=n.data.data;if(l)for(var i=function(n){h.a.post(e.Url+"map/floor/list",{build_id:l[n].id}).then((function(e){var i=e.data.data;if(i){if(t.push({FloorItems:l[n],Floorlists:i}),n===l.length-1){var o=JSON.stringify(t);console.log(o),sessionStorage.setItem("Floor",o),a.this.setState({Floor:t})}}else alert(e.data.msg)}))},o=0;o<l.length;o++)i(o);else alert(n.data.msg)}))}},{key:"SubmitBuildingInformation",value:function(){var t=this;if(console.log(this.state.CameraView),this.state.CameraView)if(""===this.state.X||""===this.state.labelid)alert("\u8bf7\u5148\u8bbe\u7f6e\u6807\u6ce8\u4f4d\u7f6e\uff01");else{var a=JSON.parse(this.state.CameraView),n={id:this.state.labelid,build_name:this.state.labelname,center_position:{y:a.y,x:a.x,z:a.z,heading:a.h,pitch:a.p,roll:a.r},label_position:{x:Number(this.state.X),y:Number(this.state.Y),z:Number(this.state.Z),heading:0,itch:0,roll:0},remark:1};h.a.post(e.Url+"map/build/update",n).then((function(e){e.data.data?(alert("\u4fdd\u5b58\u6210\u529f"),t.Push()):alert(e.data.msg)})),console.log(n)}else alert("\u8bf7\u5148\u8bbe\u7f6e\u5750\u6807\u4f4d\u7f6e\uff01")}},{key:"changeX",value:function(e){this.setState({X:e.target.value}),this.RefreshLabel(),console.log(e.target.value)}},{key:"changeY",value:function(e){this.setState({Y:e.target.value}),this.RefreshLabel(),console.log(e.target.value)}},{key:"changeZ",value:function(e){this.setState({Z:e.target.value}),this.RefreshLabel(),console.log(e.target.value)}},{key:"Modifylabelname",value:function(e){this.setState({labelname:e.target.value}),this.RefreshLabel(),console.log(e.target.value)}},{key:"CameraView",value:function(){var e=JSON.parse(a.this.state.CameraView);if(null===e)alert("\u8bf7\u5148\u8fdb\u884c\u5b9a\u4f4d\uff01");else{console.log(e);var t={Event:"",ModName:"RetrospectiveCameraView",parameter:{x:e.x,y:e.y,z:e.z,h:e.h,p:e.p,r:e.r}};document.getElementById("core_content").contentWindow.postMessage(t,"*")}}},{key:"NavClick",value:function(e,t){e.stopPropagation();var a=t.center_position;console.log(t),null===a?this.setState({labelname:t.floor_name,CameraView:JSON.stringify(a),OneHtml:!1,TwoHtml:!0}):this.setState({labelname:t.floor_name,CameraView:JSON.stringify({x:a.x,y:a.y,z:a.z,h:a.heading,p:a.pitch,r:a.roll}),OneHtml:!1,TwoHtml:!0}),sessionStorage.setItem("navId",t.id)}},{key:"SaveNav",value:function(){var t=this,n=sessionStorage.getItem("navId"),l=JSON.parse(a.this.state.CameraView);if(null===l)alert("\u8bf7\u5148\u8fdb\u884c\u5b9a\u4f4d!");else{var i={id:n,floor_name:a.this.state.labelname,center_position:{y:l.y,x:l.x,z:l.z,heading:l.h,pitch:l.p,roll:l.r},is_underground:!0,rise_height:10,remark:"1F"};h.a.post(e.Url+"map/floor/update",i).then((function(e){e.data.data?(alert("\u4fdd\u5b58\u6210\u529f"),t.Push()):alert(e.data.msg)}))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.Floor,n=t.X,l=t.Y,i=t.Z,o=t.labelname,r=t.CameraView,s=t.OneHtml,d=t.TwoHtml,m=this.props.navClick;return u.a.createElement(c.Fragment,null,u.a.createElement("div",{className:"configShow",style:{width:"653px",height:"590px"}},u.a.createElement("div",{className:"configShowNav"},"\u5efa\u7b51\u914d\u7f6e ",u.a.createElement("i",{onClick:function(){return m(100)}})),u.a.createElement("div",{className:"NavigationButtonBorder"},u.a.createElement("div",{className:"configBut",style:{marginTop:"0px"}},u.a.createElement("button",{style:{position:"absolute",marginLeft:"20px"}},"\u6807\u6ce8\u914d\u7f6e"),u.a.createElement("button",{style:{marginRight:"380px"}},"\u64cd\u4f5c\u914d\u7f6e"))),u.a.createElement("div",{className:"DataConfigTreeDiv"},u.a.createElement("ul",null,a.length>0&&a.map((function(t,a){return u.a.createElement("li",{key:a,onClick:function(a){return e.AssignedLabelID(a,t)}},t.FloorItems.build_name,u.a.createElement("ul",{className:"navItemList"},t.Floorlists.length>0&&t.Floorlists.map((function(t,a){return u.a.createElement("li",{key:a,onClick:function(a){return e.NavClick(a,t)}},t.floor_name)}))))})))),s?u.a.createElement("div",{className:"DataOne"},u.a.createElement("h1",null,"\u5efa\u7b51"),u.a.createElement("li",null,u.a.createElement("span",null,"\u5efa\u7b51\u540d\u79f0\uff1a"),u.a.createElement("input",{type:"text",value:o,onChange:function(t){return e.Modifylabelname(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u5efa\u7b51\u6807\u6ce8\uff1a"),u.a.createElement("button",{onClick:function(){return e.GeoaddlabelV2()}},"\u8bbe\u7f6e\u6807\u6ce8")),u.a.createElement("li",null,u.a.createElement("span",null,"\u6807\u6ce8\u4f4d\u7f6e\uff1a"),u.a.createElement("div",{className:"DataRight"},u.a.createElement("span",null,u.a.createElement("label",null,"X\uff1a"),u.a.createElement("input",{type:"text",defaultValue:n,onChange:function(t){return e.changeX(t)}})),u.a.createElement("span",null,u.a.createElement("label",null,"Y\uff1a"),u.a.createElement("input",{type:"text",defaultValue:l,onChange:function(t){return e.changeY(t)}})),u.a.createElement("span",null,u.a.createElement("label",null,"Z\uff1a"),u.a.createElement("input",{type:"text",defaultValue:i,onChange:function(t){return e.changeZ(t)}})))),u.a.createElement("li",null,u.a.createElement("span",null,"\u5b9a\u4f4d\u5750\u6807\uff1a"),u.a.createElement("span",{className:"newNav"},u.a.createElement("li",{onClick:function(){return e.CameraView()}},"\u5750\u6807\u5b9a\u4f4d"),u.a.createElement("li",{className:"next",onClick:function(){return f.a.onCoordinate()}},"\u5f53\u524d\u4f4d\u7f6e"),u.a.createElement("div",{className:"liCont"},r))),u.a.createElement("div",{className:"configBut",onClick:function(){return e.SubmitBuildingInformation()}},u.a.createElement("button",null,"\u4fdd\u5b58"))):"",d?u.a.createElement("div",{className:"DataOne"},u.a.createElement("h1",null,"\u697c\u5c42"),u.a.createElement("li",null,u.a.createElement("span",null,"\u697c\u5c42\u540d\u79f0\uff1a"),u.a.createElement("input",{type:"text",defaultValue:"",value:o,onChange:function(t){return e.Modifylabelname(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u5b9a\u4f4d\u5750\u6807\uff1a"),u.a.createElement("span",{className:"newNav"},u.a.createElement("li",{onClick:function(){return e.CameraView()}},"\u5750\u6807\u5b9a\u4f4d"),u.a.createElement("li",{className:"next",onClick:function(){return f.a.onCoordinate()}},"\u5f53\u524d\u4f4d\u7f6e"),u.a.createElement("div",{className:"liCont"},r))),u.a.createElement("div",{className:"configBut",onClick:function(){return e.SaveNav()}},u.a.createElement("button",null,"\u4fdd\u5b58"))):""))}}]),a}(c.PureComponent);t.a=Object(d.b)(null,(function(e){return{navClick:function(t,a){e(m.a.nav_click(t,a))}}}))(y)}).call(this,a(22))},286:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=a(15),m=a(18),f=a(4),g=a.n(f),h=a(5),p=a(2),v=a.n(p),y=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).state={isLoad:!0,mapList:{},mapName:"",mapTagName:"",fontSize:"1",fontColor:"#ff0000",borderWitch:"1",borderColor:"#ffffff",centerPosition:{},labelPosition:{},labelStyle:{},labelId:"",oneMap:!0,twoMap:!1},a.this=Object(r.a)(t),t.Close=t.Close.bind(Object(r.a)(t)),t.setTag=t.setTag.bind(Object(r.a)(t)),t.saveTag=t.saveTag.bind(Object(r.a)(t)),t.AddList=t.AddList.bind(Object(r.a)(t)),t.changeTag=t.changeTag.bind(Object(r.a)(t)),t.ChangeList=t.ChangeList.bind(Object(r.a)(t)),t.onContextMenu=t.onContextMenu.bind(Object(r.a)(t)),t.DeletedTag=t.DeletedTag.bind(Object(r.a)(t)),t}return Object(s.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onLoad(),document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"GeoaddlabelV3":console.log(e.data);var t=e.data.parameter;a.this.setState({labelId:t.label_id,labelStyle:t.label_style,labelPosition:t.label_position,mapName:t.label_name});break;case"getCameraView":var n=e.data.cv;a.this.setState({centerPosition:{y:n.y,x:n.x,z:n.z,heading:n.h,pitch:n.p,roll:n.r}});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"onLoad",value:function(){var t=this;g.a.get(e.Url+"map/label/list").then((function(e){var a=e.data.data;a?t.setState({mapList:a}):alert(e.msg)}))}},{key:"Close",value:function(){this.setState({isLoad:!1})}},{key:"changeName",value:function(e){this.setState({mapName:e.target.value}),a.this.onChangeData()}},{key:"changFont",value:function(e){this.setState({fontSize:e.target.value}),a.this.onChangeData()}},{key:"ChangeColor",value:function(e){a.this.setState({fontColor:e.target.value}),a.this.onChangeData()}},{key:"changeBorder",value:function(e){this.setState({borderWitch:e.target.value}),a.this.onChangeData()}},{key:"ChangeBorderColor",value:function(e){a.this.setState({borderColor:e.target.value}),a.this.onChangeData()}},{key:"setTag",value:function(){var e=this.state,t=e.labelId,a=e.mapName,n=e.fontSize,l=e.fontColor,i=e.borderWitch,o=e.borderColor;if(a){var r={id:t,label_name:a,label_style:{fontSize:n,fontColor:l,borderWitch:i,borderColor:o}};console.log(r),h.a.GeoaddlabelV3(r)}else alert("\u8bf7\u5148\u8f93\u5165\u6807\u6ce8\u540d\u79f0\uff01")}},{key:"saveTag",value:function(){var t=a.this.state;t.mapName?"{}"===JSON.stringify(t.labelPosition)?alert("\u8bf7\u5148\u8f93\u5165\u8bbe\u7f6e\u6807\u6ce8\uff01"):(h.a.onCoordinate(),setTimeout((function(){var t=a.this.state,n={label_name:t.mapName,center_position:t.centerPosition,label_position:t.labelPosition,label_style:t.labelStyle,remark:"1"};console.log("data",t.centerPosition),"{}"===JSON.stringify(t.centerPosition)?alert("Cesium\u5185\u90e8\u51fa\u9519\u4e86\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u6216\u66f4\u6362\u6d4f\u89c8\u5668\uff01"):g.a.post(e.Url+"map/label/add",n).then((function(e){var t=e.data.data;t&&"success"===e.data.msg?(console.log(e,t),alert("\u4fdd\u5b58\u6210\u529f\uff01"),h.a.ResetLabel(),a.this.onLoad(),a.this.setState({oneMap:!1}),a.this.setEmty()):alert(e.data.msg)}))}),10)):alert("\u8bf7\u5148\u8f93\u5165\u6807\u6ce8\u540d\u79f0\uff01")}},{key:"setEmty",value:function(){a.this.setState({oneMap:!0,mapName:"",centerPosition:{},labelPosition:{},labelStyle:{},fontSize:"1",fontColor:"#ff0000",borderWitch:"1",borderColor:"#ffffff",labelId:""})}},{key:"AddList",value:function(){this.setState({oneMap:!0,twoMap:!1}),a.this.setEmty()}},{key:"ChangeList",value:function(t){this.setState({oneMap:!1,twoMap:!0}),v()("#Right"+t).css({color:"#54b2df",fontWeight:"bold"}),v()("#Right"+t).siblings().css({color:"#fff",fontWeight:"100"}),v()("#Right"+t).find(".RightDelete").css({display:"none"}),v()("#Right"+t).siblings().find(".RightDelete").css({display:"none"}),g.a.post(e.Url+"map/label",{id:t}).then((function(e){var t=e.data.data;t?(console.log(t,t.label_style.fontSize),a.this.setState({mapName:t.label_name,mapTagName:t.label_name,fontSize:t.label_style.fontSize,fontColor:t.label_style.fontColor,borderWitch:t.label_style.borderWitch,borderColor:t.label_style.borderColor,centerPosition:t.center_position,labelPosition:t.label_position,labelId:t.id,labelStyle:{borderColor:t.label_style.borderColor,borderWitch:t.label_style.borderWitch,fontColor:t.label_style.fontColor,fontSize:t.label_style.fontSize}})):alert(e.msg)}))}},{key:"changeTag",value:function(){var t=a.this.state;t.mapName?"{}"===JSON.stringify(t.labelPosition)?alert("\u8bf7\u5148\u8f93\u5165\u8bbe\u7f6e\u6807\u6ce8\uff01"):(h.a.onCoordinate(),setTimeout((function(){var t=a.this.state,n={id:t.labelId,label_name:t.mapName,center_position:t.centerPosition,label_position:t.labelPosition,label_style:{fontSize:t.fontSize,fontColor:t.fontColor,borderWitch:t.borderWitch,borderColor:t.borderColor},remark:"1"};console.log(n,t.centerPosition),"{}"===JSON.stringify(t.centerPosition)?alert("Cesium\u5185\u90e8\u51fa\u9519\u4e86\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u6216\u66f4\u6362\u6d4f\u89c8\u5668\uff01"):g.a.post(e.Url+"map/label/update",n).then((function(e){var t=e.data.data;t&&"success"===e.data.msg?(console.log(e,t),alert("\u4fee\u6539\u6210\u529f\uff01"),a.this.onLoad()):alert(e.data.msg)}))}),10)):alert("\u8bf7\u5148\u8f93\u5165\u6807\u6ce8\u540d\u79f0\uff01")}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),v()("#Right"+t).find(".RightDelete").css({display:"block"}),v()("#Right"+t).siblings().find(".RightDelete").css({display:"none"}),v()("#Right"+t).css({color:"#54b2df",fontWeight:"bold"}),v()("#Right"+t).siblings().css({color:"#fff",fontWeight:"100"})}},{key:"onChangeData",value:function(){setTimeout((function(){var e=a.this.state,t={id:e.labelId,labeltxt:e.mapName,label_style:{fontSize:e.fontSize,fontColor:e.fontColor,borderWitch:e.borderWitch,borderColor:e.borderColor}};h.a.ModifyLabel(t)}),10)}},{key:"DeletedTag",value:function(t,n){var l=this;t.stopPropagation(),window.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u6807\u6ce8\u561b\uff1f")&&g.a.post(e.Url+"map/label/delete",{id:n}).then((function(e){var t=e.data.data;t?(console.log(t),l.onLoad(),v()("#Right"+n).find(".RightDelete").css({display:"none"}),h.a.ResetLabel(),alert("\u5220\u9664\u6210\u529f\uff01"),a.this.AddList()):alert(e.data.msg)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoad,n=t.mapList,l=t.oneMap,i=t.twoMap,o=t.mapName,r=t.fontSize,s=t.fontColor,d=t.borderWitch,m=t.borderColor,f=t.mapTagName;return u.a.createElement(c.Fragment,null,a?u.a.createElement("div",{className:"configShow Map",style:{width:"460px",height:"400px"}},u.a.createElement("div",{className:"configShowNav"},"\u5730\u56fe\u6807\u6ce8 ",u.a.createElement("i",{onClick:function(){return e.Close()}})),u.a.createElement("div",{className:"configData"},u.a.createElement("div",{className:"configDataLeft"},u.a.createElement("h1",null,u.a.createElement("button",{onClick:function(){return e.AddList()}},"\u6dfb\u52a0")),u.a.createElement("ul",null,n.length>0&&n.map((function(t,a){return u.a.createElement("li",{key:a,id:"Right"+t.id,onClick:function(){return e.ChangeList(t.id)},onContextMenu:function(a){return e.onContextMenu(a,t.id)}},t.label_name,u.a.createElement("div",{className:"RightDelete",style:{display:"none"}},u.a.createElement("button",{onClick:function(a){return e.DeletedTag(a,t.id)}},"\u5220\u9664")))})))),l?u.a.createElement("div",{className:"configDataRight"},u.a.createElement("h1",null,"\u8bbe\u7f6e\u5730\u56fe\u6807\u6ce8"),u.a.createElement("li",null,u.a.createElement("span",null,"\u6807\u6ce8\u540d\u79f0\uff1a"),u.a.createElement("input",{type:"text",defaultValue:o,onChange:function(t){return e.changeName(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u5b57\u4f53\u5927\u5c0f\uff1a"),u.a.createElement("input",{type:"text",defaultValue:r,onChange:function(t){return e.changFont(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u5b57\u4f53\u989c\u8272\uff1a"),u.a.createElement("select",{className:"AddSelect",onChange:this.ChangeColor,defaultValue:s},u.a.createElement("option",{value:"#ff0000"},"\u7ea2"),u.a.createElement("option",{value:"#ffd700"},"\u9ec4"),u.a.createElement("option",{value:"#436eee"},"\u84dd"),u.a.createElement("option",{value:"#228b22"},"\u7eff"),u.a.createElement("option",{value:"#ffffff"},"\u767d"))),u.a.createElement("li",null,u.a.createElement("span",null,"\u8fb9\u6846\u5bbd\u5ea6\uff1a"),u.a.createElement("input",{type:"text",defaultValue:d,onChange:function(t){return e.changeBorder(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),u.a.createElement("select",{className:"AddSelect",onChange:this.ChangeBorderColor,value:m},u.a.createElement("option",{value:"#ffffff"},"\u767d"),u.a.createElement("option",{value:"#ff0000"},"\u7ea2"),u.a.createElement("option",{value:"#ffd700"},"\u9ec4"),u.a.createElement("option",{value:"#436eee"},"\u84dd"),u.a.createElement("option",{value:"#228b22"},"\u7eff"))),u.a.createElement("div",{className:"configBut"},u.a.createElement("button",{onClick:function(){return e.saveTag()}},"\u4fdd\u5b58"),u.a.createElement("button",{onClick:function(){return e.setTag()}},"\u8bbe\u7f6e\u6807\u6ce8"))):"",i?u.a.createElement("div",{className:"configDataRight"},u.a.createElement("h1",null,"\u4fee\u6539",f,"\u6807\u6ce8"),u.a.createElement("li",null,u.a.createElement("span",null,"\u6807\u6ce8\u540d\u79f0\uff1a"),u.a.createElement("input",{type:"text",value:o,onChange:function(t){return e.changeName(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u5b57\u4f53\u5927\u5c0f\uff1a"),u.a.createElement("input",{type:"text",value:r,onChange:function(t){return e.changFont(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u5b57\u4f53\u989c\u8272\uff1a"),u.a.createElement("select",{className:"AddSelect",onChange:this.ChangeColor,value:s},u.a.createElement("option",{value:"#ff0000"},"\u7ea2"),u.a.createElement("option",{value:"#ffd700"},"\u9ec4"),u.a.createElement("option",{value:"#436eee"},"\u84dd"),u.a.createElement("option",{value:"#228b22"},"\u7eff"),u.a.createElement("option",{value:"#ffffff"},"\u767d"))),u.a.createElement("li",null,u.a.createElement("span",null,"\u8fb9\u6846\u5bbd\u5ea6\uff1a"),u.a.createElement("input",{type:"text",value:d,onChange:function(t){return e.changeBorder(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),u.a.createElement("select",{className:"AddSelect",onChange:this.ChangeBorderColor,value:m},u.a.createElement("option",{value:"#ffffff"},"\u767d"),u.a.createElement("option",{value:"#ff0000"},"\u7ea2"),u.a.createElement("option",{value:"#ffd700"},"\u9ec4"),u.a.createElement("option",{value:"#436eee"},"\u84dd"),u.a.createElement("option",{value:"#228b22"},"\u7eff"))),u.a.createElement("div",{className:"configBut"},u.a.createElement("button",{onClick:function(){return e.changeTag()}},"\u4fee\u6539\u4fdd\u5b58"),u.a.createElement("button",{onClick:function(){return e.setTag()}},"\u91cd\u7f6e\u6807\u6ce8"))):"")):"")}}]),a}(c.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(m.a.nav_click(t,a))}}}))(y)}).call(this,a(22))},287:function(e,t,a){"use strict";(function(e){var n=a(82),l=a.n(n),i=a(121),o=a(8),r=a(9),s=a(11),c=a(10),u=a(3),d=a(12),m=a(0),f=a.n(m),g=a(15),h=a(18),p=a(20),v=a.n(p),y=a(5),b=a(2),E=a.n(b),C=a(4),N=a.n(C),k=function(t){function a(e){var t;return Object(o.a)(this,a),(t=Object(s.a)(this,Object(c.a)(a).call(this,e))).handlePhoto=function(){var e=Object(i.a)(l.a.mark((function e(a,n){var i,o,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=new FileReader).readAsDataURL(a.target.files[0]),r=Object(u.a)(t),o.onload=function(e){if(i=e.target.result,1===n)console.log(1),r.setState({Pic:i});else if(2===n){console.log(2),r.setState({twoPic:i});var t={id:r.state.labelId,image:r.state.twoPic};console.log(t),y.a.Modifybillboard(t)}};case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.state={pid:"",parensId:"",isLoad:!0,oneLayer:!0,twoLayer:!1,oneChange:!1,oneId:"",layerList:{},groupName:"",twoName:"",modeASelect:"label",Pic:v.a,twoPic:v.a,labelId:"",options:{},ChangeSave:!1,label_style:{isLining:!1,labelName:"",fontColor:"#ff0000",fontSize:"1",borderColor:"#ffffff",borderWitch:"1"},Polyline_style:{PolylineWitch:"1",PolylineColor:"#ff0000",borderWitchPolyline:"1",borderColor:"#ffffff",borderTransparencyPolyline:"50"},Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"50",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"50"}},a.this=Object(u.a)(t),t.Close=t.Close.bind(Object(u.a)(t)),t.oneClick=t.oneClick.bind(Object(u.a)(t)),t.twoClick=t.twoClick.bind(Object(u.a)(t)),t.fileInputEl=f.a.createRef(),t.saveTag=t.saveTag.bind(Object(u.a)(t)),t.saveTwoTag=t.saveTwoTag.bind(Object(u.a)(t)),t.changeSaveTwoTag=t.changeSaveTwoTag.bind(Object(u.a)(t)),t.changeSaveTag=t.changeSaveTag.bind(Object(u.a)(t)),t.onContextMenu=t.onContextMenu.bind(Object(u.a)(t)),t.onContextMenu1=t.onContextMenu1.bind(Object(u.a)(t)),t.deleteOne=t.deleteOne.bind(Object(u.a)(t)),t.deleteTwo=t.deleteTwo.bind(Object(u.a)(t)),t.setTag=t.setTag.bind(Object(u.a)(t)),t}return Object(d.a)(a,t),Object(r.a)(a,[{key:"onChangeData",value:function(){setTimeout((function(){var e=a.this.state,t={id:e.labelId,labeltxt:e.label_style.labelName,label_style:e.label_style};y.a.ModifyLabel(t)}),10)}},{key:"setTag",value:function(e){var t=this.state,n=t.labelId,l=t.twoName,i=t.label_style,o=t.twoPic,r=t.Polyline_style,s=t.Polygon_style;if(i.isLining||(a.this.state.label_style.borderWitch=0,a.this.state.label_style.borderColor="#ffffff"),l){var c={};switch(e){case"label":i.labelName?(c={id:n,label_name:i.labelName,label_style:i},console.log(c),y.a.GeoaddlabelV3(c)):alert("\u6807\u6ce8\u6587\u672c\u4e0d\u80fd\u4e3a\u7a7a\uff01");break;case"polygon":c={id:n,Polygon_style:s},console.log(c),y.a.drawPolygon(c);break;case"polyline":c={id:n,Polyline_style:r},console.log(c),y.a.drawPolyline(c);break;case"billboard":o===v.a?alert("\u8bf7\u9009\u62e9\u56fe\u7247\uff01"):(c={id:n,image:o},console.log(c),y.a.AddPictureLabel(c))}}else alert("\u56fe\u5c42\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff01")}},{key:"componentDidMount",value:function(){this.onLayer(),document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"GeoaddlabelV3":console.log(e.data);var t=e.data.parameter;a.this.setState({options:t,pid:t.label_id});break;case"AddPictureLabel":console.log(e.data);var n=e.data.parameter;a.this.setState({options:n,twoPic:n.style.image,pid:e.data.id});break;case"drawPolyline":case"drawPolygon":console.log(e.data),a.this.setState({options:e.data.parameter,pid:e.data.id});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"onLayer",value:function(){var t=[];N.a.get(e.Url+"map/group/list",{}).then((function(n){var l=n.data.data;if(l&&"success"===n.data.msg)for(var i=function(n){N.a.post(e.Url+"map/layer/list",{group_id:l[n].id}).then((function(e){var i=e.data.data;i&&"success"===e.data.msg?(t.push({LayerItems:l[n],LayerLists:i}),n===l.length-1&&setTimeout((function(){a.this.setState({layerList:t})}),100)):alert(e.msg)}))},o=0;o<l.length;o++)i(o);else alert(n.msg)}))}},{key:"Close",value:function(){this.setState({isLoad:!1})}},{key:"oneClick",value:function(e,t){y.a.ClearHandler(),a.this.setState({oneLayer:!0,twoLayer:!1}),1===e?(a.this.setState({groupName:"",Pic:v.a,oneChange:!1,oneId:""}),E()(".layer").find("span").css({color:"#fff"}),E()(".layer_t").find("span").css({color:"#fff"})):2===e&&(console.log(t),y.a.ClearCustomView(a.this.state.parensId),a.this.setState({oneChange:!0,groupName:t.LayerItems.group_name,Pic:t.LayerItems.group_icon,oneId:t.LayerItems.id,parensId:t.LayerItems.id}),E()("#layer"+t.LayerItems.id).find("span").css({color:"#54b2df"}),E()("#layer"+t.LayerItems.id).find("ul").css("display","block"),E()("#layer"+t.LayerItems.id).siblings().find("span").css({color:"#fff"}),E()("#layer"+t.LayerItems.id).siblings().find("ul").css("display","none"),E()(".layer_t").find("span").css({color:"#fff"}),E()(".layer").find(".Alert_tk").css("display","none"))}},{key:"emptyOne",value:function(){this.setState({groupName:"",Pic:v.a})}},{key:"saveTag",value:function(){var t=this,a=this.state,n=a.groupName,l=a.Pic;n?l===v.a?alert("\u8bf7\u9009\u62e9\u56fe\u7247"):N.a.post(e.Url+"map/group/add",{group_name:n,group_icon:l,remark:""}).then((function(e){e.data.data?(alert("\u6dfb\u52a0\u6210\u529f\uff01"),t.onLayer()):alert(e.data.msg)})):alert("\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0\uff01")}},{key:"changeSaveTag",value:function(){var t=this,a=this.state,n=a.groupName,l=a.Pic,i=a.oneId;n?l===v.a?alert("\u8bf7\u9009\u62e9\u56fe\u7247"):N.a.post(e.Url+"map/group/update",{id:i,group_name:n,group_icon:l,remark:""}).then((function(e){e.data.data?(alert("\u4fee\u6539\u6210\u529f\uff01"),t.onLayer()):alert(e.data.msg)})):alert("\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0\uff01")}},{key:"deleteOne",value:function(t,n){t.stopPropagation(),window.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u56fe\u5c42\u561b\uff1f")&&N.a.post(e.Url+"map/group/delete",{id:n}).then((function(e){e.data.data&&"success"===e.data.msg?(alert("\u5220\u9664\u6210\u529f\uff01"),a.this.onLayer(),E()(".layer").find(".Alert_tk").css("display","none")):alert(e.msg)}))}},{key:"deleteTwo",value:function(t,n){t.stopPropagation(),window.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u56fe\u5c42\u561b\uff1f")&&N.a.post(e.Url+"map/layer/delete",{id:n}).then((function(e){if(e.data.data&&"success"===e.data.msg){alert("\u5220\u9664\u6210\u529f\uff01"),a.this.onLayer(),a.this.state.oneLayer||a.this.setState({oneLayer:!0,twoLayer:!1,groupName:"",Pic:v.a,oneChange:!1,oneId:""});var t={id:n};y.a.Emptyentities(t),E()(".layer").find(".Alert_tk").css("display","none")}else alert(e.msg)}))}},{key:"twoClick",value:function(e,t,n){if(e.stopPropagation(),a.this.setState({oneLayer:!1,twoLayer:!0}),E()("#layer_t"+t.id).parents().find("span").css({color:"#fff"}),E()("#layer_t"+t.id).find("span").css({color:"#54b2df"}),E()("#layer_t"+t.id).siblings().find("span").css({color:"#fff"}),E()(".layer").find(".Alert_tk").css("display","none"),y.a.ClearHandler(),1===n)sessionStorage.setItem("numId",t.LayerItems.id),a.this.setState({twoName:"",modeASelect:"label",labelId:"",ChangeSave:!1,label_style:{isLining:!1,labelName:"",fontColor:"#ff0000",fontSize:"1",borderColor:"#ffffff",borderWitch:"1"},Polyline_style:{PolylineWitch:"1",PolylineColor:"#ff0000",borderWitchPolyline:"1",borderColor:"#ffffff",borderTransparencyPolyline:"50"},Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"50",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"50"},twoPic:v.a});else if(2===n){sessionStorage.setItem("numId",t.group_id);var l={id:a.this.state.pid};console.log(l,t),y.a.Emptyentities(l),a.this.setState({twoName:t.layer_name,modeASelect:t.layer_type,labelId:t.id,ChangeSave:!0,options:t.options,pid:t.id});var i={id:t.group_id,pid:t.id};console.log(i),"label"===t.layer_type?a.this.setState({label_style:t.options.label_style}):"billboard"===t.layer_type?a.this.setState({twoPic:t.options.style.image}):"polyline"===t.layer_type?a.this.setState({Polyline_style:t.options.style}):"polygon"===t.layer_type&&a.this.setState({Polygon_style:t.options.style}),y.a.ClickDisplayLayer(i)}}},{key:"ChangeSelect",value:function(e){e.preventDefault(),a.this.setState({modeASelect:e.target.value,options:{},label_style:{isLining:!1,labelName:"",fontColor:"#ff0000",fontSize:"1",borderColor:"#ffffff",borderWitch:"1"},Polyline_style:{PolylineWitch:"1",PolylineColor:"#ff0000",borderWitchPolyline:"1",borderColor:"#ffffff",borderTransparencyPolyline:"50"},Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"50",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"50"},twoPic:v.a});var t={id:a.this.state.pid};console.log(t),y.a.Emptyentities(t)}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),E()("#layer"+t).find("span").css({color:"#54b2df"}),E()("#layer"+t).siblings().find("span").css({color:"#fff"}),E()(".layer_t").find("span").css({color:"#fff"}),E()(".layer").find(".Alert_tk").css("display","none"),E()("#layer"+t).find("#Alert"+t).css("display","block")}},{key:"onContextMenu1",value:function(e,t){e.stopPropagation(),E()(".layer").find("span").css({color:"#fff"}),E()("#layer_t"+t).find("span").css({color:"#54b2df"}),E()("#layer_t"+t).siblings().find("span").css({color:"#fff"}),E()(".layer").find(".Alert_tk").css("display","none"),E()("#layer_t"+t).find("#Alert"+t).css("display","block")}},{key:"saveTwoTag",value:function(){var t=this.state,n=t.twoName,l=t.modeASelect,i=t.options,o=t.twoPic;if(n)if("{}"===JSON.stringify(i))alert("\u8bf7\u5148\u7ed8\u5236\u56fe\u5c42\uff01");else{var r=function(){N.a.post(e.Url+"map/layer/add",{layer_name:n,layer_type:l,group_id:sessionStorage.getItem("numId"),options:i,remark:""}).then((function(e){var t=e.data.data;console.log(e,t),t?(alert("\u6dfb\u52a0\u6210\u529f\uff01"),a.this.onLayer(),a.this.setState({twoName:"",modeASelect:"label",labelId:"",ChangeSave:!1,label_style:{isLining:!1,labelName:"",fontColor:"#ff0000",fontSize:"1",borderColor:"#ffffff",borderWitch:"1"},Polyline_style:{PolylineWitch:"1",PolylineColor:"#ff0000",borderWitchPolyline:"1",borderColor:"#ffffff",borderTransparencyPolyline:"50"},Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"50",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"50"},twoPic:v.a})):alert(e.data.msg)}))};switch(l){case"label":r();break;case"billboard":o===v.a?alert("\u8bf7\u9009\u62e9\u56fe\u7247\uff01"):r();break;case"polyline":case"polygon":r()}}else alert("\u8bf7\u8f93\u5165\u56fe\u5c42\u540d\u79f0\uff01")}},{key:"changeSaveTwoTag",value:function(){y.a.ClearHandler();var t=this.state,n=t.twoName,l=t.modeASelect,i=t.options,o=t.twoPic,r=t.labelId;if(n)if("{}"===JSON.stringify(i))alert("\u8bf7\u5148\u7ed8\u5236\u56fe\u5c42\uff01");else{var s=function(){var t={layer_name:n,layer_type:l,group_id:sessionStorage.getItem("numId"),id:r,options:i.label_name=a.this.state.label_style.labelName};console.log(t),N.a.post(e.Url+"map/layer/update",{id:r,layer_name:n,layer_type:l,group_id:sessionStorage.getItem("numId"),options:i,remark:""}).then((function(e){var t=e.data.data;console.log(e,t),t?(alert("\u4fee\u6539\u6210\u529f\uff01"),a.this.onLayer()):alert(e.data.msg)}))};switch(l){case"label":a.this.setState({options:a.this.state.label_style}),s();break;case"billboard":o===v.a?alert("\u8bf7\u9009\u62e9\u56fe\u7247\uff01"):s();break;case"polyline":a.this.setState({options:a.this.state.Polyline_style}),s();break;case"polygon":a.this.setState({options:a.this.state.Polygon_style}),s()}}else alert("\u8bf7\u8f93\u5165\u56fe\u5c42\u540d\u79f0\uff01")}},{key:"changeName",value:function(e){this.setState({groupName:e.target.value})}},{key:"changeTwoName",value:function(e){this.setState({twoName:e.target.value})}},{key:"changeLabelName",value:function(e){a.this.state.label_style.labelName=e.target.value,this.onChangeData()}},{key:"handleIsLining",value:function(e){var t=a.this.state.label_style;t.isLining=!a.this.state.label_style.isLining,a.this.setState((function(e){return t})),this.onChangeData()}},{key:"ChangeColor",value:function(e){a.this.state.label_style.fontColor=e.target.value,this.onChangeData()}},{key:"changeLabelFontSize",value:function(e){a.this.state.label_style.fontSize=e.target.value,this.onChangeData()}},{key:"changeLiningColor",value:function(e){a.this.state.label_style.borderColor=e.target.value,this.onChangeData()}},{key:"changeLiningBorderWitch",value:function(e){a.this.state.label_style.borderWitch=e.target.value,this.onChangeData()}},{key:"changePolylineWitch",value:function(e){a.this.state.Polyline_style.PolylineWitch=e.target.value;var t={id:a.this.state.labelId,Polyline_style:a.this.state.Polyline_style};y.a.ModifyPolyline(t)}},{key:"ChangePolylineColor",value:function(e){a.this.state.Polyline_style.PolylineColor=e.target.value;var t={id:a.this.state.labelId,Polyline_style:a.this.state.Polyline_style};y.a.ModifyPolyline(t)}},{key:"ChangePolylineBorderColor",value:function(e){a.this.state.Polyline_style.borderColor=e.target.value;var t={id:a.this.state.labelId,Polyline_style:a.this.state.Polyline_style};y.a.ModifyPolyline(t)}},{key:"changePolylineBorderWitch",value:function(e){a.this.state.Polyline_style.borderWitchPolyline=e.target.value;var t={id:a.this.state.labelId,Polyline_style:a.this.state.Polyline_style};y.a.ModifyPolyline(t)}},{key:"changeBorderTransparency",value:function(e){var t=a.this.state.Polyline_style;t.borderTransparencyPolyline=e.target.value,a.this.setState(t);var n={id:a.this.state.labelId,Polyline_style:a.this.state.Polyline_style};y.a.ModifyPolyline(n)}},{key:"ChangeShapeColor",value:function(e){a.this.state.Polygon_style.shapeColor=e.target.value;var t={id:a.this.state.labelId,Polygon_style:a.this.state.Polygon_style};y.a.ModifyPolygon(t)}},{key:"changeShapeTransparency",value:function(e){var t=a.this.state.Polygon_style;t.shapeTransparency=e.target.value,a.this.setState(t);var n={id:a.this.state.labelId,Polygon_style:a.this.state.Polygon_style};y.a.ModifyPolygon(n)}},{key:"ChangeBorderWitchPolygon",value:function(e){a.this.state.Polygon_style.borderWitchPolygon=e.target.value;var t={id:a.this.state.labelId,Polygon_style:a.this.state.Polygon_style};y.a.ModifyPolygon(t)}},{key:"ChangePolygonBorderColor",value:function(e){a.this.state.Polygon_style.borderColor=e.target.value;var t={id:a.this.state.labelId,Polygon_style:a.this.state.Polygon_style};y.a.ModifyPolygon(t)}},{key:"changeBorderTransparencyPolygon",value:function(e){var t=a.this.state.Polygon_style;t.borderTransparency=e.target.value,a.this.setState(t);var n={id:a.this.state.labelId,Polygon_style:a.this.state.Polygon_style};y.a.ModifyPolygon(n)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoad,n=t.oneLayer,l=t.twoLayer,i=t.layerList,o=t.groupName,r=t.modeASelect,s=t.Pic,c=t.label_style,u=t.oneChange,d=t.twoName,g=t.twoPic,h=t.Polygon_style,p=t.Polyline_style,v=t.ChangeSave;return f.a.createElement(m.Fragment,null,a?f.a.createElement("div",{className:"configShow Map",style:{width:"500px",height:"520px"}},f.a.createElement("div",{className:"configShowNav"},"\u56fe\u5c42\u7ba1\u7406 ",f.a.createElement("i",{onClick:function(){return e.Close()}})),f.a.createElement("div",{className:"configData",style:{height:"360px"}},f.a.createElement("div",{className:"LayerLeft"},f.a.createElement("h1",null,f.a.createElement("button",{onClick:function(){return e.oneClick(1)}},"\u6dfb\u52a0")),f.a.createElement("ul",null,i.length>0&&i.map((function(t,a){return f.a.createElement("li",{key:a,className:"layer",id:"layer"+t.LayerItems.id,onClick:function(){return e.oneClick(2,t)},onContextMenu:function(a){return e.onContextMenu(a,t.LayerItems.id)}},f.a.createElement("span",null,t.LayerItems.group_name),f.a.createElement("div",{className:"Alert_tk",id:"Alert"+t.LayerItems.id,style:{display:"none"}},f.a.createElement("button",{onClick:function(a){return e.twoClick(a,t,1)}},"\u6dfb\u52a0"),0===t.LayerLists.length?f.a.createElement("button",{onClick:function(a){return e.deleteOne(a,t.LayerItems.id)}},"\u5220\u9664"):""),f.a.createElement("ul",{style:{display:"none"}},t.LayerLists.length>0&&t.LayerLists.map((function(t,a){return f.a.createElement("li",{key:a,className:"layer_t",id:"layer_t"+t.id,onClick:function(a){return e.twoClick(a,t,2)},onContextMenu:function(a){return e.onContextMenu1(a,t.id)}},f.a.createElement("span",null,t.layer_name),f.a.createElement("div",{className:"Alert_tk",id:"Alert"+t.id,style:{display:"none"}},f.a.createElement("button",{onClick:function(a){return e.deleteTwo(a,t.id)}},"\u5220\u9664")))}))))})))),n?f.a.createElement("div",{className:"configDataRight LayerRight"},f.a.createElement("li",null,f.a.createElement("span",null,"\u5206\u7ec4\u540d\u79f0\uff1a"),f.a.createElement("input",{type:"text",value:o,onChange:function(t){return e.changeName(t)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u5206\u7ec4\u56fe\u6807\uff1a"),f.a.createElement("input",{type:"file",ref:this.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(t){return e.handlePhoto(t,1)}}),f.a.createElement("em",{onClick:function(){e.fileInputEl.current.click()}},f.a.createElement("img",{src:s,alt:""}))),f.a.createElement("li",null,f.a.createElement("span",null,"\u5206\u7ec4\u5907\u6ce8\uff1a"),f.a.createElement("textarea",{className:"AddTextarea",style:{height:"30px"},defaultValue:"",onChange:this.handleInfo})),f.a.createElement("div",{className:"configBut"},u?f.a.createElement("button",{onClick:function(){return e.changeSaveTag()}},"\u4fee\u6539\u4fdd\u5b58"):f.a.createElement("button",{onClick:function(){return e.saveTag()}},"\u4fdd\u5b58"))):"",l?f.a.createElement("div",{className:"configDataRight"},f.a.createElement("li",null,f.a.createElement("span",null,"\u56fe\u5c42\u540d\u79f0\uff1a"),f.a.createElement("input",{type:"text",value:d,onChange:function(t){return e.changeTwoName(t)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u4e0a\u56fe\u65b9\u5f0f\uff1a"),f.a.createElement("select",{className:"AddSelect",onChange:function(t){return e.ChangeSelect(t)},value:r},f.a.createElement("option",{value:"label"},"\u6587\u672c"),f.a.createElement("option",{value:"billboard"},"\u56fe\u7247"),f.a.createElement("option",{value:"polyline"},"\u6298\u7ebf"),f.a.createElement("option",{value:"polygon"},"\u591a\u8fb9\u5f62"))),function(){switch(r){case"label":return f.a.createElement("div",null,f.a.createElement("li",null,f.a.createElement("span",null,"\u6807\u6ce8\u6587\u672c\uff1a"),f.a.createElement("input",{type:"text",defaultValue:c.labelName,onChange:function(t){return e.changeLabelName(t)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u6807\u6ce8\u989c\u8272\uff1a"),f.a.createElement("select",{className:"AddSelect",onChange:function(t){return e.ChangeColor(t)},defaultValue:c.fontColor},f.a.createElement("option",{value:"#ff0000"},"\u7ea2"),f.a.createElement("option",{value:"#ffd700"},"\u9ec4"),f.a.createElement("option",{value:"#436eee"},"\u84dd"),f.a.createElement("option",{value:"#228b22"},"\u7eff"),f.a.createElement("option",{value:"#ffffff"},"\u767d"))),f.a.createElement("li",null,f.a.createElement("span",null,"\u5b57\u4f53\u5927\u5c0f\uff1a"),f.a.createElement("input",{type:"text",defaultValue:c.fontSize,onChange:function(t){return e.changeLabelFontSize(t)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u662f\u5426\u886c\u8272\uff1a"),f.a.createElement("input",{type:"checkbox",checked:c.isLining,onChange:function(t){return e.handleIsLining(t)}})),f.a.createElement("li",{className:c.isLining?"":"Grayscale"},f.a.createElement("span",null,"\u886c\u8272\u989c\u8272\uff1a"),f.a.createElement("select",{className:"AddSelect",disabled:c.isLining?"":"disabled",onChange:function(t){return e.changeLiningColor(t)},defaultValue:c.borderColor},f.a.createElement("option",{value:"#ff0000"},"\u7ea2"),f.a.createElement("option",{value:"#ffd700"},"\u9ec4"),f.a.createElement("option",{value:"#436eee"},"\u84dd"),f.a.createElement("option",{value:"#228b22"},"\u7eff"),f.a.createElement("option",{value:"#ffffff"},"\u767d"))),f.a.createElement("li",{className:c.isLining?"":"Grayscale"},f.a.createElement("span",null,"\u886c\u8272\u5bbd\u5ea6\uff1a"),f.a.createElement("input",{type:"text",defaultValue:c.borderWitch,disabled:c.isLining?"":"disabled",onChange:function(t){return e.changeLiningBorderWitch(t)}})));case"billboard":return f.a.createElement("div",{className:"LayerRight"},f.a.createElement("li",null,f.a.createElement("span",null,"\u4e0a\u4f20\u56fe\u6807\uff1a"),f.a.createElement("input",{type:"file",ref:e.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(t){return e.handlePhoto(t,2)}}),f.a.createElement("em",{onClick:function(){e.fileInputEl.current.click()}},f.a.createElement("img",{src:g,alt:""}))));case"polyline":return f.a.createElement("div",null,f.a.createElement("li",null,f.a.createElement("span",null,"\u6298\u7ebf\u989c\u8272\uff1a"),f.a.createElement("select",{className:"AddSelect",onChange:function(t){return e.ChangePolylineColor(t)},value:p.PolylineColor},f.a.createElement("option",{value:"#ff0000"},"\u7ea2"),f.a.createElement("option",{value:"#ffd700"},"\u9ec4"),f.a.createElement("option",{value:"#436eee"},"\u84dd"),f.a.createElement("option",{value:"#228b22"},"\u7eff"),f.a.createElement("option",{value:"#ffffff"},"\u767d"))),f.a.createElement("li",null,f.a.createElement("span",null,"\u6298\u7ebf\u5bbd\u5ea6\uff1a"),f.a.createElement("input",{type:"text",defaultValue:p.PolylineWitch,onChange:function(t){return e.changePolylineWitch(t)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u886c\u8272\u989c\u8272\uff1a"),f.a.createElement("select",{className:"AddSelect",onChange:function(t){return e.ChangePolylineBorderColor(t)},defaultValue:p.borderColor},f.a.createElement("option",{value:"#ff0000"},"\u7ea2"),f.a.createElement("option",{value:"#ffd700"},"\u9ec4"),f.a.createElement("option",{value:"#436eee"},"\u84dd"),f.a.createElement("option",{value:"#228b22"},"\u7eff"),f.a.createElement("option",{value:"#ffffff"},"\u767d"))),f.a.createElement("li",null,f.a.createElement("span",null,"\u886c\u8272\u5bbd\u5ea6\uff1a"),f.a.createElement("input",{type:"text",defaultValue:p.borderWitchPolyline,onChange:function(t){return e.changePolylineBorderWitch(t)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u8fb9\u6846\u900f\u660e\u5ea6\uff1a"),f.a.createElement("input",{type:"range",max:"100",min:"0",defaultValue:p.borderTransparencyPolyline,onInput:function(t){return e.changeBorderTransparency(t)},onChange:function(t){return e.changeBorderTransparency(t)}}),f.a.createElement("i",null,p.borderTransparencyPolyline,"%")));case"polygon":return f.a.createElement("div",null,f.a.createElement("li",null,f.a.createElement("span",null,"\u591a\u8fb9\u5f62\u989c\u8272\uff1a"),f.a.createElement("select",{className:"AddSelect",onChange:function(t){return e.ChangeShapeColor(t)},defaultValue:h.shapeColor},f.a.createElement("option",{value:"#ff0000"},"\u7ea2"),f.a.createElement("option",{value:"#ffd700"},"\u9ec4"),f.a.createElement("option",{value:"#436eee"},"\u84dd"),f.a.createElement("option",{value:"#228b22"},"\u7eff"),f.a.createElement("option",{value:"#ffffff"},"\u767d"))),f.a.createElement("li",null,f.a.createElement("span",null,"\u900f\u660e\u5ea6\uff1a"),f.a.createElement("input",{type:"range",defaultValue:h.shapeTransparency,onChange:function(t){return e.changeShapeTransparency(t)}}),f.a.createElement("i",null,h.shapeTransparency,"%")),f.a.createElement("li",null,f.a.createElement("span",null,"\u8fb9\u6846\u5bbd\u5ea6\uff1a"),f.a.createElement("input",{type:"text",defaultValue:h.borderWitchPolygon,onChange:function(t){return e.ChangeBorderWitchPolygon(t)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),f.a.createElement("select",{className:"AddSelect",onChange:function(t){return e.ChangePolygonBorderColor(t)},defaultValue:h.borderColor},f.a.createElement("option",{value:"#ff0000"},"\u7ea2"),f.a.createElement("option",{value:"#ffd700"},"\u9ec4"),f.a.createElement("option",{value:"#436eee"},"\u84dd"),f.a.createElement("option",{value:"#228b22"},"\u7eff"),f.a.createElement("option",{value:"#ffffff"},"\u767d"))),f.a.createElement("li",null,f.a.createElement("span",null,"\u8fb9\u6846\u900f\u660e\u5ea6\uff1a"),f.a.createElement("input",{type:"range",defaultValue:h.borderTransparency,onChange:function(t){return e.changeBorderTransparencyPolygon(t)}}),f.a.createElement("i",null,h.borderTransparency,"%")));default:return null}}(),f.a.createElement("div",{className:"configBut"},v?f.a.createElement("button",{onClick:function(){return e.changeSaveTwoTag()}},"\u4fee\u6539\u4fdd\u5b58"):f.a.createElement("button",{onClick:function(){return e.saveTwoTag()}},"\u4fdd\u5b58"),f.a.createElement("button",{onClick:function(){return e.setTag(r)}},"\u7ed8\u5236\u56fe\u5c42"))):"")):"")}}]),a}(m.PureComponent);t.a=Object(g.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(h.a.nav_click(t,a))}}}))(k)}).call(this,a(22))},288:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=a(15),m=a(18),f=a(4),g=a.n(f),h=a(2),p=a.n(h),v=a(5),y=function(t){function a(t){var l;return Object(n.a)(this,a),(l=Object(i.a)(this,Object(o.a)(a).call(this,t))).ChangeBuild=function(t){t.preventDefault(),console.log(t.target.value),g.a.post(e.Url+"map/floor/list",{build_id:t.target.value}).then((function(e){var t=e.data.data;t?(console.log(t),l.setState({floor:t,floorId:t[0].id})):alert(e.data.msg)})),l.setState({buildId:t.target.value})},l.ChangeFloor=function(e){e.preventDefault(),console.log(e.target.value),l.setState({floorId:e.target.value})},l.state={isLoad:!0,treeList:{},regionName:"",oneInfo:!0,Pid:0,Id:"",addChange:!1,twoInfo:!1,twoImport:!1,SaveId:"",isIndoor:!1,build:{},buildId:"",floor:{},floorId:"",SHP:"",DBF:"",gridName:"",labelId:"",TwoItem:!0,TwoItemTwo:!1,gridStyle:{color:"#436eee",colorTransparency:50,borderWidth:"1",borderColor:"#ff0000",borderTransparency:50},tableList:{}},a.this=Object(r.a)(l),l.Close=l.Close.bind(Object(r.a)(l)),l.onContextMenu=l.onContextMenu.bind(Object(r.a)(l)),l.addInfo=l.addInfo.bind(Object(r.a)(l)),l.saveInfo=l.saveInfo.bind(Object(r.a)(l)),l.onMenuClicked=l.onMenuClicked.bind(Object(r.a)(l)),l.deleteInfo=l.deleteInfo.bind(Object(r.a)(l)),l.importInfo=l.importInfo.bind(Object(r.a)(l)),l.saveTwoTag=l.saveTwoTag.bind(Object(r.a)(l)),l.navItemClick=l.navItemClick.bind(Object(r.a)(l)),l.saveSure=l.saveSure.bind(Object(r.a)(l)),l.onReset=l.onReset.bind(Object(r.a)(l)),l}return Object(s.a)(a,t),Object(l.a)(a,[{key:"Close",value:function(){this.setState({isLoad:!1})}},{key:"componentDidMount",value:function(){this.onLoad(),document.oncontextmenu=function(){return!1}}},{key:"onLoad",value:function(){var t=this,a=[];g.a.get(e.Url+"grid/region/list").then((function(n){var l=n.data.data;l?(a=l,console.log(a),g.a.post(e.Url+"grid/info/list").then((function(e){var n=e.data.data;n?(console.log(n),n.forEach((function(e){var t={id:e.id,pid:e.region_id,region_name:e.grid_name,node_type:"details",position:e.position,indoor:e.indoor,build_id:e.build_id,floor_id:e.floor_id,children:[],grid_style:e.grid_style,geom:e.geom};a.push(t)})),t.setState({treeList:a})):alert(e.data.msg)}))):alert(n.data.msg)}))}},{key:"AnalyticFormat",value:function(e){return function e(t,a){for(var n,l=[],i=0;i<t.length;i++)t[i].pid===a&&(n=e(t,t[i].id),t[i].children=n,l.push(t[i]));return l}(e,"0")}},{key:"generateMenu",value:function(e){var t=this,a=[];if(e instanceof Array){var n=[],l=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(l=(r=s.next()).done);l=!0){var c=r.value;n.push(this.generateMenu(c))}}catch(d){i=!0,o=d}finally{try{l||null==s.return||s.return()}finally{if(i)throw o}}a.push(u.a.createElement("ul",{key:"single"},n))}else{if(null==e)return;a.push(u.a.createElement("li",{key:e.id,className:"layer",id:"layer"+e.id,onContextMenu:"details"===e.node_type?function(e){return t.onContextMenu1(e)}:function(a){return t.onContextMenu(a,e.id)}},u.a.createElement("span",{onClick:"details"===e.node_type?function(a){return t.onMenuClicked(a,e,1)}:function(a){return t.onMenuClicked(a,e,2)}},function(){switch(e.node_type){case"group":return u.a.createElement("i",{className:"group"});case"grid":return u.a.createElement("i",{className:"grid"});case"details":return u.a.createElement("i",{className:"details"});default:return null}}(),e.region_name),this.generateMenu(e.children),u.a.createElement("div",{className:"Alert_tk",id:"Alert"+e.id,style:{display:"none"}},function(){switch(e.node_type){case"group":return u.a.createElement("div",null,u.a.createElement("button",{onClick:function(a){return t.addInfo(a,2,e.id)}},"\u6dfb\u52a0"),u.a.createElement("button",{onClick:function(a){return t.addInfo(a,3,e)}},"\u4fee\u6539"),e.children.length<1?u.a.createElement("button",{onClick:function(a){return t.deleteInfo(a,e.id)}},"\u5220\u9664"):"",u.a.createElement("button",{onClick:function(a){return t.importInfo(a,e)}},"\u5bfc\u5165"));case"grid":return u.a.createElement("div",null,u.a.createElement("button",{onClick:function(a){return t.addInfo(a,3,e)}},"\u4fee\u6539"),u.a.createElement("button",{onClick:function(a){return t.onReset(a,e.id)}},"\u91cd\u7f6e"));default:return null}}())))}return a}},{key:"onMenuClicked",value:function(e,t,n){console.log(t),e.stopPropagation();var l=p()(e.target).next();if(l.css("display","none"===l.css("display")?"block":"none"),p()("#layer"+t.id).parents().find("span").css({color:"#fff",fontWeight:"100"}),p()("#layer"+t.id).find("span").css({color:"#54b2df",fontWeight:"bold"}),p()("#layer"+t.id).siblings().find("span").css({color:"#fff",fontWeight:"100"}),p()("#layer"+t.id).children().find("span").css({color:"#fff",fontWeight:"100"}),p()(".layer_t").find("span").css({color:"#fff",fontWeight:"100"}),p()(".layer").find(".Alert_tk").css("display","none"),this.state.treeList.forEach((function(e){e.pid===t.pid&&v.a.Emptyentities({id:e.id})})),1===n){var i={style:t.grid_style,gridList:t.geom.coordinates,flyTo:!0,id:t.id};v.a.showGrid(i),a.this.setState({twoInfo:!0,oneInfo:!1,twoImport:!1,gridName:t.region_name,gridStyle:t.grid_style,labelId:t.id,TwoItem:!0,TwoItemTwo:!1}),p()(".TwoDataNav").find("span:last-child").removeClass("cur"),p()(".TwoDataNav").find("span:first-child").addClass("cur")}else if(2===n)return}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),console.log(t),p()("#layer"+t).parents().find("span").css({color:"#fff",fontWeight:"100"}),p()("#layer"+t).find("span").css({color:"#54b2df",fontWeight:"bold"}),p()("#layer"+t).siblings().find("span").css({color:"#fff",fontWeight:"100"}),p()("#layer"+t).children().find("span").css({color:"#fff",fontWeight:"100"}),p()(".layer_t").find("span").css({color:"#fff",fontWeight:"100"}),p()(".layer").find(".Alert_tk").css("display","none"),p()("#layer"+t).find("#Alert"+t).css("display","block")}},{key:"onContextMenu1",value:function(e){e.stopPropagation(),p()(".layer").find(".Alert_tk").css("display","none")}},{key:"addInfo",value:function(e,t,a){p()(".layer").find(".Alert_tk").css("display","none"),e.stopPropagation(),this.setState({Pid:a,oneInfo:!0,regionName:"",addChange:!1,twoInfo:!1,twoImport:!1}),1===t?console.log("\u9876\u7ea7\u6dfb\u52a0"):2===t?console.log("\u5b50\u7ea7\u6dfb\u52a0"):3===t&&this.setState({Pid:a.pid,regionName:a.region_name,addChange:!0,Id:a.id})}},{key:"saveInfo",value:function(t){var n=this;1===t?g.a.post(e.Url+"grid/region/add",{region_name:a.this.state.regionName,pid:a.this.state.Pid}).then((function(e){var t=e.data.data;t?(console.log(t),alert("\u6dfb\u52a0\u6210\u529f\uff01"),n.onLoad(),n.setState({regionName:"",Pid:0})):alert(e.data.msg)})):2===t&&g.a.post(e.Url+"grid/region/update",{region_name:a.this.state.regionName,id:a.this.state.Id,pid:a.this.state.Pid}).then((function(e){var t=e.data.data;t?(console.log(t),alert("\u4fee\u6539\u6210\u529f\uff01"),n.setState({addChange:!1}),n.onLoad(),n.setState({regionName:"",Pid:0})):alert(e.data.msg)}))}},{key:"deleteInfo",value:function(t,a){var n=this;t.stopPropagation(),window.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bbe\u5907\u561b\uff1f")&&g.a.post(e.Url+"grid/region/delete",{id:a}).then((function(e){var t=e.data.data;t?(console.log(t),alert("\u5220\u9664\u6210\u529f\uff01"),n.onLoad()):alert(e.data.msg)}))}},{key:"onReset",value:function(t,a){var n=this;t.stopPropagation(),window.confirm("\u60a8\u786e\u5b9a\u8981\u91cd\u7f6e\u8be5\u8bbe\u5907\u561b\uff1f")&&g.a.post(e.Url+"grid/region/reset",{id:a}).then((function(e){var t=e.data.data;t?(console.log(t),alert("\u91cd\u7f6e\u6210\u529f\uff01"),n.onLoad()):alert(e.data.msg)}))}},{key:"importInfo",value:function(e,t){p()(".layer").find(".Alert_tk").css("display","none"),e.stopPropagation(),console.log(t),this.setState({oneInfo:!1,twoInfo:!1,twoImport:!0,SaveId:t.id})}},{key:"importFile",value:function(t){var n=t.target.files,l=new FormData;console.log(n[1],n[0]),l.append("shp",n[1]),l.append("dbf",n[0]),this.setState({SHP:n[1],DBF:n[0]});var i={url:e.Url+"grid/info/analysisSHP",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:l,dataType:"JSON"};p.a.ajax(i).done((function(e){console.log(e);var t=e.data;if(t){var n={style:a.this.state.gridStyle,gridList:t};console.log(t,a.this.state.gridStyle,n),v.a.PreviewGrid(n)}else alert(e.msg)}))}},{key:"changeRegionName",value:function(e){this.setState({regionName:e.target.value})}},{key:"handleIsIndoor",value:function(t){var a=this;this.setState((function(e){return{isIndoor:!e.isIndoor}})),this.state.isIndoor?this.setState({build:{},buildValue:"",buildId:"",floor:{},floorValue:"",floorId:""}):g.a.get(e.Url+"map/build/list").then((function(t){var n=t.data.data;n?(console.log(n),a.setState({build:n,buildId:n[0].id}),g.a.post(e.Url+"map/floor/list",{build_id:n[0].id}).then((function(e){var t=e.data.data;t?(console.log(t),a.setState({floor:t,floorId:t[0].id})):alert(e.data.msg)}))):alert(t.data.msg)}))}},{key:"onChangeData",value:function(){setTimeout((function(){var e=a.this.state,t={ids:[e.labelId],style:e.gridStyle};v.a.modifyGrid(t)}),10)}},{key:"ChangeColor",value:function(e){var t=a.this.state.gridStyle;t.color=e.target.value,a.this.setState(t),this.onChangeData()}},{key:"changeColorTransparency",value:function(e){var t=a.this.state.gridStyle;t.colorTransparency=e.target.value,a.this.setState(t),this.onChangeData()}},{key:"ChangeBorderWidth",value:function(e){var t=a.this.state.gridStyle;t.borderWidth=e.target.value,a.this.setState(t),this.onChangeData()}},{key:"changeBorderColor",value:function(e){var t=a.this.state.gridStyle;t.borderColor=e.target.value,a.this.setState(t),this.onChangeData()}},{key:"changeBorderTransparency",value:function(e){var t=a.this.state.gridStyle;t.borderTransparency=e.target.value,a.this.setState(t),this.onChangeData()}},{key:"GridName",value:function(e){a.this.setState({gridName:e.target.value})}},{key:"saveTwoTag",value:function(){var t=this.state,n=t.SaveId,l=t.SHP,i=t.DBF,o=t.isIndoor,r=t.buildId,s=t.floorId,c=t.gridStyle;console.log(n,l,i,o,r,s,c,c.color);var u=new FormData;if(u.append("shp",l),u.append("dbf",i),u.append("region_id",n),u.append("indoor",o),u.append("build_id",r),u.append("floor_id",s),u.append("grid_style",JSON.stringify(c)),console.log(u),l){var d={url:e.Url+"grid/info/upload",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:u,dataType:"JSON"};p.a.ajax(d).done((function(t){console.log(t);var n=t.data;n?(console.log(n),alert("\u4fdd\u5b58\u6210\u529f!"),g.a.post(e.Url+"grid/info/list").then((function(e){var t=e.data.data;t?(console.log(t),a.this.onLoad(),a.this.setState({regionName:"",Pid:0,oneInfo:!0,twoInfo:!1,twoImport:!1})):alert(e.data.msg)}))):alert(t.msg)}))}else alert("\u8bf7\u5148\u9009\u62e9\u6570\u636e\uff01")}},{key:"navItemClick",value:function(t){if(1===t)a.this.setState({TwoItem:!0,TwoItemTwo:!1}),p()(".TwoDataNav").find("span:last-child").removeClass("cur"),p()(".TwoDataNav").find("span:first-child").addClass("cur");else if(2===t){a.this.setState({TwoItem:!1,TwoItemTwo:!0}),p()(".TwoDataNav").find("span:last-child").addClass("cur"),p()(".TwoDataNav").find("span:first-child").removeClass("cur");var n=[];g.a.post(e.Url+"device/category/categoryByGrid",{id:a.this.state.labelId}).then((function(t){var l=t.data.data;l?(console.log(l),n=l,g.a.post(e.Url+"device/info/deviceByGrid",{id:a.this.state.labelId}).then((function(e){var t=e.data.data;t?(n.forEach((function(e){e.subsets=[]})),t.forEach((function(e){n.forEach((function(t){e.category_name===t.category_name&&t.subsets.push(e)}))})),console.log(n),a.this.setState({tableList:n})):alert(e.data.msg)}))):alert(t.data.msg)}))}}},{key:"saveSure",value:function(){var t=this.state,n=t.gridName,l=t.labelId,i=t.gridStyle;g.a.post(e.Url+"grid/info/update",{id:l,grid_name:n,grid_style:i}).then((function(e){var t=e.data.data;t?(console.log(t),a.this.onLoad(),alert("\u4fee\u6539\u6210\u529f\uff01")):alert(e.data.msg)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoad,n=t.treeList,l=t.regionName,i=t.oneInfo,o=t.addChange,r=t.twoInfo,s=t.twoImport,d=t.isIndoor,m=t.buildId,f=t.build,g=t.floorId,h=t.floor,p=t.gridStyle,v=t.gridName,y=t.TwoItem,b=t.TwoItemTwo,E=t.tableList;return u.a.createElement(c.Fragment,null,a?u.a.createElement("div",{className:"configShow",style:{width:"530px"}},u.a.createElement("div",{className:"configShowNav"},"\u7f51\u683c\u6a21\u5f0f",u.a.createElement("i",{onClick:function(){return e.Close()}})),u.a.createElement("div",{className:"configData",style:{height:"400px"}},u.a.createElement("div",{className:"LayerLeftNew"},u.a.createElement("div",{className:"LeftList"},u.a.createElement("div",{className:"LeftListTitle"},u.a.createElement("button",{onClick:function(t){return e.addInfo(t,1,0)}},"\u6dfb\u52a0\u4fe1\u606f")),u.a.createElement("div",{className:"TreeList"},u.a.createElement("ul",null,this.generateMenu(this.AnalyticFormat(n)))))),u.a.createElement("div",{className:"configDataRight LayerRight",style:{width:"279px"}},i?u.a.createElement("div",null,u.a.createElement("li",null,u.a.createElement("span",null,"\u7f51\u683c\u540d\u79f0\uff1a"),u.a.createElement("input",{type:"text",value:l,onChange:function(t){return e.changeRegionName(t)}})),u.a.createElement("div",{className:"configBut"},o?u.a.createElement("button",{onClick:function(){return e.saveInfo(2)}},"\u4fee\u6539\u4fdd\u5b58"):u.a.createElement("button",{onClick:function(){return e.saveInfo(1)}},"\u4fdd\u5b58"))):"",s?u.a.createElement("div",null,u.a.createElement("div",{className:"LeftListTitle",style:{marginLeft:"15px"}},u.a.createElement("input",{type:"file",name:"filename",multiple:"multiple",onChange:function(t){return e.importFile(t)}}),u.a.createElement("button",null,"\u9009\u53d6\u6570\u636e")),u.a.createElement("div",{className:"AddImport"},u.a.createElement("div",{className:"PositionFloor"},u.a.createElement("span",null,u.a.createElement("label",null,"\u5ba4\u5185\uff1a"),u.a.createElement("input",{type:"checkbox",checked:d,onChange:function(t){return e.handleIsIndoor(t)}})),u.a.createElement("span",null,u.a.createElement("select",{defaultValue:m,onChange:this.ChangeBuild},f.length>0&&f.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.build_name)})))),u.a.createElement("span",null,u.a.createElement("select",{defaultValue:g,onChange:this.ChangeFloor},h.length>0&&h.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.floor_name)}))))),u.a.createElement("li",null,u.a.createElement("span",null,"\u7f51\u683c\u6837\u5f0f")),u.a.createElement("li",null,u.a.createElement("span",null,"\u7f51\u683c\u989c\u8272\uff1a"),u.a.createElement("select",{className:"AddSelect",onChange:function(t){return e.ChangeColor(t)},defaultValue:p.color},u.a.createElement("option",{value:"#ff0000"},"\u7ea2"),u.a.createElement("option",{value:"#ffd700"},"\u9ec4"),u.a.createElement("option",{value:"#436eee"},"\u84dd"),u.a.createElement("option",{value:"#228b22"},"\u7eff"),u.a.createElement("option",{value:"#ffffff"},"\u767d"))),u.a.createElement("li",null,u.a.createElement("span",null,"\u900f\u660e\u5ea6\uff1a"),u.a.createElement("input",{type:"range",max:"100",min:"0",defaultValue:p.colorTransparency,onChange:function(t){return e.changeColorTransparency(t)}}),u.a.createElement("i",null,p.colorTransparency,"%")),u.a.createElement("li",null,u.a.createElement("span",null,"\u8fb9\u6846\u5bbd\u5ea6\uff1a"),u.a.createElement("input",{type:"text",defaultValue:p.borderWidth,onChange:function(t){return e.ChangeBorderWidth(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),u.a.createElement("select",{className:"AddSelect",onChange:function(t){return e.changeBorderColor(t)},defaultValue:p.borderColor},u.a.createElement("option",{value:"#ff0000"},"\u7ea2"),u.a.createElement("option",{value:"#ffd700"},"\u9ec4"),u.a.createElement("option",{value:"#436eee"},"\u84dd"),u.a.createElement("option",{value:"#228b22"},"\u7eff"),u.a.createElement("option",{value:"#ffffff"},"\u767d"))),u.a.createElement("li",null,u.a.createElement("span",null,"\u900f\u660e\u5ea6\uff1a"),u.a.createElement("input",{type:"range",max:"100",min:"0",defaultValue:p.borderTransparency,onChange:function(t){return e.changeBorderTransparency(t)}}),u.a.createElement("i",null,p.borderTransparency,"%"))),u.a.createElement("div",{className:"configBut"},u.a.createElement("button",{onClick:function(){return e.saveTwoTag()}},"\u4fdd\u5b58"))):"",r?u.a.createElement("div",null,u.a.createElement("div",{className:"TwoDataNav"},u.a.createElement("span",{className:"cur",onClick:function(){return e.navItemClick(1)}},"\u7f51\u683c\u4fe1\u606f"),u.a.createElement("span",{onClick:function(){return e.navItemClick(2)}},"\u7f51\u683c\u8bbe\u5907")),u.a.createElement("div",{className:"one"},y?u.a.createElement("div",null,u.a.createElement("div",{className:"AddImport one"},u.a.createElement("li",null,u.a.createElement("span",null,"\u7f51\u683c\u540d\u79f0\uff1a"),u.a.createElement("input",{type:"text",value:v,onChange:function(t){return e.GridName(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u7f51\u683c\u989c\u8272\uff1a"),u.a.createElement("select",{className:"AddSelect",onChange:function(t){return e.ChangeColor(t)},value:p.color},u.a.createElement("option",{value:"#ff0000"},"\u7ea2"),u.a.createElement("option",{value:"#ffd700"},"\u9ec4"),u.a.createElement("option",{value:"#436eee"},"\u84dd"),u.a.createElement("option",{value:"#228b22"},"\u7eff"),u.a.createElement("option",{value:"#ffffff"},"\u767d"))),u.a.createElement("li",null,u.a.createElement("span",null,"\u900f\u660e\u5ea6\uff1a"),u.a.createElement("input",{type:"range",max:"100",min:"0",value:p.colorTransparency,onChange:function(t){return e.changeColorTransparency(t)}}),u.a.createElement("i",null,p.colorTransparency,"%")),u.a.createElement("li",null,u.a.createElement("span",null,"\u8fb9\u6846\u5bbd\u5ea6\uff1a"),u.a.createElement("input",{type:"text",value:p.borderWidth,onChange:function(t){return e.ChangeBorderWidth(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),u.a.createElement("select",{className:"AddSelect",onChange:function(t){return e.changeBorderColor(t)},value:p.borderColor},u.a.createElement("option",{value:"#ff0000"},"\u7ea2"),u.a.createElement("option",{value:"#ffd700"},"\u9ec4"),u.a.createElement("option",{value:"#436eee"},"\u84dd"),u.a.createElement("option",{value:"#228b22"},"\u7eff"),u.a.createElement("option",{value:"#ffffff"},"\u767d"))),u.a.createElement("li",null,u.a.createElement("span",null,"\u900f\u660e\u5ea6\uff1a"),u.a.createElement("input",{type:"range",max:"100",min:"0",value:p.borderTransparency,onChange:function(t){return e.changeBorderTransparency(t)}}),u.a.createElement("i",null,p.borderTransparency,"%"))),u.a.createElement("div",{className:"configBut"},u.a.createElement("button",{onClick:function(){return e.saveSure()}},"\u786e\u5b9a"))):"",b?u.a.createElement("div",{className:"AddImport two"},u.a.createElement("div",{className:"GridNav"},E.length>0&&E.map((function(e,t){return u.a.createElement("li",{key:t},e.category_name)}))),u.a.createElement("div",{className:"GridNavTable"},u.a.createElement("table",null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"\u7c7b\u578b"),u.a.createElement("th",null,"\u540d\u79f0"))),u.a.createElement("tbody",null,E.length>0&&E.map((function(e,t){return u.a.createElement(c.Fragment,{key:t},e.subsets.length>0&&e.subsets.map((function(e,t){return u.a.createElement("tr",{key:t},u.a.createElement("td",null,e.device_type),u.a.createElement("td",null,e.device_name))})))})))))):"")):""))):"")}}]),a}(c.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(m.a.nav_click(t,a))}}}))(y)}).call(this,a(22))},289:function(e,t,a){"use strict";var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=a(15),m=a(18),f=a(290),g=a(291),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={nav:!0,navItem:0},a.navItemClick=a.navItemClick.bind(Object(r.a)(a)),t.this=Object(r.a)(a),a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"navItemClick",value:function(e){this.setState({nav:!1,navItem:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.nav,n=t.navItem,l=this.props,i=l.adminItem,o=l.navClick,r=l.adminIndex;return u.a.createElement(c.Fragment,null,u.a.createElement("li",{className:4===i?"cur":"",onClick:function(){return o(4,1)}},"\u8bbe\u5907\u914d\u7f6e"),u.a.createElement("div",null,4===i&&a?u.a.createElement("div",{className:"navItem"},u.a.createElement("li",{className:1===n?"cur":"",onClick:function(){return e.navItemClick(1)}},"\u7c7b\u522b\u7ba1\u7406"),u.a.createElement("li",{className:2===n?"cur":"",onClick:function(){return e.navItemClick(2)}},"\u8bbe\u5907\u4e0a\u56fe")):"",1===r&&1===n?u.a.createElement(f.a,null):"",1===r&&2===n?u.a.createElement(g.a,null):""))}}]),t}(c.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(m.a.nav_click(t,a)),h.this.setState({navItem:0}),4===t&&h.this.setState({nav:!0})}}}))(h)},290:function(e,t,a){"use strict";(function(e){var n=a(296),l=a(82),i=a.n(l),o=a(121),r=a(8),s=a(9),c=a(11),u=a(10),d=a(3),m=a(12),f=a(0),g=a.n(f),h=a(15),p=a(4),v=a.n(p),y=a(20),b=a.n(y),E=a(2),C=a.n(E),N=function(t){function a(e){var t;return Object(r.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).deviceTypeName=function(e){t.setState({typeName:e.target.value})},t.handlePhoto=function(){var e=Object(o.a)(i.a.mark((function e(a,n){var l,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=new FileReader).readAsDataURL(a.target.files[0]),r=Object(d.a)(t),o.onload=function(e){l=e.target.result,1===n?(console.log(1),r.setState({uploadedFileGetUrl:l})):2===n?(console.log(2),r.setState({typeIcon:l})):3===n&&(console.log(3),r.setState({mapIcon:l}))};case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.deviceName=function(e){t.setState({mapDeviceName:e.target.value})},t.deviceIntentName=function(e){t.setState({mapDeviceIntent:e.target.value})},t.handleIsEnable=function(e){t.setState((function(e){return{isEnable:!e.isEnable}}))},t.handleInfo=function(e){t.setState({addRemark:e.target.value})},t.handleStyle=function(e){t.setState({mapStyle:JSON.parse(e.target.value)})},t.handleAddEnable=function(e){t.setState((function(e){return{addEnable:!e.addEnable}}))},t.state={isLoading:!1,List:{},enable:!1,Save:!1,One:!0,OneAdd:!1,uploadedFileGetUrl:b.a,mapDeviceName:"",mapDeviceIntent:"",isEnable:!1,Two:!1,TwoAdd:!1,TwoChange:!1,TwoName:"",typeName:"",typeIcon:b.a,mapIcon:b.a,addEnable:!1,mapType:{ls:[{value:"model",text:"\u6a21\u578b"},{value:"point",text:"\u70b9"},{value:"polyline",text:"\u6298\u7ebf"},{value:"polygon",text:"\u591a\u8fb9\u5f62\u9762"},{value:"wall",text:"\u7acb\u4f53\u5899"}],value:"model",text:"\u6a21\u578b"},mapStyle:"",addRemark:"",addTitle:""},a.this=Object(d.a)(t),t.fileInputEl=g.a.createRef(),t.fileInputEl1=g.a.createRef(),t.ListClick=t.ListClick.bind(Object(d.a)(t)),t.Edit=t.Edit.bind(Object(d.a)(t)),t.Save=t.Save.bind(Object(d.a)(t)),t.handleCheck=t.handleCheck.bind(Object(d.a)(t)),t.Add=t.Add.bind(Object(d.a)(t)),t.deviceSave=t.deviceSave.bind(Object(d.a)(t)),t.deviceSave1=t.deviceSave1.bind(Object(d.a)(t)),t.deviceSave2=t.deviceSave2.bind(Object(d.a)(t)),t.handlePhoto=t.handlePhoto.bind(Object(d.a)(t)),t.deviceName=t.deviceName.bind(Object(d.a)(t)),t.handleIsEnable=t.handleIsEnable.bind(Object(d.a)(t)),t.ReturnOne=t.ReturnOne.bind(Object(d.a)(t)),t.deviceTypeName=t.deviceTypeName.bind(Object(d.a)(t)),t.selectChange=t.selectChange.bind(Object(d.a)(t)),t.handleInfo=t.handleInfo.bind(Object(d.a)(t)),t.handleStyle=t.handleStyle.bind(Object(d.a)(t)),t.handleAddEnable=t.handleAddEnable.bind(Object(d.a)(t)),t.TwoListClick=t.TwoListClick.bind(Object(d.a)(t)),t.clickDeleted=t.clickDeleted.bind(Object(d.a)(t)),"model"===t.state.mapType.value?t.state.mapStyle={url:"$serverURL$/gltf/qiangji.gltf",height:3,scale:2}:"point"===t.state.mapType.value?t.state.mapStyle="2":"polyline"===t.state.mapType.value?t.state.mapStyle="3":"polygon"===t.state.mapType.value?t.state.mapStyle="4":"wall"===t.state.mapType.value&&(t.state.mapStyle="5"),t}return Object(m.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){this.onDevice(),document.oncontextmenu=function(){return!1}}},{key:"onDevice",value:function(){var t=this;v.a.post(e.Url+"device/category/list").then((function(e){var a=e.data.data;a?(console.log(a),t.setState({List:a,isLoading:!0})):alert(e.data.msg)}))}},{key:"Edit",value:function(e){this.setState({Save:!0,enable:!0,OneAdd:!1}),2===e&&this.setState({TwoAdd:!1,TwoChange:!1})}},{key:"handleCheck",value:function(e,t){console.log(e,t);var a=!t;console.log(a),this.setState({List:this.state.List.map((function(t,l){return t.id===e?Object(n.a)({},t,{enable:a}):t}))})}},{key:"Save",value:function(t){for(var a=this,n=this.state.List,l=[],i=0;i<n.length;i++){var o={id:n[i].id,enable:n[i].enable};l.push(o)}2===t?v.a.post(e.Url+"device/type/updateEnable",l).then((function(e){var t=e.data.data;t?(console.log(t),a.setState({Save:!1,enable:!1})):alert(e.data.msg)})):v.a.post(e.Url+"device/category/updateEnable",l).then((function(e){var t=e.data.data;t?(console.log(t),a.setState({Save:!1,enable:!1})):alert(e.data.msg)}))}},{key:"Add",value:function(e){2===e?(console.log(2),this.setState({TwoAdd:!0,TwoChange:!1,typeName:"",typeIcon:b.a,mapIcon:b.a,addEnable:!1,mapType:{ls:[{value:"model",text:"\u6a21\u578b"},{value:"point",text:"\u70b9"},{value:"polyline",text:"\u6298\u7ebf"},{value:"polygon",text:"\u591a\u8fb9\u5f62\u9762"},{value:"wall",text:"\u7acb\u4f53\u5899"}],value:"model",text:"\u6a21\u578b"},mapStyle:"",addRemark:""}),"model"===this.state.mapType.value?this.setState({mapStyle:{url:"$serverURL$/gltf/qiangji.gltf",height:3,scale:2}}):"point"===this.state.mapType.value?this.setState({mapStyle:2}):"polyline"===this.state.mapType.value?this.setState({mapStyle:3}):"polygon"===this.state.mapType.value?this.setState({mapStyle:4}):"wall"===this.state.mapType.value&&this.setState({mapStyle:5})):this.setState({OneAdd:!0,uploadedFileGetUrl:b.a,mapDeviceName:"",isEnable:!1})}},{key:"deviceSave",value:function(t,a,n,l){var i=this;t===b.a?alert("\u8bf7\u9009\u62e9\u56fe\u7247"):a?n?v.a.post(e.Url+"device/category/add",{category_icon:t,category_name:a,category_intent:n,enable:l,remark:a}).then((function(e){e.data.data?(i.onDevice(),i.setState({OneAdd:!1})):alert(e.data.msg)})):alert("\u8bf7\u8f93\u5165\u8bbe\u5907\u6807\u8bc6"):alert("\u8bf7\u8f93\u5165\u8bbe\u5907\u540d\u79f0")}},{key:"ListClick",value:function(t,a){var n=this;console.log(t),sessionStorage.setItem("categoryId",t),this.setState({One:!1,Two:!0,OneAdd:!1,TwoName:a}),v.a.post(e.Url+"device/type/list",{category_id:t}).then((function(e){var t=e.data.data;t?(console.log(t),n.setState({List:t})):alert(e.data.msg)}))}},{key:"ReturnOne",value:function(){this.onDevice(),this.setState({One:!0,OneAdd:!1,OneName:"",Two:!1,TwoAdd:!1,TwoChange:!1})}},{key:"selectChange",value:function(e){e.preventDefault(),console.log(e.target);var t=e.target.options[e.target.selectedIndex],n=t.value,l=t.text,i={ls:this.state.mapType.ls,value:n,text:l};this.setState({mapType:i}),"model"===i.value?a.this.setState({mapStyle:{url:"$serverURL$/gltf/qiangji.gltf",height:3,scale:2}}):"point"===i.value?a.this.setState({mapStyle:"2"}):"polyline"===i.value?a.this.setState({mapStyle:"3"}):"polygon"===i.value?a.this.setState({mapStyle:"4"}):"wall"===i.value&&a.this.setState({mapStyle:"5"})}},{key:"NavList",value:function(){var t=this,a=sessionStorage.getItem("categoryId");v.a.post(e.Url+"device/type/list",{category_id:a}).then((function(e){var a=e.data.data;a?(console.log(a),t.setState({List:a})):alert(e.data.msg)}))}},{key:"deviceSave1",value:function(t,a,n,l,i,o,r){var s=this,c=JSON.stringify(i);if(console.log(c),t)if(a===b.a)alert("\u8bf7\u9009\u62e9\u7c7b\u578b\u56fe\u6807");else if(n===b.a)alert("\u8bf7\u9009\u62e9\u5c55\u793a\u56fe\u6807");else{console.log(t,a,n,l,i,o,r);var u=sessionStorage.getItem("categoryId");v.a.post(e.Url+"device/type/add",{type_name:t,type_icon:a,category_id:u,map_icon:n,map_type:l,map_style:i,remark:t,enable:r}).then((function(e){e.data.data?(s.NavList(),s.setState({TwoAdd:!1})):alert(e.data.msg)}))}else alert("\u8bf7\u8f93\u5165\u7c7b\u578b\u540d\u79f0")}},{key:"deviceSave2",value:function(t,a,n,l,i,o,r){var s=this;if(t)if(a===b.a)alert("\u8bf7\u9009\u62e9\u7c7b\u578b\u56fe\u6807");else if(n===b.a)alert("\u8bf7\u9009\u62e9\u5c55\u793a\u56fe\u6807");else{console.log(t,a,n,l,i,o,r);var c=sessionStorage.getItem("changeId");console.log(i),v.a.post(e.Url+"device/type/update",{type_name:t,type_icon:a,id:c,map_icon:n,map_type:l,map_style:i,remark:t,enable:r}).then((function(e){e.data.data?(s.NavList(),s.setState({TwoAdd:!1,TwoChange:!1})):alert(e.data.msg)}))}else alert("\u8bf7\u8f93\u5165\u7c7b\u578b\u540d\u79f0")}},{key:"TwoListClick",value:function(t,a){var n=this;console.log(t),this.setState({TwoChange:!0,TwoAdd:!1,typeName:a}),v.a.post(e.Url+"device/type",{id:t}).then((function(e){var a=e.data.data;a?(console.log(a),sessionStorage.setItem("changeId",t),n.setState({typeName:a.type_name,typeIcon:a.type_icon,mapIcon:a.map_icon,addEnable:a.enable,mapType:{ls:[{value:"model",text:"\u6a21\u578b"},{value:"point",text:"\u70b9"},{value:"polyline",text:"\u6298\u7ebf"},{value:"polygon",text:"\u591a\u8fb9\u5f62\u9762"},{value:"wall",text:"\u7acb\u4f53\u5899"}],value:a.map_type,text:"\u6a21\u578b"},mapStyle:a.map_style,addRemark:a.remark,addTitle:a.type_name})):alert(e.data.msg)}))}},{key:"onContextMenu",value:function(e,t){1===t?(C()("#test"+e).find(".Alert").css("display","block"),C()("#test"+e).siblings().find(".Alert").css("display","none")):2===t&&(C()("#testTwo"+e).find(".Alert").css("display","block"),C()("#testTwo"+e).siblings().find(".Alert").css("display","none"))}},{key:"clickDeleted",value:function(t,a,n){var l=this;t.stopPropagation(),window.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bbe\u5907\u561b\uff1f")&&(1===n?v.a.post(e.Url+"device/category/delete",{id:a}).then((function(e){var t=e.data.data;t?(console.log(t),l.onDevice()):alert(e.data.msg)})):2===n&&v.a.post(e.Url+"device/type/delete",{id:a}).then((function(e){var t=e.data.data;t?(console.log(t),l.NavList()):alert(e.data.msg)})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.List,l=t.enable,i=t.Save,o=t.One,r=t.OneAdd,s=t.uploadedFileGetUrl,c=t.mapDeviceName,u=t.isEnable,d=t.Two,m=t.TwoName,h=t.TwoAdd,p=t.typeName,v=t.typeIcon,y=t.mapIcon,E=t.addEnable,C=t.mapType,N=t.mapStyle,k=t.addRemark,S=t.addTitle,I=t.TwoChange,w=t.mapDeviceIntent,O=this.props.navClick;return g.a.createElement(f.Fragment,null,a?g.a.createElement("div",null,o?g.a.createElement("div",{className:"configShow",style:{width:"500px"}},g.a.createElement("div",{className:"configShowNav"},"\u7c7b\u522b\u7ba1\u7406 ",g.a.createElement("i",{onClick:function(){return O(100)}})),g.a.createElement("div",{className:"configShowConent"},g.a.createElement("h1",{className:"cur"},"\u8bbe\u5907\u7c7b\u522b"),g.a.createElement("div",{className:"device"},n.length>0&&n.map((function(t,a){return g.a.createElement("li",{key:a,className:t.enable?"":"Grayscale",onClick:l?"":function(){return e.ListClick(t.id,t.category_name)},id:"test"+t.id,onContextMenu:function(){return e.onContextMenu(t.id,1)}},g.a.createElement("img",{src:t.category_icon,alt:""}),g.a.createElement("span",null,t.category_name),l?t.enable?g.a.createElement("input",{type:"checkbox",value:t.category_name||!1,readOnly:!0,checked:"checked",onChange:function(){return e.handleCheck(t.id,t.enable)}}):g.a.createElement("input",{type:"checkbox",value:t.category_name||!1,readOnly:!0,onChange:function(){return e.handleCheck(t.id,t.enable)}}):"",g.a.createElement("div",{className:"Alert",style:{display:"none"}},g.a.createElement("button",{onClick:function(a){return e.clickDeleted(a,t.id,1)}},"\u5220\u9664")))})),l?"":g.a.createElement("li",{onClick:function(){return e.Add(1)}},g.a.createElement("img",{src:b.a,alt:""}),"\u6dfb\u52a0")),g.a.createElement("div",{className:"configBut"},i?g.a.createElement("button",{onClick:function(){return e.Save(1)}},"\u4fdd\u5b58"):g.a.createElement("button",{onClick:function(){return e.Edit(1)}},"\u7f16\u8f91")))):"",r?g.a.createElement("div",{className:"configShow Basic",style:{marginLeft:"520px"}},g.a.createElement("div",{className:"configShowNav"},"\u8bbe\u5907\u6dfb\u52a0 ",g.a.createElement("i",{onClick:function(){return O(101)}})),g.a.createElement("div",{className:"configShowConent"},g.a.createElement("div",{className:"configShowConent_cont DevicePic"},g.a.createElement("li",null,g.a.createElement("span",null,"\u8bbe\u5907\u56fe\u6807\uff1a"),g.a.createElement("input",{type:"file",ref:this.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(t){return e.handlePhoto(t,1)}}),g.a.createElement("em",{onClick:function(){e.fileInputEl.current.click()}},g.a.createElement("img",{src:s,alt:""}))),g.a.createElement("li",null,g.a.createElement("span",null,"\u8bbe\u5907\u540d\u79f0\uff1a"),g.a.createElement("input",{type:"text",value:c,onChange:function(t){return e.deviceName(t)}})),g.a.createElement("li",null,g.a.createElement("span",null,"\u8bbe\u5907\u6807\u8bc6\uff1a"),g.a.createElement("input",{type:"text",value:w,onChange:function(t){return e.deviceIntentName(t)}})),g.a.createElement("li",null,g.a.createElement("span",null,"\u72b6\u6001\uff1a"),g.a.createElement("input",{type:"checkbox",checked:u,onChange:function(){return e.handleIsEnable()}}))),g.a.createElement("div",{className:"configBut",style:{marginTop:"35px"}},g.a.createElement("button",{onClick:function(){return e.deviceSave(s,c,w,u)}},"\u6dfb\u52a0"),g.a.createElement("button",{onClick:function(){return O(101)}},"\u5173\u95ed")))):"",d?g.a.createElement("div",{className:"configShow",style:{width:"500px"}},g.a.createElement("div",{className:"configShowNav"},"\u7c7b\u522b\u7ba1\u7406 ",g.a.createElement("i",{onClick:function(){return O(100)}})),g.a.createElement("div",{className:"configShowConent"},g.a.createElement("h1",{className:"cur"},g.a.createElement("em",{onClick:function(){return e.ReturnOne()}},"\u8bbe\u5907\u7c7b\u522b")," >> ",m),g.a.createElement("div",{className:"device"},n.length>0&&n.map((function(t,a){return g.a.createElement("li",{key:a,className:t.enable?"":"Grayscale",onClick:l?"":function(){return e.TwoListClick(t.id,t.type_name)},id:"testTwo"+t.id,onContextMenu:function(){return e.onContextMenu(t.id,2)}},g.a.createElement("img",{src:t.type_icon,alt:""}),g.a.createElement("span",null,t.type_name),l?t.enable?g.a.createElement("input",{type:"checkbox",value:t.type_name||!1,readOnly:!0,checked:"checked",onChange:function(){return e.handleCheck(t.id,t.enable)}}):g.a.createElement("input",{type:"checkbox",value:t.type_name||!1,readOnly:!0,onChange:function(){return e.handleCheck(t.id,t.enable)}}):"",g.a.createElement("div",{className:"Alert",style:{display:"none"}},g.a.createElement("button",{onClick:function(a){return e.clickDeleted(a,t.id,2)}},"\u5220\u9664")))})),l?"":g.a.createElement("li",{onClick:function(){return e.Add(2)}},g.a.createElement("img",{src:b.a,alt:""}),"\u6dfb\u52a0")),g.a.createElement("div",{className:"configBut"},i?g.a.createElement("button",{onClick:function(){return e.Save(2)}},"\u4fdd\u5b58"):g.a.createElement("button",{onClick:function(){return e.Edit(2)}},"\u7f16\u8f91")))):"",h?g.a.createElement("div",{className:"configShow Basic",style:{marginLeft:"520px"}},g.a.createElement("div",{className:"configShowNav"},m,"\u6dfb\u52a0 ",g.a.createElement("i",{onClick:function(){return O(101)}})),g.a.createElement("div",{className:"configShowConent"},g.a.createElement("div",{className:"configShowConent_cont DevicePic"},g.a.createElement("li",null,g.a.createElement("span",null,"\u7c7b\u578b\u540d\u79f0\uff1a"),g.a.createElement("input",{type:"text",value:p,onChange:function(t){return e.deviceTypeName(t)}})),g.a.createElement("li",null,g.a.createElement("span",null,"\u7c7b\u578b\u56fe\u6807\uff1a"),g.a.createElement("input",{type:"file",ref:this.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(t){return e.handlePhoto(t,2)}}),g.a.createElement("em",{onClick:function(){e.fileInputEl.current.click()}},g.a.createElement("img",{style:{marginLeft:"0"},src:v,alt:""}))),g.a.createElement("li",null,g.a.createElement("span",null,"\u5c55\u793a\u56fe\u6807\uff1a"),g.a.createElement("input",{type:"file",ref:this.fileInputEl1,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(t){return e.handlePhoto(t,3)}}),g.a.createElement("em",{onClick:function(){e.fileInputEl1.current.click()}},g.a.createElement("img",{style:{marginLeft:"0"},src:y,alt:""}))),g.a.createElement("li",null,g.a.createElement("span",null,"\u5c55\u793a\u65b9\u5f0f\uff1a"),g.a.createElement("select",{onChange:this.selectChange,className:"AddSelect",value:C.value},C.ls.map((function(e,t){return g.a.createElement("option",{key:"op"+t,index:t,value:e.value},e.text)})))),g.a.createElement("li",null,g.a.createElement("span",null,"\u4e0a\u56fe\u53c2\u6570\uff1a"),g.a.createElement("textarea",{className:"AddTextarea",value:JSON.stringify(N),onChange:this.handleStyle})),g.a.createElement("li",null,g.a.createElement("span",null,"\u5907\u6ce8\uff1a"),g.a.createElement("textarea",{className:"AddTextarea",style:{height:"30px"},defaultValue:k,onChange:this.handleInfo})),g.a.createElement("li",null,g.a.createElement("span",null,"\u72b6\u6001\uff1a"),g.a.createElement("input",{type:"checkbox",checked:E,onChange:function(t){return e.handleAddEnable(t)}}))),g.a.createElement("div",{className:"configBut",style:{marginTop:"35px"}},g.a.createElement("button",{onClick:function(){return e.deviceSave1(p,v,y,C.value,N,k,E)}},"\u6dfb\u52a0"),g.a.createElement("button",{onClick:function(){return O(101)}},"\u5173\u95ed")))):"",I?g.a.createElement("div",{className:"configShow Basic",style:{marginLeft:"520px"}},g.a.createElement("div",{className:"configShowNav"},S,"\u4fee\u6539 ",g.a.createElement("i",{onClick:function(){return O(101)}})),g.a.createElement("div",{className:"configShowConent"},g.a.createElement("div",{className:"configShowConent_cont DevicePic"},g.a.createElement("li",null,g.a.createElement("span",null,"\u7c7b\u578b\u540d\u79f0\uff1a"),g.a.createElement("input",{type:"text",value:p,onChange:function(t){return e.deviceTypeName(t)}})),g.a.createElement("li",null,g.a.createElement("span",null,"\u7c7b\u578b\u56fe\u6807\uff1a"),g.a.createElement("input",{type:"file",ref:this.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(t){return e.handlePhoto(t,2)}}),g.a.createElement("em",{onClick:function(){e.fileInputEl.current.click()}},g.a.createElement("img",{style:{marginLeft:"0"},src:v,alt:""}))),g.a.createElement("li",null,g.a.createElement("span",null,"\u5c55\u793a\u56fe\u6807\uff1a"),g.a.createElement("input",{type:"file",ref:this.fileInputEl1,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(t){return e.handlePhoto(t,3)}}),g.a.createElement("em",{onClick:function(){e.fileInputEl1.current.click()}},g.a.createElement("img",{style:{marginLeft:"0"},src:y,alt:""}))),g.a.createElement("li",null,g.a.createElement("span",null,"\u5c55\u793a\u65b9\u5f0f\uff1a"),g.a.createElement("select",{onChange:this.selectChange,className:"AddSelect",value:C.value},C.ls.map((function(e,t){return g.a.createElement("option",{key:"op"+t,index:t,value:e.value},e.text)})))),g.a.createElement("li",null,g.a.createElement("span",null,"\u4e0a\u56fe\u53c2\u6570\uff1a"),g.a.createElement("textarea",{className:"AddTextarea",value:JSON.stringify(N),onChange:this.handleStyle})),g.a.createElement("li",null,g.a.createElement("span",null,"\u5907\u6ce8\uff1a"),g.a.createElement("textarea",{className:"AddTextarea",style:{height:"30px"},defaultValue:k,onChange:this.handleInfo})),g.a.createElement("li",null,g.a.createElement("span",null,"\u72b6\u6001\uff1a"),g.a.createElement("input",{type:"checkbox",checked:E,onChange:function(t){return e.handleAddEnable(t)}}))),g.a.createElement("div",{className:"configBut",style:{marginTop:"35px"}},g.a.createElement("button",{onClick:function(){return e.deviceSave2(p,v,y,C.value,N,k,E)}},"\u4fee\u6539"),g.a.createElement("button",{onClick:function(){return O(101)}},"\u5173\u95ed")))):""):"")}}]),a}(f.PureComponent);t.a=Object(h.b)(null,(function(){return{navClick:function(e){console.log(e),N.this.setState({One:!1,OneAdd:!1,Two:!1,TwoAdd:!1,TwoChange:!1}),101===e&&(N.this.state.OneAdd?N.this.setState({One:!0,OneAdd:!1,Two:!1,TwoAdd:!1,TwoChange:!1}):N.this.setState({One:!1,Two:!0,OneAdd:!1,TwoAdd:!1,TwoChange:!1}))}}}))(N)}).call(this,a(22))},291:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=a(15),m=a(2),f=a.n(m),g=a(4),h=a.n(g),p=function(t){function a(t){var l;return Object(n.a)(this,a),(l=Object(i.a)(this,Object(o.a)(a).call(this,t))).handleChange=function(e,t,a,n){console.log(t,a,n),null===t&&alert("\u8bf7\u9009\u62e9\u8bbe\u5907\u7c7b\u578b\uff01"),f()(".ADDpIC").find("dl.dl"+t).css({opacity:"1"}),f()(".ADDpIC").find("dl.dl"+t).siblings("dl").css({opacity:"0.6"}),l.setState({TypeId:t,mapStyle:a,mapType:n})},l.ChangeBuild=function(t){t.preventDefault(),console.log(t.target.value),h.a.post(e.Url+"map/floor/list",{build_id:t.target.value}).then((function(e){var t=e.data.data;t?(console.log(t),l.setState({floor:t,floorId:t[0].id})):alert(e.data.msg)})),l.setState({buildId:t.target.value})},l.ChangeFloor=function(e){e.preventDefault(),console.log(e.target.value),l.setState({floorId:e.target.value})},l.ChangeON=function(e){e.preventDefault(),console.log(e.target.value),l.setState({searchOn:e.target.value})},a.this=Object(r.a)(l),l.state={isLoading:!1,List:{},One:!0,Two:!1,TwoName:!1,TwoTree:{},ZZListBtu:!0,SBList:!0,SBTable:!1,changeName:"",OneFile:"",tableList:{},ShowPic:!1,ShowPosition:!1,PicList:{},TypeId:"",mapStyle:{},mapType:"",typeName:"",X:"",Y:"",Z:"",H:"",modelId:"",indoor:!1,build:{},buildId:"",floor:{},floorId:"",searchName:"",searchOn:"",geom:{}},l.ListClick=l.ListClick.bind(Object(r.a)(l)),l.onContextMenu=l.onContextMenu.bind(Object(r.a)(l)),l.ReturnOne=l.ReturnOne.bind(Object(r.a)(l)),l.onMenuClicked=l.onMenuClicked.bind(Object(r.a)(l)),l.listName=l.listName.bind(Object(r.a)(l)),l.changeList=l.changeList.bind(Object(r.a)(l)),l.changeSureList=l.changeSureList.bind(Object(r.a)(l)),l.AddTwoList=l.AddTwoList.bind(Object(r.a)(l)),l.DeleteList=l.DeleteList.bind(Object(r.a)(l)),l.importFile=l.importFile.bind(Object(r.a)(l)),l.AddPic=l.AddPic.bind(Object(r.a)(l)),l.Close=l.Close.bind(Object(r.a)(l)),l.handleChange=l.handleChange.bind(Object(r.a)(l)),l.SureLiu=l.SureLiu.bind(Object(r.a)(l)),l.ChangeX=l.ChangeX.bind(Object(r.a)(l)),l.ChangeY=l.ChangeY.bind(Object(r.a)(l)),l.ChangeZ=l.ChangeZ.bind(Object(r.a)(l)),l.ChangeH=l.ChangeH.bind(Object(r.a)(l)),l.handleIsIndoor=l.handleIsIndoor.bind(Object(r.a)(l)),l.ChangeBuild=l.ChangeBuild.bind(Object(r.a)(l)),l.ChangeFloor=l.ChangeFloor.bind(Object(r.a)(l)),l.ChangeON=l.ChangeON.bind(Object(r.a)(l)),l.SaveLiu=l.SaveLiu.bind(Object(r.a)(l)),l.DeletePic=l.DeletePic.bind(Object(r.a)(l)),l.Delete=l.Delete.bind(Object(r.a)(l)),l.ChangeEdit=l.ChangeEdit.bind(Object(r.a)(l)),l.SBName=l.SBName.bind(Object(r.a)(l)),l.Search=l.Search.bind(Object(r.a)(l)),l}return Object(s.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onDevice(),document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(console.log(e.data),e.data.switchName){case"getCameraView":sessionStorage.setItem("center",this.JSON.stringify(e.data.cv,null,4));break;case"dragModleV2":sessionStorage.setItem("Center",this.JSON.stringify(e.data.style)),a.this.setState({ShowPosition:!0,X:this.JSON.stringify(e.data.style.position.x),Y:this.JSON.stringify(e.data.style.position.y),Z:this.JSON.stringify(e.data.style.position.z),H:this.JSON.stringify(e.data.style.position.heading),geom:e.data.style.geom});break;case"dragModleV2Start":a.this.setState({ShowPosition:!1,X:"",Y:"",Z:"",H:""});break;case"dragModleV2Model":a.this.setState({modelId:e.data.modelid});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"onDevice",value:function(){var t=this;h.a.post(e.Url+"device/category/list",{enable:!0}).then((function(e){var a=e.data.data;a?(console.log(a),t.setState({isLoading:!0,List:a})):alert(e.data.msg)}))}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),f()("#addAlert"+t).parents().find(".Alert").css("display","none"),f()("#addAlert"+t).parents().find("h2").find("input").css("display","none"),f()("#addAlert"+t).parents().find(".Alert").find(".cur1").css("display","none"),f()("#addAlert"+t).siblings().find(".Alert").css("display","none"),f()("#addAlert"+t).children().find(".Alert").find(".cur1").css("display","none"),f()("#addAlert"+t).find("#Alert"+t).css("display","block"),f()("#addAlert"+t).parents().find("h2").css({fontWeight:"400",color:"#fff"}),f()("#addAlert"+t).find("h2").css({fontWeight:"bold",color:"#268ae4"}),f()("#addAlert"+t).children().find("h2").css({fontWeight:"400",color:"#fff"}),f()("#addAlert"+t).siblings().find("h2").css({fontWeight:"400",color:"#fff"})}},{key:"ReturnOne",value:function(){this.onDevice(),this.setState({One:!0,Two:!1,TwoName:""})}},{key:"ListClick",value:function(t,a){var n=this;this.setState({One:!1,Two:!0,TwoName:a,TwoTree:{},tableList:{},SBTable:!1}),sessionStorage.setItem("TwoId",t),sessionStorage.removeItem("ReginId"),h.a.post(e.Url+"device/region/list",{category_id:t}).then((function(e){var t=e.data.data;t?(console.log(t),0===t.length?n.setState({ZZListBtu:!0,SBList:!1}):(n.setState({ZZListBtu:!1,SBList:!0,TwoTree:t}),n.RightTableList())):alert(e.data.msg)}))}},{key:"onMenuClicked",value:function(t,a){var n=this;t.stopPropagation();var l=f()(t.target).next();l.css("display","none"===l.css("display")?"block":"none"),f()("#addAlert"+a).parents().find("h2").css({fontWeight:"400",color:"#fff"}),f()("#addAlert"+a).find("h2").css({fontWeight:"bold",color:"#268ae4"}),f()("#addAlert"+a).children().find("h2").css({fontWeight:"400",color:"#fff"}),f()("#addAlert"+a).siblings().find("h2").css({fontWeight:"400",color:"#fff"}),f()("#addAlert"+a).parents().find(".Alert").css("display","none"),f()("#addAlert"+a).parents().find("h2").find("input").css("display","none"),f()("#addAlert"+a).parents().find(".Alert").find(".cur1").css("display","none"),f()("#addAlert"+a).siblings().find(".Alert").css("display","none"),f()("#addAlert"+a).children().find(".Alert").find(".cur1").css("display","none"),f()("#addAlert"+a).find("#Alert"+a).css("display","none"),sessionStorage.setItem("ReginId",a),h.a.post(e.Url+"device/info/list",{region_id:a}).then((function(e){var t=e.data.data;t?(console.log(t),n.setState({tableList:t})):alert(e.data.msg)}))}},{key:"listName",value:function(e){e.stopPropagation(),this.setState({changeName:e.target.value})}},{key:"changeList",value:function(e,t){e.stopPropagation(),f()("#addAlert"+t).parents().find("h2").find("input").css("display","none"),f()("#addAlert"+t).find("h2").find("input").css("display","block"),f()("#addAlert"+t).children().find("li").find("h2").find("input").css("display","none"),f()("#addAlert"+t).find(".Alert").find(".cur1").css("display","block")}},{key:"changeSureList",value:function(t,a,n,l){var i=this;t.stopPropagation(),console.log(a,n,l),h.a.post(e.Url+"device/region/update",{id:a,region_name:n,pid:l}).then((function(e){var t=e.data.data;f()("#addAlert"+a).find("h2").find("input").css("display","none"),f()("#addAlert"+a).find(".Alert").find(".cur1").css("display","none"),f()("#addAlert"+a).find(".Alert").css("display","none"),t?(console.log(t),i.setState({TwoTree:t}),i.generateMenu(i.AnalyticFormat(i.state.TwoTree)),i.publicList()):alert(e.data.msg)}))}},{key:"AnalyticFormat",value:function(e){return function e(t,a){for(var n,l=[],i=0;i<t.length;i++)t[i].pid===a&&(n=e(t,t[i].id),t[i].children=n,l.push(t[i]));return l}(e,"0")}},{key:"generateMenu",value:function(e){var t=this,a=[],n=this.state.changeName;if(e instanceof Array){var l=[],i=!0,o=!1,r=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var d=s.value;l.push(this.generateMenu(d))}}catch(f){o=!0,r=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw r}}a.push(u.a.createElement("ul",{key:"single"},l))}else{var m=!0;if(e.children.length>0&&(m=!1),null==e)return;a.push(u.a.createElement("li",{key:e.id,className:"addAlert",id:"addAlert"+e.id,onContextMenu:function(a){return t.onContextMenu(a,e.id)}},u.a.createElement("h2",{onClick:function(a){return t.onMenuClicked(a,e.id)}},e.region_name,u.a.createElement("input",{type:"text",style:{display:"none"},defaultValue:e.region_name,onChange:function(e){return t.listName(e)}})),this.generateMenu(e.children),u.a.createElement("div",{className:"Alert",id:"Alert"+e.id,style:{display:"none"}},u.a.createElement("button",{onClick:function(a){return t.changeList(a,e.id)}},"\u4fee\u6539"),u.a.createElement("button",{className:"cur1",style:{display:"none"},onClick:function(a){return t.changeSureList(a,e.id,n,e.pid)}},"\u786e\u5b9a"),u.a.createElement("button",{onClick:function(a){return t.AddTwoList(a,e.id,"\u65b0\u5efa\u6587\u4ef6",e.pid)}},"\u6dfb\u52a0"),m?u.a.createElement("button",{onClick:function(a){return t.DeleteList(a,e.id)}},"\u5220\u9664"):"")))}return a}},{key:"publicList",value:function(){var t=this;h.a.post(e.Url+"device/region/list",{category_id:sessionStorage.getItem("TwoId")}).then((function(e){var a=e.data.data;a?(console.log(a),t.setState({TwoTree:a}),0===a.length?t.setState({ZZListBtu:!0,SBList:!1}):(t.setState({ZZListBtu:!1,SBList:!0,TwoTree:a}),t.RightTableList())):alert(e.data.msg)}))}},{key:"AddTwoList",value:function(t,a,n,l){var i=this;t.stopPropagation(),console.log(n,l),f()("#addAlert"+a).find("h2").find("input").css("display","none"),f()("#addAlert"+a).find(".Alert").find(".cur1").css("display","none"),f()("#addAlert"+a).find(".Alert").css("display","none"),h.a.post(e.Url+"device/region/add",{category_id:sessionStorage.getItem("TwoId"),region_name:n,pid:a}).then((function(e){var t=e.data.data;t?(console.log(t),i.publicList()):alert(e.data.msg)}))}},{key:"DeleteList",value:function(t,a){var n=this;t.stopPropagation(),f()("#addAlert"+a).find("h2").find("input").css("display","none"),f()("#addAlert"+a).find(".Alert").find(".cur1").css("display","none"),f()("#addAlert"+a).find(".Alert").css("display","none"),window.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bbe\u5907\u561b\uff1f")&&h.a.post(e.Url+"device/region/delete",{id:a}).then((function(e){var t=e.data.data;t?(console.log(t),n.publicList()):alert(e.data.msg)}))}},{key:"RightTableList",value:function(){var t=this,a=sessionStorage.getItem("ReginId"),n={};console.log(a),n=null===a?{category_id:sessionStorage.getItem("TwoId")}:{category_id:sessionStorage.getItem("TwoId"),region_id:a},console.log(n),h.a.post(e.Url+"device/info/list",n).then((function(e){var a=e.data.data;a?(console.log(a,a.length),t.setState({tableList:a}),0===a.length?t.setState({SBTable:!1}):t.setState({SBTable:!0})):alert(e.data.msg)}))}},{key:"importFile",value:function(t,n){var l;if(l=t.target.files[0],console.log(l),null===l)alert("\u6ca1\u6709\u6570\u636e\uff01");else{var i;this.setState({OneFile:l});var o=new FormData;1===n?(o.append("category_id",sessionStorage.getItem("TwoId")),o.append("device_region",l),i={url:e.Url+"device/region/upload",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:o,dataType:"JSON"},f.a.ajax(i).done((function(e){console.log(e);var t=e.data;t?(console.log(t),a.this.publicList()):alert(e.msg)}))):2===n&&(o.append("category_id",sessionStorage.getItem("TwoId")),o.append("device_info",l),i={url:e.Url+"device/info/upload",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:o,dataType:"JSON"},f.a.ajax(i).done((function(e){console.log(e);var t=e.data;t?(console.log(t),a.this.RightTableList()):alert(e.msg)})))}}},{key:"AddPic",value:function(t,a){var n=this;console.log(t),sessionStorage.setItem("sbId",t),this.setState({ShowPic:!0,ShowPosition:!1,typeName:a,TypeId:""}),h.a.post(e.Url+"device/type/list",{category_id:sessionStorage.getItem("TwoId"),enable:!0}).then((function(e){var t=e.data.data;t?(console.log(t),n.setState({PicList:t})):alert(e.data.msg)})),this.DeleteCesium()}},{key:"DeleteCesium",value:function(){var e=document.getElementById("core_content"),t={Event:"",ModName:"remove3DTilesV2",parameter:{modelobj:a.this.state.modelId}};e.contentWindow.postMessage(t,"*"),t={Event:"ClearHandler()",ModName:"",parameter:{}},e.contentWindow.postMessage(t,"*"),t={Event:"DeletePerspectiveFollow()",ModName:"",parameter:{}},e.contentWindow.postMessage(t,"*")}},{key:"Close",value:function(){this.setState({ShowPic:!1,ShowPosition:!1}),this.DeleteCesium()}},{key:"SureLiu",value:function(e,t,a,n){if(console.log(t,a,n),""===t)alert("\u8bf7\u5148\u9009\u62e9\u8981\u6dfb\u52a0\u7684\u8bbe\u5907\uff01");else{var l=document.getElementById("core_content"),i=a.url,o={Event:"",ModName:"dragModleV2",parameter:{mode:n,data:{url:i=i.replace("$serverURL$",sessionStorage.getItem("Serverurl")),height:a.height,scale:a.scale}}};console.log(o),l.contentWindow.postMessage(o,"*"),this.setState({ShowPic:!1})}o={Event:"getCameraView()",ModName:"",parameter:{}},(l=document.getElementById("core_content")).contentWindow.postMessage(o,"*")}},{key:"ChangeX",value:function(e){this.setState({X:e.target.value});var t=document.getElementById("core_content"),n={Event:"",ModName:"ModifyModelCoordinates",parameter:{x:e.target.value,y:a.this.state.Y,z:a.this.state.Z,heading:a.this.state.H,id:a.this.state.modelId}};t.contentWindow.postMessage(n,"*")}},{key:"ChangeY",value:function(e){this.setState({Y:e.target.value});var t=document.getElementById("core_content"),n={Event:"",ModName:"ModifyModelCoordinates",parameter:{x:a.this.state.X,y:e.target.value,z:a.this.state.Z,heading:a.this.state.H,id:a.this.state.modelId}};t.contentWindow.postMessage(n,"*")}},{key:"ChangeZ",value:function(e){this.setState({Z:e.target.value});var t=document.getElementById("core_content"),n={Event:"",ModName:"ModifyModelCoordinates",parameter:{x:a.this.state.X,y:a.this.state.Y,z:e.target.value,heading:a.this.state.H,id:a.this.state.modelId}};t.contentWindow.postMessage(n,"*")}},{key:"ChangeH",value:function(e){this.setState({H:e.target.value});var t=document.getElementById("core_content"),n={Event:"",ModName:"ModifyModelCoordinates",parameter:{x:a.this.state.X,y:a.this.state.Y,z:a.this.state.Z,heading:e.target.value,id:a.this.state.modelId}};t.contentWindow.postMessage(n,"*")}},{key:"handleIsIndoor",value:function(t){var a=this;this.setState((function(e){return{indoor:!e.indoor}})),this.state.indoor?this.setState({build:{},buildValue:"",buildId:"",floor:{},floorValue:"",floorId:""}):h.a.get(e.Url+"map/build/list").then((function(t){var n=t.data.data;n?(console.log(n),a.setState({build:n,buildId:n[0].id}),h.a.post(e.Url+"map/floor/list",{build_id:n[0].id}).then((function(e){var t=e.data.data;t?(console.log(t),a.setState({floor:t,floorId:t[0].id})):alert(e.data.msg)}))):alert(t.data.msg)}))}},{key:"SaveLiu",value:function(t,n,l,i){var o,r=this,s=document.getElementById("core_content"),c={Event:"getCameraView()",ModName:"",parameter:{}};s.contentWindow.postMessage(c,"*"),o={id:sessionStorage.getItem("sbId"),type_id:t,center:JSON.parse(sessionStorage.getItem("center")),options:JSON.parse(sessionStorage.getItem("Center")),indoor:n,build_id:l,floor_id:i,geom:a.this.state.geom},console.log(o),h.a.post(e.Url+"device/info/onMap",o).then((function(e){var t=e.data.data;if(t){console.log(t),r.setState({ShowPosition:!1}),r.RightTableList();var a=document.getElementById("core_content");c={Event:"ClearHandler()",ModName:"",parameter:{}},a.contentWindow.postMessage(c,"*"),c={Event:"DeletePerspectiveFollow()",ModName:"",parameter:{}},a.contentWindow.postMessage(c,"*")}else alert(e.data.msg)}))}},{key:"DeletePic",value:function(t,a){var n=this;a.stopPropagation(),window.confirm("\u60a8\u786e\u5b9a\u8981\u53d6\u6d88\u8be5\u8bbe\u5907\u4e0a\u56fe\u561b\uff1f")&&h.a.post(e.Url+"device/info/offMap",{id:t}).then((function(e){var t=e.data.data;t?(console.log(t),n.RightTableList()):alert(e.data.msg)}))}},{key:"Delete",value:function(t,a){var n=this;a.stopPropagation(),window.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bbe\u5907\u8be6\u60c5\u561b\uff1f")&&h.a.post(e.Url+"device/info/delete",{id:t}).then((function(e){var t=e.data.data;t?(console.log(t),n.RightTableList()):alert(e.data.msg)}))}},{key:"ChangeEdit",value:function(e,t,a,n,l,i,o){console.log(t,a,n,l,i,o)}},{key:"SBName",value:function(e){this.setState({searchName:e.target.value})}},{key:"Search",value:function(t,a){var n=this;"false"===a?a=!1:"true"===a&&(a=!0);var l={on_map:a,device_name:t,region_id:sessionStorage.getItem("ReginId")};""===t&&""!==a?l={on_map:a,region_id:sessionStorage.getItem("ReginId")}:""===a&&""!==t?l={device_name:t,region_id:sessionStorage.getItem("ReginId")}:""===t&&""===a&&(l={region_id:sessionStorage.getItem("ReginId")}),h.a.post(e.Url+"device/info/list",l).then((function(e){var t=e.data.data;t?(console.log(t,t.length),n.setState({tableList:t})):alert(e.data.msg)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.List,n=t.isLoading,l=t.One,i=t.Two,o=t.TwoName,r=t.ZZListBtu,s=t.SBList,d=t.TwoTree,m=t.tableList,f=t.SBTable,g=t.ShowPic,h=t.PicList,p=t.TypeId,v=t.mapStyle,y=t.mapType,b=t.ShowPosition,E=t.typeName,C=t.X,N=t.Y,k=t.Z,S=t.H,I=t.indoor,w=t.build,O=t.buildId,L=t.floor,_=t.floorId,A=t.searchName,T=t.searchOn,M=this.props.navClick;return u.a.createElement(c.Fragment,null,n?u.a.createElement("div",null,l?u.a.createElement("div",{className:"configShow",style:{width:"500px"}},u.a.createElement("div",{className:"configShowNav"},"\u8bbe\u5907\u4e0a\u56fe ",u.a.createElement("i",{onClick:function(){return M(100)}})),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("h1",{className:"cur"},"\u8bbe\u5907\u7c7b\u522b"),u.a.createElement("div",{className:"device"},a.length>0&&a.map((function(t,a){return u.a.createElement("li",{key:a,onClick:function(){return e.ListClick(t.id,t.category_name)},onContextMenu:e.onContextMenu.bind(e)},u.a.createElement("img",{src:t.category_icon,alt:""}),u.a.createElement("span",null,t.category_name))}))))):"",i?u.a.createElement("div",{className:"configShow",style:{width:"800px"}},u.a.createElement("div",{className:"configShowNav"},"\u8bbe\u5907\u4e0a\u56fe ",u.a.createElement("i",{onClick:function(){return M(100)}})),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("h1",{className:"cur",style:{width:"764px"}},u.a.createElement("em",{onClick:function(){return e.ReturnOne()}},"\u8bbe\u5907\u7c7b\u522b")," >> ",o),u.a.createElement("div",{className:"device",style:{width:"764px",overflow:"hidden",height:"350px",marginBottom:"-20px"}},u.a.createElement("div",{className:"Tree"},r?u.a.createElement("div",null,"\u6682\u65e0\u6570\u636e"):"",r?u.a.createElement("div",{className:"import"},u.a.createElement("button",{className:"cur"},"\u5bfc\u5165\u7ec4\u7ec7\u673a\u6784"),u.a.createElement("input",{type:"file",className:"change",ref:"haveFile",id:"fileInput",name:"fileInput",onChange:function(t){return e.importFile(t,1)},accept:".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})):"",u.a.createElement("div",{className:"TreeList"},this.generateMenu(this.AnalyticFormat(d)))),u.a.createElement("div",{className:"TreeTop"},f?"":u.a.createElement("div",null,"\u6682\u65e0\u6570\u636e"),f?"":u.a.createElement("div",{className:"import"},u.a.createElement("button",{className:s?"cur":"cur Grayscale"},"\u5bfc\u5165\u8bbe\u5907\u5217\u8868"),u.a.createElement("input",{type:"file",className:"change",ref:"haveFile",id:"fileInput",name:"fileInput",onChange:function(t){return e.importFile(t,2)},accept:".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),f?u.a.createElement("div",{className:"TableList"},u.a.createElement("div",{className:"TableTitle"},u.a.createElement("span",null,u.a.createElement("label",{htmlFor:""},"\u8bbe\u5907\u540d\u79f0"),u.a.createElement("input",{type:"text",defaultValue:A,onChange:function(t){return e.SBName(t)}})),u.a.createElement("span",null,u.a.createElement("label",{htmlFor:""},"\u72b6\u6001"),u.a.createElement("select",{defaultValue:T,onChange:this.ChangeON},u.a.createElement("option",{value:""},"\u8bf7\u9009\u62e9"),u.a.createElement("option",{value:"false"},"\u672a\u4e0a\u56fe"),u.a.createElement("option",{value:"true"},"\u5df2\u4e0a\u56fe"))),u.a.createElement("span",null,u.a.createElement("button",{onClick:function(){return e.Search(A,T)}},"\u641c\u7d22"))),u.a.createElement("div",{className:"TreeTable"},u.a.createElement("table",{cellPadding:"0",cellSpacing:"0"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"\u540d\u79f0"),u.a.createElement("th",null,"\u7c7b\u578b"),u.a.createElement("th",null,"\u72b6\u6001"),u.a.createElement("th",null,"\u64cd\u4f5c"))),u.a.createElement("tbody",null,m.length>0&&m.map((function(t,a){return u.a.createElement("tr",{key:a},u.a.createElement("td",null,t.device_name),u.a.createElement("td",null,t.device_type),u.a.createElement("td",null,t.on_map?u.a.createElement("span",{className:"green"},"\u5df2\u4e0a\u56fe"):u.a.createElement("span",{className:"red"},"\u672a\u4e0a\u56fe")),u.a.createElement("td",null,u.a.createElement("button",{className:"Edit",onClick:function(a){return e.ChangeEdit(a,t.id,t.device_name,t.indoor,t.build_id,t.floor_id,t.options)}},u.a.createElement("i",null)),t.on_map?u.a.createElement("button",{className:"ChangeTable",onClick:function(a){return e.DeletePic(t.id,a)}},u.a.createElement("i",null)):u.a.createElement("button",{className:"AddTable",onClick:function(){return e.AddPic(t.id,t.device_name)}},u.a.createElement("i",null)),u.a.createElement("button",{className:"deletePic",onClick:function(a){return e.Delete(t.id,a)}},u.a.createElement("i",null))))}))))),g?u.a.createElement("div",{className:"configShow",style:{width:"370px",top:"-60px",left:"780px",textAlign:"left"}},u.a.createElement("div",{className:"configShowNav"},"\u8bbe\u5907\u7c7b\u578b ",u.a.createElement("i",{onClick:function(){return e.Close()}})),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("h1",{className:"cur",style:{width:"333px",textAlign:"left"}},"\u9009\u62e9\u4f60\u8981\u6dfb\u52a0\u7684\u8bbe\u5907"),u.a.createElement("div",{className:"ADDpIC"},h.length>0&&h.map((function(t,a){return u.a.createElement("dl",{key:a,className:"dl"+t.id},u.a.createElement("img",{src:t.type_icon,alt:""}),u.a.createElement("span",null,t.type_name),u.a.createElement("input",{type:"radio",name:"gender",value:t.id,checked:p===t.id,onChange:function(a){return e.handleChange(a,t.id,t.map_style,t.map_type,t.type_name)}}))})),u.a.createElement("div",{className:"configBut",style:{marginTop:"35px"}},u.a.createElement("button",{onClick:function(t){return e.SureLiu(t,p,v,y)}},"\u786e\u5b9a"),u.a.createElement("button",{onClick:function(){return e.Close()}},"\u53d6\u6d88"))))):"",b?u.a.createElement("div",{className:"configShow",style:{width:"370px",top:"-60px",left:"780px",textAlign:"left"}},u.a.createElement("div",{className:"configShowNav"},"\u6dfb\u52a0\u8bbe\u5907 ",u.a.createElement("i",{onClick:function(){return e.Close()}})),u.a.createElement("div",{className:"configShowConent",style:{height:"220px"}},u.a.createElement("div",{className:"Position"},u.a.createElement("div",{className:"PositionName"},u.a.createElement("span",null,"\u8bbe\u5907\u540d\u79f0"),u.a.createElement("input",{type:"text",defaultValue:E,readOnly:!0})),u.a.createElement("div",{className:"PositionX"},u.a.createElement("span",null,u.a.createElement("label",null,"\u7ecf\u5ea6:"),u.a.createElement("input",{type:"text",defaultValue:C,onChange:function(t){return e.ChangeX(t)}})),u.a.createElement("span",null,u.a.createElement("label",null,"\u7ef4\u5ea6:"),u.a.createElement("input",{type:"text",defaultValue:N,onChange:function(t){return e.ChangeY(t)}})),u.a.createElement("span",null,u.a.createElement("label",null,"\u9ad8\u5ea6:"),u.a.createElement("input",{type:"text",defaultValue:k,onChange:function(t){return e.ChangeZ(t)}})),u.a.createElement("span",null,u.a.createElement("label",null,"\u504f\u8f6c\u89d2:"),u.a.createElement("input",{type:"text",defaultValue:S,onChange:function(t){return e.ChangeH(t)}}))),u.a.createElement("div",{className:"PositionFloor"},u.a.createElement("span",null,u.a.createElement("label",null,"\u5ba4\u5185\uff1a"),u.a.createElement("input",{type:"checkbox",checked:I,onChange:function(t){return e.handleIsIndoor(t)}})),u.a.createElement("span",null,u.a.createElement("select",{defaultValue:O,onChange:this.ChangeBuild},w.length>0&&w.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.build_name)})))),u.a.createElement("span",null,u.a.createElement("select",{defaultValue:_,onChange:this.ChangeFloor},L.length>0&&L.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.floor_name)}))))),u.a.createElement("div",{className:"configBut",style:{marginTop:"15px"}},u.a.createElement("button",{className:"cur",onClick:function(){return e.SaveLiu(p,I,O,_)}},"\u4fdd\u5b58"),u.a.createElement("button",{className:"cur",onClick:function(){return e.Close()}},"\u53d6\u6d88"))))):""):"")))):""):"")}}]),a}(c.PureComponent);t.a=Object(d.b)(null,(function(){return{navClick:function(e){console.log(e),p.this.setState({One:!1,Two:!1})}}}))(p)}).call(this,a(22))},292:function(e,t,a){"use strict";var n=a(8),l=a(9),i=a(11),o=a(10),r=a(12),s=a(0),c=a.n(s),u=a(15),d=a(18),m=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.adminItem,a=e.navClick;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{className:5===t?"cur":"",onClick:function(){return a(5)}},"\u5de1\u903b\u8def\u7ebf"),5===t?c.a.createElement("div",null,"\u5de1\u903b\u8def\u7ebf"):"")}}]),t}(s.PureComponent);t.a=Object(u.b)((function(e){return{adminItem:e.admin.get("adminItem")}}),(function(e){return{navClick:function(t){e(d.a.nav_click(t))}}}))(m)},293:function(e,t,a){"use strict";var n=a(8),l=a(9),i=a(11),o=a(10),r=a(12),s=a(0),c=a.n(s),u=a(15),d=a(18),m=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.adminItem,a=e.navClick;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{className:6===t?"cur":"",onClick:function(){return a(6)}},"\u7279\u6548\u914d\u7f6e"),6===t?c.a.createElement("div",null,"\u7279\u6548\u914d\u7f6e"):"")}}]),t}(s.PureComponent);t.a=Object(u.b)((function(e){return{adminItem:e.admin.get("adminItem")}}),(function(e){return{navClick:function(t){e(d.a.nav_click(t))}}}))(m)},294:function(e,t,a){"use strict";(function(e){var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=a(15),m=a(18),f=a(4),g=a.n(f),h=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).ChangeLevel=function(e){e.preventDefault(),console.log(e.target.value),t.setState({Level:e.target.value})},t.state={SBList:{},tableList:{},OneList:!0,TwoList:!1,TwoName:"",AddAlarm:!1,Name:"",Level:0,isPush:!1,isLink:!1,isAlarm:!1,isWrite:!1,isEnable:!1,TwoChangeAlarm:!1},a.this=Object(r.a)(t),t.ListClick=t.ListClick.bind(Object(r.a)(t)),t.ReturnOne=t.ReturnOne.bind(Object(r.a)(t)),t.AddAlarm=t.AddAlarm.bind(Object(r.a)(t)),t.Close=t.Close.bind(Object(r.a)(t)),t.syaName=t.syaName.bind(Object(r.a)(t)),t.ChangeLevel=t.ChangeLevel.bind(Object(r.a)(t)),t.configSave=t.configSave.bind(Object(r.a)(t)),t.deleteList=t.deleteList.bind(Object(r.a)(t)),t.ChangeList=t.ChangeList.bind(Object(r.a)(t)),t.configSave1=t.configSave1.bind(Object(r.a)(t)),t}return Object(s.a)(a,t),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onList()}},{key:"onList",value:function(){var t=this;g.a.post(e.Url+"device/category/list",{enable:!0}).then((function(e){var a=e.data.data;a?(console.log(a),t.setState({SBList:a})):alert(e.data.msg)}))}},{key:"List",value:function(){g.a.post(e.Url+"event/type/list",{category_id:sessionStorage.getItem("TwoListId")}).then((function(e){var t=e.data.data;t?(console.log(t),a.this.setState({tableList:t})):alert(e.data.msg)}))}},{key:"ListClick",value:function(e,t){console.log(e,t),this.setState({OneList:!1,TwoList:!0,TwoName:t}),sessionStorage.setItem("TwoListId",e),this.List()}},{key:"ReturnOne",value:function(){this.onList(),this.setState({OneList:!0,TwoList:!1,TwoName:"",AddAlarm:!1})}},{key:"AddAlarm",value:function(){this.setState({AddAlarm:!0,TwoChangeAlarm:!1,Name:"",Level:0,isPush:!1,isLink:!1,isAlarm:!1,isWrite:!1,isEnable:!1})}},{key:"Close",value:function(){this.setState({AddAlarm:!1,TwoChangeAlarm:!1})}},{key:"syaName",value:function(e){this.setState({Name:e.target.value})}},{key:"handleIsPush",value:function(){this.setState({isPush:!this.state.isPush})}},{key:"handleIsLink",value:function(){this.setState({isLink:!this.state.isLink})}},{key:"handleIsAlarm",value:function(){this.setState({isAlarm:!this.state.isAlarm})}},{key:"handleIsWrite",value:function(){this.setState({isWrite:!this.state.isWrite})}},{key:"handleIsEnable",value:function(){this.setState({isEnable:!this.state.isEnable})}},{key:"configSave",value:function(t,n,l,i,o,r,s){console.log(t,n,l,i,o,r,s),t?0===n?alert("\u8bf7\u9009\u62e9\u4e8b\u4ef6\u7b49\u7ea7!"):g.a.post(e.Url+"event/type/add",{category_id:sessionStorage.getItem("TwoListId"),event_name:t,event_level:n,push_data:l,link_info:i,alarm_event:o,write_log:r,enable:s}).then((function(e){var t=e.data.data;t?(console.log(t),a.this.List(),a.this.setState({OneList:!1,TwoList:!0,AddAlarm:!1})):alert(e.data.msg)})):alert("\u8bf7\u8f93\u5165\u4e8b\u4ef6\u540d\u79f0\uff01")}},{key:"deleteList",value:function(t){window.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bbe\u5907\u561b\uff1f")&&g.a.post(e.Url+"event/type/delete",{id:t}).then((function(e){var t=e.data.data;t?(console.log(t),a.this.List()):alert(e.data.msg)}))}},{key:"ChangeList",value:function(e,t,n,l,i,o,r,s){console.log(e,t,n,l,i,o,r,s),sessionStorage.setItem("TwoListTwoId",e),a.this.setState({OneList:!1,TwoList:!0,AddAlarm:!1,TwoChangeAlarm:!0,Name:t,Level:n,isPush:l,isLink:i,isAlarm:o,isWrite:r,isEnable:s})}},{key:"configSave1",value:function(t,n,l,i,o,r,s){console.log(t,n,l,i,o,r,s),t?0===n?alert("\u8bf7\u9009\u62e9\u4e8b\u4ef6\u7b49\u7ea7!"):g.a.post(e.Url+"event/type/update",{id:sessionStorage.getItem("TwoListTwoId"),event_name:t,event_level:n,push_data:l,link_info:i,alarm_event:o,write_log:r,enable:s}).then((function(e){var t=e.data.data;t?(console.log(t),a.this.List(),a.this.setState({OneList:!1,TwoList:!0,AddAlarm:!1,TwoChangeAlarm:!1})):alert(e.data.msg)})):alert("\u8bf7\u8f93\u5165\u4e8b\u4ef6\u540d\u79f0\uff01")}},{key:"render",value:function(){var e=this,t=this.state,a=t.SBList,n=t.OneList,l=t.TwoList,i=t.TwoName,o=t.tableList,r=t.Name,s=t.Level,d=t.isPush,m=t.isLink,f=t.isAlarm,g=t.isWrite,h=t.isEnable,p=t.AddAlarm,v=t.TwoChangeAlarm,y=this.props,b=y.adminItem,E=y.navClick;return u.a.createElement(c.Fragment,null,u.a.createElement("li",{className:7===b?"cur":"",onClick:function(){return E(7)}},"\u62a5\u8b66\u7ba1\u7406"),7===b&&n?u.a.createElement("div",{className:"configShow",style:{width:"500px"}},u.a.createElement("div",{className:"configShowNav"},"\u62a5\u8b66\u7ba1\u7406 ",u.a.createElement("i",{onClick:function(){return E(100)}})),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("h1",{className:"cur"},"\u8bbe\u5907\u7c7b\u522b"),u.a.createElement("div",{className:"device"},a.length>0&&a.map((function(t,a){return u.a.createElement("li",{key:a,onClick:function(){return e.ListClick(t.id,t.category_name)}},u.a.createElement("img",{src:t.category_icon,alt:""}),u.a.createElement("span",null,t.category_name))}))))):"",7===b&&l?u.a.createElement("div",{className:"configShow",style:{width:"700px"}},u.a.createElement("div",{className:"configShowNav"},"\u62a5\u8b66\u7ba1\u7406",u.a.createElement("i",{onClick:function(){return E(100)}})),u.a.createElement("div",{className:"Alarm"},u.a.createElement("div",{className:"AlarmCur"},u.a.createElement("em",{onClick:function(){return e.ReturnOne()}},"\u8bbe\u5907\u7c7b\u522b")," >> ",i),u.a.createElement("h1",null,u.a.createElement("button",{onClick:function(){return e.AddAlarm()}},"\u6dfb\u52a0")),u.a.createElement("div",{className:"AlarmTable"},u.a.createElement("table",{cellPadding:"0",cellSpacing:"0"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"\u4e8b\u4ef6\u540d\u79f0"),u.a.createElement("th",null,"\u4e8b\u4ef6\u7b49\u7ea7"),u.a.createElement("th",null,"\u662f\u5426\u63a8\u9001"),u.a.createElement("th",null,"\u662f\u5426\u8054\u52a8"),u.a.createElement("th",null,"\u62a5\u8b66\u4e8b\u4ef6"),u.a.createElement("th",null,"\u5199\u5165\u65e5\u5fd7"),u.a.createElement("th",null,"\u662f\u5426\u542f\u7528"),u.a.createElement("th",null,"\u64cd\u4f5c"))),u.a.createElement("tbody",null,o.length>0&&o.map((function(t,a){return u.a.createElement("tr",{key:a},u.a.createElement("td",null,t.event_name),u.a.createElement("td",null,function(){switch(t.event_level){case 1:return u.a.createElement("span",{className:"red"},"\u9ad8");case 2:return u.a.createElement("span",{className:"orange"},"\u4e2d");case 3:return u.a.createElement("span",{className:"green"},"\u4f4e");default:return null}}()),u.a.createElement("td",null,t.push_data?u.a.createElement("span",{className:"red"},"\u5df2\u63a8\u9001"):u.a.createElement("span",{className:"green"},"\u672a\u63a8\u9001")),u.a.createElement("td",null,t.link_info?u.a.createElement("span",{className:"red"},"\u5df2\u8054\u52a8"):u.a.createElement("span",{className:"green"},"\u672a\u8054\u52a8")),u.a.createElement("td",null,t.alarm_event?u.a.createElement("span",{className:"red"},"\u62a5\u8b66\u4e8b\u4ef6"):u.a.createElement("span",{className:"green"},"\u975e\u62a5\u8b66\u4e8b\u4ef6")),u.a.createElement("td",null,t.write_log?u.a.createElement("span",{className:"red"},"\u5df2\u5199\u5165"):u.a.createElement("span",{className:"green"},"\u672a\u5199\u5165")),u.a.createElement("td",null,t.enable?u.a.createElement("span",{className:"red"},"\u5df2\u542f\u7528"):u.a.createElement("span",{className:"green"},"\u672a\u542f\u7528")),u.a.createElement("td",null,u.a.createElement("button",{className:"Edit",onClick:function(){return e.ChangeList(t.id,t.event_name,t.event_level,t.push_data,t.link_info,t.alarm_event,t.write_log,t.enable)}},u.a.createElement("i",null)),u.a.createElement("button",{className:"deletePic",onClick:function(){return e.deleteList(t.id)}},u.a.createElement("i",null))))})))),o.length<=0?u.a.createElement("div",{className:"no"},"\u6682\u65e0\u6570\u636e\uff0c\u8bf7\u5148\u6dfb\u52a0\uff01"):""))):"",7===b&&p?u.a.createElement("div",{className:"configShow",style:{width:"350px",left:"270px"}},u.a.createElement("div",{className:"configShowNav"},"\u6dfb\u52a0\u4e8b\u4ef6",u.a.createElement("i",{onClick:function(){return e.Close()}})),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("div",{className:"configShowConent_cont AlarmCont"},u.a.createElement("li",null,u.a.createElement("span",null,"\u4e8b\u4ef6\u540d\u79f0\uff1a"),u.a.createElement("input",{style:{width:"150px"},type:"text",defaultValue:r,onChange:function(t){return e.syaName(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u4e8b\u4ef6\u7b49\u7ea7\uff1a"),u.a.createElement("select",{defaultValue:s,onChange:this.ChangeLevel},u.a.createElement("option",{value:"0"},"\u8bf7\u9009\u62e9"),u.a.createElement("option",{value:"1"},"\u9ad8"),u.a.createElement("option",{value:"2"},"\u4e2d"),u.a.createElement("option",{value:"3"},"\u4f4e"))),u.a.createElement("li",null,u.a.createElement("span",null,"\u63a8\u9001\uff1a"),u.a.createElement("input",{type:"checkbox",checked:d,onChange:function(t){return e.handleIsPush(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u8054\u52a8\uff1a"),u.a.createElement("input",{type:"checkbox",checked:m,onChange:function(t){return e.handleIsLink(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u62a5\u8b66\uff1a"),u.a.createElement("input",{type:"checkbox",checked:f,onChange:function(t){return e.handleIsAlarm(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u65e5\u5fd7\uff1a"),u.a.createElement("input",{type:"checkbox",checked:g,onChange:function(t){return e.handleIsWrite(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u542f\u7528\uff1a"),u.a.createElement("input",{type:"checkbox",checked:h,onChange:function(t){return e.handleIsEnable(t)}}))),u.a.createElement("div",{className:"configBut"},u.a.createElement("button",{onClick:function(){return e.configSave(r,s,d,m,f,g,h)}},"\u4fdd\u5b58"),u.a.createElement("button",{onClick:function(){return e.Close()}},"\u5173\u95ed")))):"",7===b&&v?u.a.createElement("div",{className:"configShow",style:{width:"350px",left:"270px"}},u.a.createElement("div",{className:"configShowNav"},"\u4fee\u6539\u4e8b\u4ef6",u.a.createElement("i",{onClick:function(){return e.Close()}})),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("div",{className:"configShowConent_cont AlarmCont"},u.a.createElement("li",null,u.a.createElement("span",null,"\u4e8b\u4ef6\u540d\u79f0\uff1a"),u.a.createElement("input",{style:{width:"150px"},type:"text",defaultValue:r,onChange:function(t){return e.syaName(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u4e8b\u4ef6\u7b49\u7ea7\uff1a"),u.a.createElement("select",{defaultValue:s,onChange:this.ChangeLevel},u.a.createElement("option",{value:"0"},"\u8bf7\u9009\u62e9"),u.a.createElement("option",{value:"1"},"\u9ad8"),u.a.createElement("option",{value:"2"},"\u4e2d"),u.a.createElement("option",{value:"3"},"\u4f4e"))),u.a.createElement("li",null,u.a.createElement("span",null,"\u63a8\u9001\uff1a"),u.a.createElement("input",{type:"checkbox",checked:d,onChange:function(t){return e.handleIsPush(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u8054\u52a8\uff1a"),u.a.createElement("input",{type:"checkbox",checked:m,onChange:function(t){return e.handleIsLink(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u62a5\u8b66\uff1a"),u.a.createElement("input",{type:"checkbox",checked:f,onChange:function(t){return e.handleIsAlarm(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u65e5\u5fd7\uff1a"),u.a.createElement("input",{type:"checkbox",checked:g,onChange:function(t){return e.handleIsWrite(t)}})),u.a.createElement("li",null,u.a.createElement("span",null,"\u542f\u7528\uff1a"),u.a.createElement("input",{type:"checkbox",checked:h,onChange:function(t){return e.handleIsEnable(t)}}))),u.a.createElement("div",{className:"configBut"},u.a.createElement("button",{onClick:function(){return e.configSave1(r,s,d,m,f,g,h)}},"\u786e\u5b9a"),u.a.createElement("button",{onClick:function(){return e.Close()}},"\u5173\u95ed")))):"")}}]),a}(c.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem")}}),(function(e){return{navClick:function(t){e(m.a.nav_click(t)),h.this.setState({OneList:!0,TwoList:!1,AddAlarm:!1})}}}))(h)}).call(this,a(22))},295:function(e,t,a){"use strict";var n=a(8),l=a(9),i=a(11),o=a(10),r=a(3),s=a(12),c=a(0),u=a.n(c),d=a(15),m=a(18),f=a(285),g=a(286),h=a(287),p=a(288),v=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return u.a.createElement(c.Fragment,null,u.a.createElement("div",{className:"configShow",style:{width:"500px"}},u.a.createElement("div",{className:"configShowNav"},"\u5730\u4e0b\u6a21\u5f0f"),u.a.createElement("div",{className:"configShowConent"},u.a.createElement("h1",{className:"cur"},"\u8bbe\u5907\u7c7b\u522b"),u.a.createElement("div",{className:"device"}))))}}]),t}(c.PureComponent),y=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(m.a.nav_click(t,a))}}}))(v),b=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={nav:!0,navItem:0},a.navItemClick=a.navItemClick.bind(Object(r.a)(a)),t.this=Object(r.a)(a),a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"navItemClick",value:function(e){this.setState({nav:!1,navItem:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.nav,n=t.navItem,l=this.props,i=l.adminItem,o=l.navClick,r=l.adminIndex;return u.a.createElement(c.Fragment,null,u.a.createElement("li",{className:3===i?"cur":"",onClick:function(){return o(3,2)}},"\u6570\u636e\u914d\u7f6e"),3===i&&a?u.a.createElement("div",{className:"navItem",style:{left:"285px"}},u.a.createElement("li",{className:1===n?"cur":"",onClick:function(){return e.navItemClick(1)}},"\u5efa\u7b51\u5206\u5c42"),u.a.createElement("li",{className:2===n?"cur":"",onClick:function(){return e.navItemClick(2)}},"\u5730\u56fe\u6807\u6ce8"),u.a.createElement("li",{className:3===n?"cur":"",onClick:function(){return e.navItemClick(3)}},"\u81ea\u5b9a\u4e49\u56fe\u5c42"),u.a.createElement("li",{className:4===n?"cur":"",onClick:function(){return e.navItemClick(4)}},"\u7f51\u683c\u6a21\u5f0f"),u.a.createElement("li",{className:5===n?"cur":"",onClick:function(){return e.navItemClick(5)}},"\u5730\u4e0b\u6a21\u5f0f")):"",1===n&&2===r?u.a.createElement(f.a,null):"",2===n&&2===r?u.a.createElement(g.a,null):"",3===n&&2===r?u.a.createElement(h.a,null):"",4===n&&2===r?u.a.createElement(p.a,null):"",5===n&&2===r?u.a.createElement(y,null):"")}}]),t}(c.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(m.a.nav_click(t,a)),3===t&&b.this.setState({nav:!0,navItem:0})}}}))(b)},297:function(e,t,a){e.exports=a(631)},302:function(e,t,a){},31:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"click_Icon",(function(){return r})),a.d(n,"click_Icon_Item",(function(){return s})),a.d(n,"click_Icon_Item_Nav",(function(){return c}));var l=a(118),i=Object(l.a)({index:0,moreIndex:0,moreIndexItem:0}),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"footer/CLICK_ICON":return e.merge({index:t.item,moreIndex:0,moreIndexItem:0});case"footer/CLICK_ICON_ITEM":return e.merge({moreIndex:t.item,moreIndexItem:0});case"footer/CLICK_ICON_ITEM_NAV":return e.set("moreIndexItem",t.item);default:return e}},r=function(e){return{type:"footer/CLICK_ICON",item:e}},s=function(e){return{type:"footer/CLICK_ICON_ITEM",item:e}},c=function(e){return{type:"footer/CLICK_ICON_ITEM_NAV",item:e}};a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return n}))},36:function(e,t,a){},5:function(e,t,a){"use strict";(function(e){var n;a.d(t,"a",(function(){return l}));var l={List:function(){var t={Event:"initEarth()",ModName:"",parameter:{}};(n=document.getElementById("core_content")).contentWindow.postMessage(t,"*"),t={Event:"",ModName:"InitializeBase",parameter:{Serverurl:sessionStorage.getItem("Serverurl"),data_type:sessionStorage.getItem("data_type"),APIURL:e.Url,green:!0}},n.contentWindow.postMessage(t,"*"),t.Event="ClickCoordinates()",t.ModName="",t.parameter={},n.contentWindow.postMessage(t,"*")},onMap:function(){var t={Event:"",ModName:"InitializeBase",parameter:{Serverurl:sessionStorage.getItem("Serverurl"),data_type:"normal",APIURL:e.Url,green:!0}};n.contentWindow.postMessage(t,"*")},onResource:function(){var t={Event:"",ModName:"InitializeBase",parameter:{Serverurl:sessionStorage.getItem("Serverurl"),data_type:"normal",green:!1,APIURL:e.Url}};n.contentWindow.postMessage(t,"*")},onSurveillance:function(){var t={Event:"",ModName:"InitializeBase",parameter:{Serverurl:sessionStorage.getItem("Serverurl"),data_type:"virtual",APIURL:e.Url,green:!0}};n.contentWindow.postMessage(t,"*")},onResetCoordinates:function(){var t={Event:"",ModName:"ResetCoordinates",parameter:{APIURL:e.Url}};n.contentWindow.postMessage(t,"*")},onRetrospectiveCameraView:function(){var e={Event:"RetrospectiveCameraView("+sessionStorage.getItem("dataZB")+")",ModName:"",parameter:{}};n.contentWindow.postMessage(e,"*")},onCoordinate:function(){n.contentWindow.postMessage({Event:"getCameraView()",ModName:"",parameter:{}},"*")},ClickCoordinates:function(){n.contentWindow.postMessage({Event:"ClickCoordinates()",ModName:"",parameter:{}},"*")},onNorth:function(){n.contentWindow.postMessage({Event:"",ModName:"FaceNorth",parameter:{}},"*")},FlightRoaming:function(){n.contentWindow.postMessage({Event:"FlightRoaming()",ModName:"",parameter:{data:[{longitude:121.40564823189915,dimension:31.21298123666682,height:0,time:0},{longitude:121.40751023270903,dimension:31.212981239617275,height:0,time:5},{longitude:121.40752270803132,dimension:31.21208752552693,height:0,time:10}],flyTovalue:{x:121.40564823189915,y:31.21298123666682,z:2e3}}},"*")},MeasurementHeight:function(){n.contentWindow.postMessage({Event:"MeasurementHeight()",ModName:"",parameter:{}},"*")},RemoveHeight:function(){n.contentWindow.postMessage({Event:"RemoveHeight()",ModName:"",parameter:{}},"*")},measureLineSpace:function(){n.contentWindow.postMessage({Event:"measureLineSpace()",ModName:"",parameter:{}},"*")},RemoveLine:function(){n.contentWindow.postMessage({Event:"RemoveLine()",ModName:"",parameter:{}},"*")},measureAreaSpace:function(){n.contentWindow.postMessage({Event:"measureAreaSpace()",ModName:"",parameter:{}},"*")},RemoveArea:function(){n.contentWindow.postMessage({Event:"RemoveArea()",ModName:"",parameter:{}},"*")},RainwaterSystemV2:function(){n.contentWindow.postMessage({Event:"RainwaterSystemV2()",ModName:"",parameter:{}},"*")},RainDelete:function(){n.contentWindow.postMessage({Event:"RainDelete()",ModName:"",parameter:{}},"*")},snowDelete:function(){n.contentWindow.postMessage({Event:"snowDelete()",ModName:"",parameter:{}},"*")},snowSystemV2:function(){n.contentWindow.postMessage({Event:"snowSystemV2()",ModName:"",parameter:{}},"*")},lightDelete:function(){n.contentWindow.postMessage({Event:"lightDelete()",ModName:"",parameter:{}},"*")},enableLightingV2:function(){n.contentWindow.postMessage({Event:"enableLightingV2()",ModName:"",parameter:{}},"*")},Fogging:function(){n.contentWindow.postMessage({Event:"Fogging()",ModName:"",parameter:{}},"*")},fogDelete:function(){n.contentWindow.postMessage({Event:"fogDelete()",ModName:"",parameter:{}},"*")},enableLighting:function(){n.contentWindow.postMessage({Event:"enableLighting()",ModName:"",parameter:{}},"*")},CoordinateLocation:function(e){var t={Event:"",ModName:"CoordinateLocation",parameter:{x:e.x,y:e.y,z:e.z,h:e.h,p:e.p,r:e.r,duration:3}};n.contentWindow.postMessage(t,"*")},InterceptImg:function(){n.contentWindow.postMessage({Event:"InterceptImg()",ModName:"",parameter:{}},"*")},GeoaddlabelV2:function(e,t){var a={Event:"",ModName:"GeoaddlabelV2",parameter:{labeltxt:e,labelid:t}};n.contentWindow.postMessage(a,"*")},ModifyLabel:function(e){var t={Event:"",ModName:"ModifyLabel",parameter:e};n.contentWindow.postMessage(t,"*")},onMenuClickedV2:function(e,t){var a={Event:"",ModName:"onMenuClickedV2",parameter:{id:e,items:t}};n.contentWindow.postMessage(a,"*")},CoordinateModel:function(e){var t={Event:"",ModName:"CoordinateModel",parameter:{id:e}};n.contentWindow.postMessage(t,"*")},ShowSpecifiedModel:function(e){var t={Event:"",ModName:"ShowSpecifiedModel",parameter:{items:e}};n.contentWindow.postMessage(t,"*")},GeoaddlabelV3:function(e){var t={Event:"",ModName:"GeoaddlabelV3",parameter:e};n.contentWindow.postMessage(t,"*")},CustomView:function(e){var t={Event:"",ModName:"CustomView",parameter:{id:e}};n.contentWindow.postMessage(t,"*")},ClearCustomView:function(e){var t={Event:"",ModName:"ClearCustomView",parameter:{id:e}};n.contentWindow.postMessage(t,"*")},ResetLabel:function(){n.contentWindow.postMessage({Event:"ResetLabel()",ModName:"",parameter:{}},"*")},drawPoint:function(e){var t={Event:"",ModName:"drawPoint",parameter:e};n.contentWindow.postMessage(t,"*")},drawPolyline:function(e){var t={Event:"",ModName:"drawPolyline",parameter:e};n.contentWindow.postMessage(t,"*")},drawPolygon:function(e){var t={Event:"",ModName:"drawPolygon",parameter:e};n.contentWindow.postMessage(t,"*")},AddPictureLabel:function(e){var t={Event:"",ModName:"AddPictureLabel",parameter:e};n.contentWindow.postMessage(t,"*")},ClickDisplayLayer:function(e){var t={Event:"",ModName:"ClickDisplayLayer",parameter:e};n.contentWindow.postMessage(t,"*")},Emptyentities:function(e){var t={Event:"",ModName:"Emptyentities",parameter:e};n.contentWindow.postMessage(t,"*")},Modifybillboard:function(e){var t={Event:"",ModName:"Modifybillboard",parameter:e};n.contentWindow.postMessage(t,"*")},ClearHandler:function(){n.contentWindow.postMessage({Event:"ClearHandler()",ModName:"",parameter:{}},"*")},editEntity:function(){n.contentWindow.postMessage({Event:"editEntity()",ModName:"",parameter:{}},"*")},ModifyPolyline:function(e){var t={Event:"",ModName:"ModifyPolyline",parameter:e};n.contentWindow.postMessage(t,"*")},ModifyPolygon:function(e){var t={Event:"",ModName:"ModifyPolygon",parameter:e};n.contentWindow.postMessage(t,"*")},PreviewGrid:function(e){var t={Event:"",ModName:"PreviewGrid",parameter:e};n.contentWindow.postMessage(t,"*")},modifyGrid:function(e){var t={Event:"",ModName:"modifyGrid",parameter:e};n.contentWindow.postMessage(t,"*")},showGrid:function(e){var t={Event:"",ModName:"showGrid",parameter:e};n.contentWindow.postMessage(t,"*")},AddBubbleLabel:function(e){var t={Event:"",ModName:"AddBubbleLabel",parameter:e};n.contentWindow.postMessage(t,"*")},CoordinateModelID:function(e){var t={Event:"",ModName:"CoordinateModelID",parameter:e};n.contentWindow.postMessage(t,"*")},removeBubbleLabel:function(e){var t={Event:"",ModName:"removeBubbleLabel",parameter:e};n.contentWindow.postMessage(t,"*")},AlarmBox:function(e){var t={Event:"",ModName:"AlarmBox",parameter:e};n.contentWindow.postMessage(t,"*")},removeBubbleBombox:function(e){var t={Event:"",ModName:"removeBubbleBombox",parameter:e};n.contentWindow.postMessage(t,"*")}}}).call(this,a(22))},61:function(e){e.exports=JSON.parse('{"Url":"http://192.168.0.211/api/33010801001/","IframeUrl":"http://192.168.0.211/MapV5/","Database":"dxcyy","AlarmNumber":0,"WebList":[],"AlarmShow":false,"WebSocketUrl":"ws://192.168.0.211:8091"}')},630:function(e,t,a){"use strict";(function(e){var t=a(2),n=a.n(t),l=a(61);e.Url=l.Url,e.IframeUrl=l.IframeUrl,e.Database=l.Database,e.AlarmNumber=l.AlarmNumber,e.WebList=l.WebList,e.AlarmShow=l.AlarmShow,e.WebSocketUrl=l.WebSocketUrl,n.a.ajaxSettings.async=!1,n.a.getJSON("config.json",(function(t){console.log(t),e.Url=t.Url,e.IframeUrl=t.IframeUrl,e.Database=t.Database,e.AlarmNumber=t.AlarmNumber,e.WebList=t.WebList,e.AlarmShow=t.AlarmShow,e.WebSocketUrl=t.WebSocketUrl,n.a.ajaxSettings.async=!0}))}).call(this,a(22))},631:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(116),o=a.n(i),r=(a(302),a(8)),s=a(9),c=a(11),u=a(10),d=a(12),m=a(59),f=a(47),g=a(15),h=a(60),p=a(266),v=a(18),y=a(31),b=Object(h.c)({admin:v.b,footer:y.b}),E=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.d,C=Object(h.e)(b,E(Object(h.a)(p.a))),N=a(267),k=a(271),S=(a(36),a(282)),I=a(120),w=a(81),O=a.n(w),L=a(122),_=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.navClick(0)}},{key:"render",value:function(){var e=sessionStorage.getItem("user"),t=sessionStorage.getItem("typeId");return"admin"===e&&"1"===t?l.a.createElement(O.a,{title:"\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0-\u540e\u53f0\u7ba1\u7406"},l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"header"},l.a.createElement(S.a,null)),l.a.createElement("div",{className:"IndexHome"},l.a.createElement("div",{className:"left"}),l.a.createElement("div",{className:"right"}),l.a.createElement("div",{className:"conent"},l.a.createElement(I.a,null))),l.a.createElement(L.a,null))):l.a.createElement(f.a,{to:"/login"})}}]),t}(n.Component),A=Object(g.b)(null,(function(e){return{navClick:function(){e(v.a.nav_click(30))}}}))(_),T=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(g.a,{store:C},l.a.createElement(m.a,null,l.a.createElement("div",null,l.a.createElement(f.b,{path:"/login",exact:!0,component:N.a,onEnter:function(){document.title="\u5e73\u53f0\u767b\u5f55"}}),l.a.createElement(f.b,{path:"/",exact:!0,component:k.a,onEnter:function(){document.title="\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0"}}),l.a.createElement(f.b,{path:"/admin",exact:!0,component:A,onEnter:function(){document.title="\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0-\u540e\u53f0\u7ba1\u7406"}}))))}}]),t}(n.Component);a(630);o.a.render(l.a.createElement(T,null),document.getElementById("root"))}},[[297,1,2]]]);
//# sourceMappingURL=main.b2dc334e.chunk.js.map